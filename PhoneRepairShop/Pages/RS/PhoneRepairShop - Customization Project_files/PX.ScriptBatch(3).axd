
function PXDialog($a,$b,$c,$d){this.ID=$b.id;this.element=$b;PXDialog.initializeBaseA(this,[$a,$b,$c,$d]);this.sourceID=$d;this.btnOk=__px_cm(this).createControl("PXButton",$b.id+"_btnOk");this.btnOk.events.addEventHandler("click",Function.createDelegate(this,this.onOk));this.btnCancel=__px_cm(this).createControl("PXButton",$b.id+"_btnCancel");this.btnCancel.events.addEventHandler("click",Function.createDelegate(this,this.onCancel));};PXDialog.__baseType=PXSmartPanel;PXDialog.prototype.onOk=function(){this.hide();};PXDialog.prototype.onCancel=function(){this.hide();};



function PXNewsList($a,$b,$c){this.$y="Refresh";this.$z="OpenItem";this.$A="Dismiss";this.$B="Snooze";this.px_context=$a;this.element=$b;this.ID=$b.id;this.header=__px(this).elemByID(this.ID+"_header");this.contentDiv=__px(this).elemByID(this.ID+"_content_div");this.initializeElems();this.callbackCmd=__px_callback(this).createCommand("",true,false,false);this.handler=Function.createDelegate(this,this.$C);this.toolbarClickHandler=Function.createDelegate(this,this.$D);this.toolbarMenuClickHandler=Function.createDelegate(this,this.$E);__px_cm(this).readProperties(this,$c,PXNewsList.properties);this.mouseeventsHandler=Function.createDelegate(this,this.$F);__px(this).addEventHandler(this.element,"mousemove",this.mouseeventsHandler);PXSmartPanel.addEventHandler("activePanelChanged",Function.createDelegate(this,this.$G),$a);this.addHadlers();__px_cm(this).registerRequiresOnLoad(this,this.ID);};PXNewsList.properties=[["highlightColor",JSType.String,"#FABC4E"],["selectedColor",JSType.String,"#F9CD81"]];PXNewsList.prototype.initializeElems=function(){this.content=__px(this).elemByID(this.ID+"_content");this.activeItem=null;};PXNewsList.prototype.addHadlers=function(){__px(this).addEventHandler(this.content,"mousedown",this.mouseeventsHandler);__px(this).addEventHandler(this.content,"click",this.mouseeventsHandler);__px(this).addEventHandler(this.content,"dblclick",this.mouseeventsHandler);__px(this).addEventHandler(this.content,"selectstart",this.mouseeventsHandler);};PXNewsList.prototype.removeHadlers=function(){__px(this).removeEventHandler(this.content,"mousedown",this.mouseeventsHandler);__px(this).removeEventHandler(this.content,"click",this.mouseeventsHandler);__px(this).removeEventHandler(this.content,"dblclick",this.mouseeventsHandler);__px(this).removeEventHandler(this.content,"selectstart",this.mouseeventsHandler);};PXNewsList.prototype.onLoad=function(e){var $d=__px_all(this)[this.header.id];for(var i=0;i<$d.items.length;i++){var $e=$d.items[i];if(!$e.commandName)continue;switch($e.commandName){case this.$y:this.refreshButton=$e;break;case this.$z:this.detailsButton=$e;break;case this.$A:this.dismissButton=$e;break;case this.$B:this.deferButton=$e;var $f=$e.getMenu();if($f)$f.events.addEventHandler("itemClick",this.toolbarMenuClickHandler);$e.commandName="";break;}};$d.events.addEventHandler("buttonClick",this.toolbarClickHandler);this.correctButtons();this.onAfterResize();};PXNewsList.prototype.executeCallback=function($g,$h,$i){this.callbackCmd.name=$g;__px_callback(this).execI(this,this.callbackCmd,$h,this.handler,null,$i);};PXNewsList.prototype.$C=function($j,$a){if(!$j)return;if($j.startsWith("Redirect"))__px_callback(this).processRedirect($j,$a);var $k=(new PXXmlDoc("",$j)).rootNode;if($k.childNodes.length>0){for(var $l=0;$l<$k.childNodes.length;$l++){var $m=$k.childNodes[$l];if(String.compare($m.tagName,"content",true)){this.removeHadlers();__px_cm(this).processHtmlData($m.childNodes[0].nodeValue,this.contentDiv);this.initializeElems();this.addHadlers();this.correctButtons();}}}};PXNewsList.prototype.$G=function(e,$n){if(this.element.offsetWidth)this.executeCallback(this.$y,null,null);};PXNewsList.prototype.$E=function($o,ev){ev.button=new Object();ev.button.commandName=ev.item.commandName;ev.button.commandArgument=ev.item.commandArgument;this.$D(null,ev);};PXNewsList.prototype.$D=function($d,ev){var $p=ev.button.commandName;var $n=null;switch($p){case this.$z:case this.$A:$n=this.activeItem.recID;break;case this.$B:$n=this.activeItem.recID+'|'+ev.button.commandArgument;break;case this.$y:default:break;};this.executeCallback($p,$n);};PXNewsList.prototype.$F=function(e){switch(e.type){case "mousemove":this.tryHighlight(e);break;case "click":case "mousedown":this.$H(e);break;case "dblclick":if(this.$H(e))this.navigateToActiveItem();break;case "selectstart":__px(this).cancelEvent(e);break;}};PXNewsList.prototype.$H=function(e){var $q=this.getHoverElement(e);if($q.recID){if(this.activeItem!=$q){if(this.activeItem)this.clearRow(this.activeItem.elems);this.activeItem=$q;this.activeItem.elems=this.colorRow(this.activeItem,this.activeItem.coll,this.selectedColor);this.correctButtons();};return true;};return false;};PXNewsList.prototype.onAfterResize=function(){if(!this.contentDiv)return;var $r=this.element.offsetHeight;var $s=this.header.offsetWidth;var parent=this.element.parentNode;if(!parent&&String.compare(parent.tagName,"td",true))while(parent){if(String.compare(parent.tagName,"table",true))break;parent=parent.parentNode;};if(parent){$r=parent.offsetHeight;$s=parent.offsetWidth;};$r=$r>this.header.offsetHeight?($r-this.header.offsetHeight):0;this.contentDiv.style.height=$r+"px";this.contentDiv.style.width=$s+"px";};PXNewsList.prototype.navigateToActiveItem=function(){if(this.activeItem)this.executeCallback(this.$z,this.activeItem.recID);};PXNewsList.prototype.tryHighlight=function(e){var $q=this.getHoverElement(e);if($q.recID){this.clearHighlight($q.recID);this.setHighlight($q.recID,$q.coll);}else this.clearHighlight();};PXNewsList.prototype.isActiveItem=function($t){return this.activeItem&&this.activeItem.recID==$t;};PXNewsList.prototype.clearHighlight=function($t){var $q=this.$I;if(!$q||$t&&$q.recID==$t)return;if(!this.isActiveItem($q.recID))this.clearRow($q);this.$I=null;};PXNewsList.prototype.setHighlight=function($t,$q){if(this.$I&&this.$I.recID==$t)return;this.$I=this.colorRow($t,$q,this.isActiveItem($t)?null:this.highlightColor);};PXNewsList.prototype.clearRow=function($q){for(var j=0;j<$q.coll.length;j++){var ae=$q.coll[j];ae.style.backgroundColor=ae.ownColor;if(ae.tagName=="TR"){for(var i=0;i<ae.cells.length;i++){var $u=ae.cells[i];$u.style.backgroundColor=$u.ownColor;}}else if(ae.style)ae.style.backgroundColor=ae.ownColor;}};PXNewsList.prototype.colorRow=function($t,$q,$v){var v=new Object();v.recID=$t;v.coll=new Array();for(var j=0;j<$q.length;j++){var ae=$q[j];if(typeof(ae.ownColor)==="undefined")ae.ownColor=ae.style.backgroundColor;if($v)ae.style.backgroundColor=$v;v.coll.push(ae);if(ae.tagName=="TR"){for(var i=0;i<ae.cells.length;i++){var $u=ae.cells[i];if(typeof($u.ownColor)=="undefined")$u.ownColor=$u.style.backgroundColor;if($v)$u.style.backgroundColor=$v;}}};return v;};PXNewsList.prototype.getHoverElement=function(e){var se=__px(this).eventElem(e);var $q=new Object();$q.recID=null;$q.coll=new Array();while(se&&se!=this.content){if(se.getAttribute&&($q.recID=se.getAttribute("recID"))!=null)break;se=se.parentNode;};for(var i=0;i<this.content.rows.length;i++){var $w=this.content.rows[i];if($w.getAttribute&&$w.getAttribute("recID")==$q.recID)$q.coll.push($w);};return $q;};PXNewsList.prototype.correctButtons=function(){var $x=this.activeItem!=null;if(this.detailsButton)this.detailsButton.setEnabled($x);if(this.dismissButton)this.dismissButton.setEnabled($x);if(this.deferButton)this.deferButton.setEnabled($x);};



function PXNewsCheckerButton($a,$b,$c){this.$E=10;this.$F=0;this.$G=1;this.px_context=$a;this.element=$b;this.ID=$b.id;this.suspendCheck=0;this.callbackCmd=new Object();this.handler=Function.createDelegate(this,this.$H);this.parasiteHander=Function.createDelegate(this,this.$I);__px_cm(this).readProperties(this,$c,PXNewsCheckerButton.properties);this.panelhideeventHandler=Function.createDelegate(this,this.$J);this.mouseeventsHandler=Function.createDelegate(this,this.$K);this.addHadlers();__px(this).addEventHandler(this.element,"mousedown",this.mouseeventsHandler);__px(this).addEventHandler(this.element,"click",this.mouseeventsHandler);__px(this).addEventHandler(this.element,"selectstart",this.mouseeventsHandler);__px_cm(this).registerRequiresOnLoad(this,$b.id);};PXNewsCheckerButton.properties=[["isActive",JSType.Bool,false],["checkFrequency",JSType.Int,60000],["mode",JSType.Int,0],["popupPanel",JSType.String,null],["popupPanelExt",JSType.String,null],["normalStyle",JSType.String,null],["hoverStyle",JSType.String,null],["pushedStyle",JSType.String,null],["handlerUri",JSType.String,null]];PXNewsCheckerButton.prototype.onLoad=function(){this.normalButton();var $d=false;if(__loc(this).href.indexOf("timeStamp")<0)this.startNotify();else{this.attach(true);$d=true;};this.checkState();if(!$d)this.attach();};PXNewsCheckerButton.prototype.addHadlers=function(){if(this.handlersWasAdded)return;__px(this).addEventHandler(this.element,"mouseover",this.mouseeventsHandler);__px(this).addEventHandler(this.element,"mouseout",this.mouseeventsHandler);this.handlersWasAdded=true;};PXNewsCheckerButton.prototype.removeHadlers=function(){if(!this.handlersWasAdded)return;__px(this).removeEventHandler(this.element,"mouseover",this.mouseeventsHandler);__px(this).removeEventHandler(this.element,"mouseout",this.mouseeventsHandler);this.handlersWasAdded=false;};PXNewsCheckerButton.prototype.detach=function(){__px_callback(this).removeHandler(this.parasiteHander);};PXNewsCheckerButton.prototype.attach=function($e){if(this.mode!=this.$G&&$e!=true)return;__px_callback(this).addHandler(this.parasiteHander);};PXNewsCheckerButton.prototype.sync=function(){var $f=this;setTimeout(function(){if(!$f.suspendCheck&&!$f.isActive)$f.executeCallback("Check",null,null);},0);};PXNewsCheckerButton.prototype.hoverButton=function(){this.element.rows[0].cells[0].className=this.oldStyle=this.hoverStyle;};PXNewsCheckerButton.prototype.normalButton=function(){this.element.rows[0].cells[0].className=this.oldStyle=this.normalStyle;};PXNewsCheckerButton.prototype.clearButton=function(){this.element.rows[0].cells[0].className==this.oldStyle;};PXNewsCheckerButton.prototype.startNotify=function(){if(!this.isActive)return;this.removeHadlers();var $g;if(this.suspendPanel||!this.$L(this.popupPanelExt)){var $f=this;var $h;var $i=function($j){if($f.isActive){$f.normalButton();setTimeout(function(){$h($j);},500);}else{$f.stopNotify();$f.clearButton();}};$h=function($j){if($f.isActive){$f.hoverButton();if(++$j<$f.$E)setTimeout(function(){$i($j);},500);}else{$f.stopNotify();$f.clearButton();}};$h(0);}};PXNewsCheckerButton.prototype.stopNotify=function(){this.isActive=false;this.addHadlers();this.checkState();};PXNewsCheckerButton.prototype.checkState=function(){if(this.mode!=this.$F)return;if(this.checkFrequency){var $f=this;setTimeout(function(){if(!$f.suspendCheck&&!$f.isActive)$f.executeCallback("Check",null,null);},this.checkFrequency);}};PXNewsCheckerButton.prototype.executeCallback=function($k,$l,$m){if(this.handlerUri&&String.compare($k,"Check",false)){var $n=new Object();$n.context=null;var $f=this;var $o=function($p,$a){var $q=new PXXmlDoc("",$p);$f.isActive=$q.rootNode?parseInt($q.rootNode.getAttribute("count"))>0:false;$f.startNotify();$f.checkState();};try{this.doCallback(this.handlerUri,null,$o,$n);}catch(ex){}}else{try{this.callbackCmd.name=$k;__px_callback(this).execI(this,this.callbackCmd,$l,this.handler,null,$m,true);}catch(ex){}}};PXNewsCheckerButton.prototype.doCallback=function($r,$s,$t,$a){var $u,e;try{$u=new XMLHttpRequest();}catch(e){try{$u=new ActiveXObject("Microsoft.XMLHTTP");}catch(e){}};var $v=$u;$u.onreadystatechange=function(){if($v.readyState==4){$t($v.responseText,$a);}};$u.open($s?"POST":"GET",$r,true);$u.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8");$u.send($s);};PXNewsCheckerButton.prototype.$H=function($p,$a){if(!$p)return;if($p.startsWith("Redirect"))__px_callback(this).processRedirect($p,$a);var $q=new PXXmlDoc("",$p);var $props=$q.rootNode?$q.rootNode.getAttribute("Props"):null;if($props!=null){eval("$props = "+$props);__px_cm(this).readProperties(this,$props,PXNewsCheckerButton.properties);};this.startNotify();this.checkState();};PXNewsCheckerButton.prototype.$J=function($g,e){this.suspendPanel=true;this.suspendCheck-=1;this.attach();$g.events.removeEventHandler("afterHide",this.panelhideeventHandler);if(this.suspendCheck==0)this.checkState();setTimeout(function(){this.suspendPanel=false;},60000);};PXNewsCheckerButton.prototype.$K=function(e){switch(e.type){case "mouseover":this.hoverButton();break;case "mouseout":this.normalButton();break;case "click":case "mousedown":this.stopNotify();this.element.rows[0].cells[0].className=this.pushedStyle;this.$L(this.popupPanel);break;case "mouseup":this.clearButton();break;case "selectstart":__px(this).cancelEvent(e);break;}};PXNewsCheckerButton.prototype.$L=function($w){var $g;if(!$w||!($g=__px_all(this)[$w]))return false;this.detach();if(!$g.getVisible()){this.suspendCheck+=1;$g.events.addEventHandler("afterHide",this.panelhideeventHandler);$g.show(this);};return true;};PXNewsCheckerButton.prototype.$I=function($a,$x){if($x)return;try{var $y=true;if($a.result){var $z=new PXXmlDoc("",$a.result);var $A=$z.xmlDoc.getElementsByTagName(this.ID);if($A&&$A.length>0){var $B=false;for(var i=0;i<$A.length;i++){var $C=$A[i];if($C.nodeType!=1)continue;var $D=$C.getAttribute("IsActive");if($D&&$D=="1"){$B=true;break;}};$y=false;this.isActive=$B;this.startNotify();}};if($y)this.sync();}catch(e){}};


﻿function PMFormulaEditor($a,$b,$c,$d){PMFormulaEditor.initializeBaseA(this,[$a,$b,$c,$d]);if($c.parameters)this.parameters=$c.parameters.split(",");this.errLabel=this.popupPanel+"_lblValidate";};PMFormulaEditor.__baseType=PXPanelEdit;PMFormulaEditor.prototype.handlePanelShow=function($e,ev){PMFormulaEditor.callBase(this,"handlePanelShow",[$e,ev]);this.PMTranFields=__win(this).__pmTranFields.split(",");this.PMProjectFields=__win(this).__pmProjectFields.split(",");this.PMTaskFields=__win(this).__pmTaskFields.split(",");this.PMAccountGroupFields=__win(this).__pmAccountGroupFields.split(",");this.EPEmployeeFields=__win(this).__pmEmployeeFields.split(",");this.InventoryItemFields=__win(this).__pmInventoryFields.split(",");this.VendorFields=__win(this).__pmVendorFields.split(",");this.CustomerFields=__win(this).__pmCustomerFields.split(",");this.PMBudgetFields=__win(this).__pmBudgetFields.split(",");if(this.text==null){this.tree=__px_all(this)[this.popupPanel+"_cat"];this.text=__px_all(this)[this.popupPanel+"_txt"];this.list=__px(this).elemByID(this.popupPanel+"_lst");var h=Function.createDelegate(this,this.handleNodeSelect);this.tree.events.addEventHandler("afterSelect",h);h=Function.createDelegate(this,this.handleNodeClick);this.tree.events.addEventHandler("nodeClick",h);h=Function.createDelegate(this,this.handleItemClick);__px(this).addEventHandler(this.list,"click",h);__px(this).addEventHandler(this.list,"dblclick",h);};this.text.setValue(this.getValue());this.text.selectOnFocus=true;this.text.focus();this.text.selectOnFocus=false;this.text.trackPosition=__px(this).IsIE;};PMFormulaEditor.prototype.handlePanelHide=function($e,ev){PMFormulaEditor.callBase(this,"handlePanelHide",[$e,ev]);try{var $f=__doc(this).getElementById(this.errLabel);if($f!=null){$f.style.display="none";}}catch(e){};if($e.dialogResult==PXDialogResult.OK){var $g=this.text.getValue();if($g&&!$g.startsWith('='))$g='='+$g;this.updateValue($g);}};PMFormulaEditor.opParameters=["@Rate","@Price"];PMFormulaEditor.opArithmetic=["+","-","*","/","%"];PMFormulaEditor.opComparison=["=","<>","<",">","<=",">="];PMFormulaEditor.opLogical=["And","Not","Or"];PMFormulaEditor.opOther=["False","In","Null","True"];PMFormulaEditor.funConversion=["CBool( x )","CDate( x )","CDbl( x )","CDec( x )","CShort( x )","CSng( x )","CStr( x )","CInt( x )","CLong( x )"];PMFormulaEditor.funAggregates=["Avg( expr )","Count( expr )","First( expr )","Last( expr )","Max( expr )","Min( expr )","Next( expr )","Prev( expr )","Sum( expr )"];PMFormulaEditor.funText=["Format( format, args )","InStr( str, findStr )","InStrRev( str, findStr )","Len( str )","Left( str, length )","LCase( str )","LTrim( str )","PadLeft( str, width, paddingChar )","PadRight( str, width, paddingChar )","Replace( str, oldValue, newValue )","Right( str, length )","RTrim( str )","Trim( str )","UCase( str )","Substring( str, start, length )","Concat( str1, str2, ...)"];PMFormulaEditor.funMath=["Abs( x )","Ceiling( x )","Floor( x )","Max( x, y )","Min( x, y )","Pow( x, pow )","Round( x, decimals )"];PMFormulaEditor.funDateTime=["DateAdd( date, interval, number )","DateDiff( interval, date1, date2 )","DayOfWeek( date )","DayOfYear( date )","Day( date )","DayOrdinal( day )","Hour( date )","Minute( date )","Second( date )","Month( date )","MonthName( date )","Year( date )","Now()","Today()","NowUTC()","TodayUTC()"];PMFormulaEditor.funProgram=["IIf( expr, truePart, falsePart )","IsNull( value, nullValue )","Sum( from, to )","Switch( expr1, value1, expr2, value2, ...)","NullIf( value1, value2 )"];PMFormulaEditor.funApp=["ExtToInt(field, value)","ExtToUI(field, value)","FormatPeriod(period)","FormatPeriod(period, shift)","FormatYear(period)","FormatYear(period, shift)","GetDefExt(field)","GetDefInt(field)","GetDefUI(field)","GetDescription(field, value)","GetDisplayName(field)","GetFormat(field)","GetMask(field)","GetNumberOfPeriods(organizationId, startPeriod, endPeriod)","GetNumberOfPeriods(startPeriod, endPeriod)","GetPeriodEndDate(organizationId,period)","GetPeriodEndDate(period)","GetPeriodDescription(organizationId,period)","GetPeriodDescription(period)","GetPeriodStartDate(organizationId,period)","GetPeriodStartDate(period)","IntToExt(field, value)","IntToUI(field, value)","UIToExt(field, value)","UIToInt(field, value)","ConvertAmountToCurrency(fromCuryID, toCuryID, rateType, effectiveDate, value)"];PMFormulaEditor.prototype.handleNodeSelect=function($h,ev){while(this.list.options.length>0)this.list.remove(0);if(ev.node.value==null)return;var $i=null;switch(parseInt(ev.node.value)){case 1:$i=this.parameters?this.parameters:PMFormulaEditor.opParameters;break;case 11:$i=PMFormulaEditor.opArithmetic;break;case 12:$i=PMFormulaEditor.opLogical;break;case 13:$i=PMFormulaEditor.opComparison;break;case 14:$i=PMFormulaEditor.opOther;break;case 21:$i=PMFormulaEditor.funConversion;break;case 22:$i=PMFormulaEditor.funAggregates;break;case 23:$i=PMFormulaEditor.funText;break;case 24:$i=PMFormulaEditor.funMath;break;case 25:$i=PMFormulaEditor.funDateTime;break;case 26:$i=PMFormulaEditor.funProgram;break;case 27:$i=PMFormulaEditor.funApp;break;case 31:$i=this.PMTranFields;break;case 32:$i=this.PMProjectFields;break;case 33:$i=this.PMTaskFields;break;case 34:$i=this.PMAccountGroupFields;break;case 35:$i=this.EPEmployeeFields;break;case 36:$i=this.InventoryItemFields;break;case 37:$i=this.VendorFields;break;case 38:$i=this.CustomerFields;break;case 39:$i=this.PMBudgetFields;break;};if($i)for(var i=0;i<$i.length;i++)this.addListItem($i[i]);this.text.focus();};PMFormulaEditor.prototype.handleNodeClick=function($h,ev){this.text.focus();};PMFormulaEditor.prototype.addListItem=function($g){var $j=this.list.options;$j[$j.length]=new Option($g,$g,false,false);};PMFormulaEditor.prototype.handleItemClick=function(e){if(e.type=="click"){var $j=__px(this).eventElem(e);if($j)$j.selected=true;return;};var lv=this.list.value,$k=this.tree.selectedNode;if($k&&parseInt($k.value)==27)lv="Report."+lv;this.text.updateValue();var $l=this.text.getSelectedText(),$g=this.text.getValue();var $m=this.text.selStart,$n=this.text.selEnd;if(!$l){$g=$g.substring(0,$m)+lv+$g.substring($m);this.text.setValue($g);$n=$m=$m+lv.length;}else{this.text.setValue($g.substring(0,$m)+$g.substring($m).replace($l,lv));$n=$m+lv.length;};this.text.select($m,$n);};PMFormulaEditor.pnlHeader_ExceptionChange=function($o,$a){try{var $p=$o.split("&");var $q=__doc(this.control).getElementById($p[0]);if($q!=null){$q.style.display="inline-block";$q.innerHTML=($p[1]!="")?$p[1]:$p[2];$q.title=($p[1]!="")?$p[1]:$p[2];$q.style.color=($p[1]=="")?"black":"red";}}catch(e){}};



function CTFormulaInvoiceEditor($a,$b,$c,$d){CTFormulaInvoiceEditor.initializeBaseA(this,[$a,$b,$c,$d]);if($c.parameters)this.parameters=$c.parameters.split(",");this.errLabel=this.popupPanel+"_lblValidate";};CTFormulaInvoiceEditor.__baseType=PXPanelEdit;CTFormulaInvoiceEditor.prototype.handlePanelShow=function($e,ev){CTFormulaInvoiceEditor.callBase(this,"handlePanelShow",[$e,ev]);this.ContractFields=__win(this).__ctContractFields.split(",");this.ContractTemplateFields=__win(this).__ctContractTemplateFields.split(",");this.CustomerFields=__win(this).__ctCustomerFields.split(",");this.LocationFields=__win(this).__ctLocationFields.split(",");this.ContractBillingScheduleFields=__win(this).__ctContractBillingScheduleFields.split(",");this.AccessInfoFields=__win(this).__ctAccessInfoFields.split(",");if(this.text==null){this.tree=__px_all(this)[this.popupPanel+"_cat"];this.text=__px_all(this)[this.popupPanel+"_txt"];this.list=__px(this).elemByID(this.popupPanel+"_lst");var h=Function.createDelegate(this,this.handleNodeSelect);this.tree.events.addEventHandler("afterSelect",h);h=Function.createDelegate(this,this.handleNodeClick);this.tree.events.addEventHandler("nodeClick",h);h=Function.createDelegate(this,this.handleItemClick);__px(this).addEventHandler(this.list,"click",h);__px(this).addEventHandler(this.list,"dblclick",h);};this.text.setValue(this.getValue());this.text.selectOnFocus=true;this.text.focus();this.text.selectOnFocus=false;this.text.trackPosition=__px(this).IsIE;};CTFormulaInvoiceEditor.prototype.$t=function($f){var $g=$f?__px(this).getTextWidth($f,this.elemText.className):0;if(this.elemText.clientWidth>0&&this.element.getAttribute("error")==null)__px(this).setTitle(this.elemText,($g>this.elemText.clientWidth)?$f:null);};CTFormulaInvoiceEditor.prototype.setValue=function(v,$f,$h){if(v!=this.getValue()){this.elemText.value=this.oldValue=v;this.$t(this.getText());}};CTFormulaInvoiceEditor.prototype.handlePanelHide=function($e,ev){CTFormulaInvoiceEditor.callBase(this,"handlePanelHide",[$e,ev]);try{var $i=__doc(this).getElementById(this.errLabel);if($i!=null){$i.style.display="none";}}catch(e){};if($e.dialogResult==PXDialogResult.OK){var $f=this.text.getValue();if($f&&!$f.startsWith('='))$f='='+$f;this.updateValue($f);}};CTFormulaInvoiceEditor.opParameters=["@ActionInvoice"];CTFormulaInvoiceEditor.opArithmetic=["+","-","*","/","%"];CTFormulaInvoiceEditor.opComparison=["=","<>","<",">","<=",">="];CTFormulaInvoiceEditor.opLogical=["And","Not","Or"];CTFormulaInvoiceEditor.opOther=["False","In","Null","True"];CTFormulaInvoiceEditor.funConversion=["CBool( x )","CDate( x )","CDbl( x )","CDec( x )","CShort( x )","CSng( x )","CStr( x )","CInt( x )","CLong( x )"];CTFormulaInvoiceEditor.funAggregates=["Avg( expr )","Count( expr )","First( expr )","Last( expr )","Max( expr )","Min( expr )","Next( expr )","Prev( expr )","Sum( expr )"];CTFormulaInvoiceEditor.funText=["Format( format, args )","InStr( str, findStr )","InStrRev( str, findStr )","Len( str )","Left( str, length )","LCase( str )","LTrim( str )","PadLeft( str, width, paddingChar )","PadRight( str, width, paddingChar )","Replace( str, oldValue, newValue )","Right( str, length )","RTrim( str )","Trim( str )","UCase( str )","Substring( str, start, length )","Concat( str1, str2, ...)"];CTFormulaInvoiceEditor.funMath=["Abs( x )","Ceiling( x )","Floor( x )","Max( x, y )","Min( x, y )","Pow( x, pow )","Round( x, decimals )"];CTFormulaInvoiceEditor.funDateTime=["DateAdd( date, interval, number )","DateDiff( interval, date1, date2 )","DayOfWeek( date )","DayOfYear( date )","Day( date )","DayOrdinal( day )","Hour( date )","Minute( date )","Second( date )","Month( date )","MonthName( date )","Year( date )","Now()","Today()","NowUTC()","TodayUTC()"];CTFormulaInvoiceEditor.funProgram=["IIf( expr, truePart, falsePart )","IsNull( value, nullValue )","Sum( from, to )","Switch( expr1, value1, expr2, value2, ...)","NullIf( value1, value2 )"];CTFormulaInvoiceEditor.funApp=["ExtToInt(field, value)","ExtToUI(field, value)","FormatPeriod(period)","FormatPeriod(period, shift)","FormatYear(period)","FormatYear(period, shift)","GetDefExt(field)","GetDefInt(field)","GetDefUI(field)","GetDescription(field, value)","GetDisplayName(field)","GetFormat(field)","GetMask(field)","GetNumberOfPeriods(organizationId, startPeriod, endPeriod)","GetNumberOfPeriods(startPeriod, endPeriod)","GetPeriodEndDate(organizationId,period)","GetPeriodEndDate(period)","GetPeriodDescription(organizationId,period)","GetPeriodDescription(period)","GetPeriodStartDate(organizationId,period)","GetPeriodStartDate(period)","IntToExt(field, value)","IntToUI(field, value)","UIToExt(field, value)","UIToInt(field, value)"];CTFormulaInvoiceEditor.prototype.handleNodeSelect=function($j,ev){while(this.list.options.length>0)this.list.remove(0);if(ev.node.value==null)return;var $k=null;switch(parseInt(ev.node.value)){case 1:$k=this.parameters?this.parameters:CTFormulaInvoiceEditor.opParameters;break;case 11:$k=CTFormulaInvoiceEditor.opArithmetic;break;case 12:$k=CTFormulaInvoiceEditor.opLogical;break;case 13:$k=CTFormulaInvoiceEditor.opComparison;break;case 14:$k=CTFormulaInvoiceEditor.opOther;break;case 21:$k=CTFormulaInvoiceEditor.funConversion;break;case 22:$k=CTFormulaInvoiceEditor.funAggregates;break;case 23:$k=CTFormulaInvoiceEditor.funText;break;case 24:$k=CTFormulaInvoiceEditor.funMath;break;case 25:$k=CTFormulaInvoiceEditor.funDateTime;break;case 26:$k=CTFormulaInvoiceEditor.funProgram;break;case 27:$k=CTFormulaInvoiceEditor.funApp;break;case 31:$k=this.ContractFields;break;case 32:$k=this.ContractTemplateFields;break;case 33:$k=this.CustomerFields;break;case 34:$k=this.LocationFields;break;case 35:$k=this.ContractBillingScheduleFields;break;case 36:$k=this.AccessInfoFields;break;};if($k)for(var i=0;i<$k.length;i++)this.addListItem($k[i]);this.text.focus();};CTFormulaInvoiceEditor.prototype.handleNodeClick=function($j,ev){this.text.focus();};CTFormulaInvoiceEditor.prototype.addListItem=function($f){var $l=this.list.options;$l[$l.length]=new Option($f,$f,false,false);};CTFormulaInvoiceEditor.prototype.handleItemClick=function(e){if(e.type=="click"){var $l=__px(this).eventElem(e);if($l)$l.selected=true;return;};var lv=this.list.value,$m=this.tree.selectedNode;if($m&&parseInt($m.value)==27)lv="Report."+lv;this.text.updateValue();var $n=this.text.getSelectedText(),$f=this.text.getValue();var $o=this.text.selStart,$p=this.text.selEnd;if(!$n){$f=$f.substring(0,$o)+lv+$f.substring($o);this.text.setValue($f);$p=$o=$o+lv.length;}else{this.text.setValue($f.substring(0,$o)+$f.substring($o).replace($n,lv));$p=$o+lv.length;};this.text.select($o,$p);};CTFormulaInvoiceEditor.pnlHeader_ExceptionChange=function($q,$a){try{var $r=$q.split("&");var $s=__doc(this.control).getElementById($r[0]);if($s!=null){$s.style.display="inline-block";$s.innerHTML=($r[1]!="")?$r[1]:$r[2];$s.title=($r[1]!="")?$r[1]:$r[2];$s.style.color=($r[1]=="")?"black":"red";}}catch(e){}};



function CTFormulaTransactionEditor($a,$b,$c,$d){CTFormulaTransactionEditor.initializeBaseA(this,[$a,$b,$c,$d]);if($c.parameters)this.parameters=$c.parameters.split(",");this.errLabel=this.popupPanel+"_lblValidate";};CTFormulaTransactionEditor.__baseType=PXPanelEdit;CTFormulaTransactionEditor.prototype.handlePanelShow=function($e,ev){CTFormulaTransactionEditor.callBase(this,"handlePanelShow",[$e,ev]);this.ContractFields=__win(this).__ctContractFields.split(",");this.CustomerFields=__win(this).__ctCustomerFields.split(",");this.ContractItemFields=__win(this).__ctContractItemFields.split(",");this.ContractDetailFields=__win(this).__ctContractDetailFields.split(",");this.InventoryItemFields=__win(this).__ctInventoryItemFields.split(",");this.ContractBillingScheduleFields=__win(this).__ctContractBillingScheduleFields.split(",");this.PMTranFields=__win(this).__ctPMTranFields.split(",");this.UsageDataFields=__win(this).__ctUsageDataFields.split(",");this.AccessInfoFields=__win(this).__ctAccessInfoFields.split(",");if(this.text==null){this.tree=__px_all(this)[this.popupPanel+"_cat"];this.text=__px_all(this)[this.popupPanel+"_txt"];this.list=__px(this).elemByID(this.popupPanel+"_lst");var h=Function.createDelegate(this,this.handleNodeSelect);this.tree.events.addEventHandler("afterSelect",h);h=Function.createDelegate(this,this.handleNodeClick);this.tree.events.addEventHandler("nodeClick",h);h=Function.createDelegate(this,this.handleItemClick);__px(this).addEventHandler(this.list,"click",h);__px(this).addEventHandler(this.list,"dblclick",h);};this.text.setValue(this.getValue());this.text.selectOnFocus=true;this.text.focus();this.text.selectOnFocus=false;this.text.trackPosition=__px(this).IsIE;};CTFormulaTransactionEditor.prototype.$t=function($f){var $g=$f?__px(this).getTextWidth($f,this.elemText.className):0;if(this.elemText.clientWidth>0&&this.element.getAttribute("error")==null)__px(this).setTitle(this.elemText,($g>this.elemText.clientWidth)?$f:null);};CTFormulaTransactionEditor.prototype.setValue=function(v,$f,$h){if(v!=this.getValue()){this.elemText.value=this.oldValue=v;this.$t(this.getText());}};CTFormulaTransactionEditor.prototype.handlePanelHide=function($e,ev){CTFormulaTransactionEditor.callBase(this,"handlePanelHide",[$e,ev]);try{var $i=__doc(this).getElementById(this.errLabel);if($i!=null){$i.style.display="none";}}catch(e){};if($e.dialogResult==PXDialogResult.OK){var $f=this.text.getValue();if($f&&!$f.startsWith('='))$f='='+$f;this.updateValue($f);}};CTFormulaTransactionEditor.opParameters=["@ActionItem","@Prefix"];CTFormulaTransactionEditor.opArithmetic=["+","-","*","/","%"];CTFormulaTransactionEditor.opComparison=["=","<>","<",">","<=",">="];CTFormulaTransactionEditor.opLogical=["And","Not","Or"];CTFormulaTransactionEditor.opOther=["False","In","Null","True"];CTFormulaTransactionEditor.funConversion=["CBool( x )","CDate( x )","CDbl( x )","CDec( x )","CShort( x )","CSng( x )","CStr( x )","CInt( x )","CLong( x )"];CTFormulaTransactionEditor.funAggregates=["Avg( expr )","Count( expr )","First( expr )","Last( expr )","Max( expr )","Min( expr )","Next( expr )","Prev( expr )","Sum( expr )"];CTFormulaTransactionEditor.funText=["Format( format, args )","InStr( str, findStr )","InStrRev( str, findStr )","Len( str )","Left( str, length )","LCase( str )","LTrim( str )","PadLeft( str, width, paddingChar )","PadRight( str, width, paddingChar )","Replace( str, oldValue, newValue )","Right( str, length )","RTrim( str )","Trim( str )","UCase( str )","Substring( str, start, length )","Concat( str1, str2, ...)"];CTFormulaTransactionEditor.funMath=["Abs( x )","Ceiling( x )","Floor( x )","Max( x, y )","Min( x, y )","Pow( x, pow )","Round( x, decimals )"];CTFormulaTransactionEditor.funDateTime=["DateAdd( date, interval, number )","DateDiff( interval, date1, date2 )","DayOfWeek( date )","DayOfYear( date )","Day( date )","DayOrdinal( day )","Hour( date )","Minute( date )","Second( date )","Month( date )","MonthName( date )","Year( date )","Now()","Today()","NowUTC()","TodayUTC()"];CTFormulaTransactionEditor.funProgram=["IIf( expr, truePart, falsePart )","IsNull( value, nullValue )","Sum( from, to )","Switch( expr1, value1, expr2, value2, ...)","NullIf( value1, value2 )"];CTFormulaTransactionEditor.funApp=["ExtToInt(field, value)","ExtToUI(field, value)","FormatPeriod(period)","FormatPeriod(period, shift)","FormatYear(period)","FormatYear(period, shift)","GetDefExt(field)","GetDefInt(field)","GetDefUI(field)","GetDescription(field, value)","GetDisplayName(field)","GetFormat(field)","GetMask(field)","GetNumberOfPeriods(organizationId, startPeriod, endPeriod)","GetNumberOfPeriods(startPeriod, endPeriod)","GetPeriodEndDate(organizationId,period)","GetPeriodEndDate(period)","GetPeriodDescription(organizationId,period)","GetPeriodDescription(period)","GetPeriodStartDate(organizationId,period)","GetPeriodStartDate(period)","IntToExt(field, value)","IntToUI(field, value)","UIToExt(field, value)","UIToInt(field, value)"];CTFormulaTransactionEditor.prototype.handleNodeSelect=function($j,ev){while(this.list.options.length>0)this.list.remove(0);if(ev.node.value==null)return;var $k=null;switch(parseInt(ev.node.value)){case 1:$k=this.parameters?this.parameters:CTFormulaTransactionEditor.opParameters;break;case 11:$k=CTFormulaTransactionEditor.opArithmetic;break;case 12:$k=CTFormulaTransactionEditor.opLogical;break;case 13:$k=CTFormulaTransactionEditor.opComparison;break;case 14:$k=CTFormulaTransactionEditor.opOther;break;case 21:$k=CTFormulaTransactionEditor.funConversion;break;case 22:$k=CTFormulaTransactionEditor.funAggregates;break;case 23:$k=CTFormulaTransactionEditor.funText;break;case 24:$k=CTFormulaTransactionEditor.funMath;break;case 25:$k=CTFormulaTransactionEditor.funDateTime;break;case 26:$k=CTFormulaTransactionEditor.funProgram;break;case 27:$k=CTFormulaTransactionEditor.funApp;break;case 31:$k=this.ContractFields;break;case 32:$k=this.CustomerFields;break;case 33:$k=this.ContractItemFields;break;case 34:$k=this.ContractDetailFields;break;case 35:$k=this.InventoryItemFields;break;case 36:$k=this.ContractBillingScheduleFields;break;case 37:$k=this.PMTranFields;break;case 38:$k=this.UsageDataFields;break;case 39:$k=this.AccessInfoFields;break;};if($k)for(var i=0;i<$k.length;i++)this.addListItem($k[i]);this.text.focus();};CTFormulaTransactionEditor.prototype.handleNodeClick=function($j,ev){this.text.focus();};CTFormulaTransactionEditor.prototype.addListItem=function($f){var $l=this.list.options;$l[$l.length]=new Option($f,$f,false,false);};CTFormulaTransactionEditor.prototype.handleItemClick=function(e){if(e.type=="click"){var $l=__px(this).eventElem(e);if($l)$l.selected=true;return;};var lv=this.list.value,$m=this.tree.selectedNode;if($m&&parseInt($m.value)==27)lv="Report."+lv;this.text.updateValue();var $n=this.text.getSelectedText(),$f=this.text.getValue();var $o=this.text.selStart,$p=this.text.selEnd;if(!$n){$f=$f.substring(0,$o)+lv+$f.substring($o);this.text.setValue($f);$p=$o=$o+lv.length;}else{this.text.setValue($f.substring(0,$o)+$f.substring($o).replace($n,lv));$p=$o+lv.length;};this.text.select($o,$p);};CTFormulaTransactionEditor.pnlHeader_ExceptionChange=function($q,$a){try{var $r=$q.split("&");var $s=__doc(this.control).getElementById($r[0]);if($s!=null){$s.style.display="inline-block";$s.innerHTML=($r[1]!="")?$r[1]:$r[2];$s.title=($r[1]!="")?$r[1]:$r[2];$s.style.color=($r[1]=="")?"black":"red";}}catch(e){}};



function PXSchedulePanel($a,$b,$c){this.isIE8=this.getIEVer()==8;this.isLoaded=false;this.isFittedAfterLoad=false;this.resetScrollLeft=false;this.$1U="contID";this.$1V="eventNoteID";this.$1W="regionChange";this.$1X="desc";this.$1Y="DIV";this.$1Z="TABLE";this.$20="ShowRecord";this.$21="RefreshContent";this.$22="DeleteRecord";this.$23="AddRecord";this.$24="UpdateTarget";this.$25="ChangeRegion";this.$26="MoveRegion";this.$27="StartHere";this.$28="NavigateToTarget";this.$29="SearchRecord";this.$2a="SearchNextRecord";this.$2b="SearchPreviousRecord";this.$2c="SearchNextFromHereRecord";this.$2d="SearchPreviousFromHereRecord";this.$2e="TypeRegion";this.$2f="-";this.$2g="$";this.$2h=15;this.$2i='|';this.$2j='<b style="color:red;">';this.$2k=' is busy</b>';this.px_context=$a;this.element=$b;this.ID=$b.id;this.element.style.cursor="auto";this.defaultCursor="auto";var $d=Function.createDelegate(this,this.$2l);__px(this).addEventHandler(__doc(this),"click",$d);this.initializeElems();this.addHandlers();this.initializeResourceElems();this.initializeSelections();this.correctZIndexes();__px_cm(this).registerAutoSize(this,$c);__px_cm(this).registerRequiresOnLoad(this,this.ID);this.setProperties($c);var $e=Function.createDelegate(this,this.$2m);__px_callback(this).addHandler($e);};PXSchedulePanel.properties=[["busyResourceClass",JSType.String,null],["busyResourceHeaderClass",JSType.String,null],["conflictSelectionClass",JSType.String,null],["errorImage",JSType.String,null],["errorImageTooltip",JSType.String,null],["startTicks",JSType.String,"1970-0-0-0-0-0"],["endTicks",JSType.String,"1970-0-0-0-0-0"],["targetTimeErrorClass",JSType.String,"1970-0-0-0-0-0"],["targetStartTicks",JSType.String,"1970-0-0-0-0-0"],["targetEndTicks",JSType.String,1],["addCommandName",JSType.String,null],["deleteCommandName",JSType.String,null],["showDetailsCommandName",JSType.String,null],["refreshCommandName",JSType.String,null],["refreshAfterDetails",JSType.Bool,false],["notdeletableKeys",JSType.String,null],["regionType",JSType.Int,0],["allowUpdate",JSType.Bool,true],["resizerWidth",JSType.Int,2],["autoScroll",JSType.Bool,false],["dateLabel",JSType.String,""],["resources",JSType.Array,null],["callbacks",JSType.Array,PXCallbackManager.commandDesc]];PXSchedulePanel.prototype.initializeResourceElems=function(){this.resourceElems=new Array();if(!this.resources||!this.contentDataDivCont)return;var $f=this.contentDataDivCont.rows;for(var i=0;i<$f.length;i++){var $g=this.getChildElementByTag($f[i].cells[0],this.$1Z).rows[0].cells;for(var j=0;j<$g.length;j++){var $h=$g[j];var $i=$h.getAttribute(this.$1V);if($i){for(var k=0;k<this.resources.length;k++){var $j=this.resources[k];if(!$j.isConflict&&String.compare($j.eventNoteId,$i,true)){var $k=new Object();$k.eventNoteId=$i;$k.start=$j.startTicks;$k.end=$j.endTicks;$k.elem=$h;this.resourceElems.push($k);break;}}}}}};PXSchedulePanel.prototype.initializeElems=function(){this.elemToolBar=__px(this).elemByID(this.ID+"_tlb_container");this.elemToolBarPage=__px(this).elemByID(this.ID+"_tlb_page_form"+"_tlb_page");this.elemToolBarPageButtons=__px(this).elemByID(this.ID+"_tlb_page_buttons");this.elemToolBarEvent=__px(this).elemByID(this.ID+"_tlb_event");this.elemHeader=__px(this).elemByID(this.ID+"_header");this.headerDiv=this.getChildElementByTag(this.elemHeader,this.$1Y);this.headerDivCont=this.getChildElementByTag(this.headerDiv,this.$1Z);this.elemContent=__px(this).elemByID(this.ID+"_cont");this.contentDiv=this.getChildElementByTag(this.elemContent,this.$1Y);this.contentDivCont=this.getChildElementByTag(this.contentDiv,this.$1Z);this.contentDataDiv=__px(this).elemByID(this.ID+"_cont_data_div");this.contentDataDiv.style.zIndex=(this.contentDiv.style.zIndex?parseInt(this.contentDiv.style.zIndex):1000)+1;this.contentDataDivCont=this.getChildElementByTag(this.contentDataDiv,this.$1Z);this.elemLeftHeader=__px(this).elemByID(this.ID+"_leftheader");this.leftHeaderDiv=this.getChildElementByTag(this.elemLeftHeader,this.$1Y);this.leftHeaderDivCont=this.getChildElementByTag(this.leftHeaderDiv,this.$1Z);this.elemLeftContent=__px(this).elemByID(this.ID+"_leftcont");this.leftContentDiv=this.getChildElementByTag(this.elemLeftContent,this.$1Y);this.leftContentDivCont=this.getChildElementByTag(this.leftContentDiv,this.$1Z);};PXSchedulePanel.prototype.addHandlers=function(){if(!this.scrollHandler)this.scrollHandler=Function.createDelegate(this,this.$2n);__px(this).addEventHandler(this.contentDiv,"scroll",this.scrollHandler);var $l=this.getContextmenuHandler();__px(this).addEventHandler(this.elemLeftHeader,"contextmenu",$l);__px(this).addEventHandler(this.elemHeader,"contextmenu",$l);__px(this).addEventHandler(this.elemLeftContent,"contextmenu",$l);__px(this).addEventHandler(this.elemContent,"contextmenu",$l);var $m=this.getMouseeventsHandler();__px(this).addEventHandler(this.element,"mousemove",$m);__px(this).addEventHandler(this.element,"mousedown",$m);__px(this).addEventHandler(this.element,"mouseup",$m);__px(this).addEventHandler(this.element,"mouseout",$m);var $n=this.getCancelEventHandler();__px(this).addEventHandler(this.element,"startselect",$n);__px(this).addEventHandler(this.leftContentDivCont,"startselect",$n);__px(this).addEventHandler(this.contentDivCont,"startselect",$n);__px(this).addEventHandler(this.contentDataDivCont,"startselect",$n);__px(this).addEventHandler(this.headerDivCont,"startselect",$n);var $o=this.getHeaderDBClickHandler();__px(this).addEventHandler(this.headerDiv,"dblclick",$o);if(!this.hideHorizontalSelectionHandler)this.hideHorizontalSelectionHandler=Function.createDelegate(this,this.$2o);__px(this).addEventHandler(this.contentDiv,"mousemove",this.hideHorizontalSelectionHandler);__px(this).addEventHandler(this.contentDataDiv,"mousemove",this.hideHorizontalSelectionHandler);__px(this).addEventHandler(this.leftContentDiv,"mousemove",this.hideHorizontalSelectionHandler);};PXSchedulePanel.prototype.removeHandlers=function(){if(!this.scrollHandler)__px(this).removeEventHandler(this.contentDiv,"scroll",this.scrollHandler);if(!this.contextmenuHandler){__px(this).removeEventHandler(this.elemLeftHeader,"contextmenu",this.contextmenuHandler);__px(this).removeEventHandler(this.elemHeader,"contextmenu",this.contextmenuHandler);__px(this).removeEventHandler(this.elemLeftContent,"contextmenu",this.contextmenuHandler);__px(this).removeEventHandler(this.elemContent,"contextmenu",this.contextmenuHandler);};if(!this.mouseeventsHandler){__px(this).removeEventHandler(this.element,"mousemove",this.mouseeventsHandler);__px(this).removeEventHandler(this.element,"mousedown",this.mouseeventsHandler);__px(this).removeEventHandler(this.element,"mouseup",this.mouseeventsHandler);__px(this).removeEventHandler(this.element,"mouseout",this.mouseeventsHandler);};if(!this.cancelEventHandler){__px(this).removeEventHandler(this.element,"startselect",this.cancelEventHandler);__px(this).removeEventHandler(this.leftContentDivCont,"startselect",this.cancelEventHandler);__px(this).removeEventHandler(this.contentDivCont,"startselect",this.cancelEventHandler);__px(this).removeEventHandler(this.contentDataDivCont,"startselect",this.cancelEventHandler);__px(this).removeEventHandler(this.headerDivCont,"startselect",this.cancelEventHandler);};if(!this.headerDBClickHandler)__px(this).removeEventHandler(this.headerDiv,"dblclick",this.headerDBClickHandler);if(!this.hideHorizontalSelectionHandler){__px(this).removeEventHandler(this.contentDiv,"mousemove",this.hideHorizontalSelectionHandler);__px(this).removeEventHandler(this.contentDataDiv,"mousemove",this.hideHorizontalSelectionHandler);__px(this).removeEventHandler(this.leftContentDiv,"mousemove",this.hideHorizontalSelectionHandler);}};PXSchedulePanel.prototype.initializeSelections=function(){this.fixedHorizontalSelectionDiv=__px(this).elemByID(this.ID+"_fixedhorizontal_selection_div");this.fixedHorizontalSelectionDiv.style.top="0px";this.horizontalSelectionDiv=__px(this).elemByID(this.ID+"_horizontal_selection_div");this.horizontalSelectionDiv.style.top="0px";this.verticalSelectionDiv=__px(this).elemByID(this.ID+"_vertical_selection_div");this.verticalSelectionDiv.style.top="0px";this.verticalResizerDiv=__px(this).elemByID(this.ID+"_vertical_resizer_div");this.verticalResizerDiv.style.top="0px";var $l=this.getContextmenuHandler();__px(this).addEventHandler(this.horizontalSelectionDiv,"contextmenu",$l);__px(this).addEventHandler(this.fixedHorizontalSelectionDiv,"contextmenu",$l);__px(this).addEventHandler(this.verticalSelectionDiv,"contextmenu",$l);var $n=this.getCancelEventHandler();__px(this).addEventHandler(this.horizontalSelectionDiv,"startselect",$n);__px(this).addEventHandler(this.fixedHorizontalSelectionDiv,"startselect",$n);__px(this).addEventHandler(this.verticalSelectionDiv,"startselect",$n);var $p=Function.createDelegate(this,this.$2p);__px(this).addEventHandler(this.horizontalSelectionDiv,"click",$p);__px(this).addEventHandler(this.verticalSelectionDiv,"click",$p);var $q=Function.createDelegate(this,this.$2q);__px(this).addEventHandler(this.horizontalSelectionDiv,"dblclick",$q);__px(this).addEventHandler(this.verticalSelectionDiv,"dblclick",$q);var $o=this.getHeaderDBClickHandler();__px(this).addEventHandler(this.verticalSelectionDiv,"dblclick",$o);var $r=Function.createDelegate(this,this.$2r);__px(this).addEventHandler(this.fixedHorizontalSelectionDiv,"mouseover",$r);var $m=this.getMouseeventsHandler();__px(this).addEventHandler(this.horizontalSelectionDiv,"mousemove",$m);__px(this).addEventHandler(this.verticalSelectionDiv,"mousemove",$m);__px(this).addEventHandler(this.verticalSelectionDiv,"mousedown",$m);__px(this).addEventHandler(this.verticalSelectionDiv,"mouseup",$m);__px(this).addEventHandler(this.verticalResizerDiv,"mousemove",$m);__px(this).addEventHandler(this.verticalResizerDiv,"mousedown",$m);__px(this).addEventHandler(this.verticalResizerDiv,"mouseup",$m);};PXSchedulePanel.prototype.initializeCursors=function(){this.defaultCursor="auto";if(this.allowUpdate){var $s=this.getElemCurrentStyle(this.element);if($s)try{this.defaultCursor=$s.cursor;}catch(ex){}};this.verticalSelectionDiv.style.cursor=this.allowUpdate?"move":"auto";this.verticalResizerDiv.style.cursor=this.allowUpdate?"w-resize":"auto";};PXSchedulePanel.prototype.correctZIndexes=function(){this.fixedHorizontalSelectionDiv.style.zIndex=parseInt(this.contentDataDiv.style.zIndex)+1;this.horizontalSelectionDiv.style.zIndex=parseInt(this.fixedHorizontalSelectionDiv.style.zIndex)+1;this.verticalSelectionDiv.style.zIndex=parseInt(this.horizontalSelectionDiv.style.zIndex)+1;this.verticalResizerDiv.style.zIndex=parseInt(this.verticalSelectionDiv.style.zIndex)+1;var $t=__px(this).elemByID(this.ID+"_menu");$t.style.zIndex=parseInt(this.verticalResizerDiv.style.zIndex)+1;};PXSchedulePanel.prototype.getMouseeventsHandler=function(){if(!this.mouseeventsHandler)this.mouseeventsHandler=Function.createDelegate(this,this.$2l);return this.mouseeventsHandler;};PXSchedulePanel.prototype.getContextmenuHandler=function(){if(!this.contextmenuHandler)this.contextmenuHandler=Function.createDelegate(this,this.$2s);return this.contextmenuHandler;};PXSchedulePanel.prototype.getCancelEventHandler=function(){if(!this.cancelEventHandler)this.cancelEventHandler=Function.createDelegate(this,this.$2t);return this.cancelEventHandler;};PXSchedulePanel.prototype.getHeaderDBClickHandler=function(){if(!this.headerDBClickHandler)this.headerDBClickHandler=Function.createDelegate(this,this.$2u);return this.headerDBClickHandler;};PXSchedulePanel.prototype.executeCallback=function($u,$v){var $a=new Object();$a.id=this.ID;$a.command=$u;var $w;var $x;switch($u){case this.$21:$w=this.callbacks[0];break;case this.$23:$w=this.callbacks[1];break;case this.$22:$w=this.callbacks[2];if(!$v&&this.fixedHorizontalSelectionDiv.refObj)$v=this.fixedHorizontalSelectionDiv.refObj.getAttribute(this.$1U);break;case this.$20:$x=new Object();$x.enabled=true;$x.target=this.ID;$x.command=this.$21;$x.argument=null;$w=this.callbacks[3];this.needScrollToEventAfterRefresh=true;break;case "NextRecord":$w=this.callbacks[4];break;case "PreviousRecord":$w=this.callbacks[5];break;case this.$29:$w=this.callbacks[6];break;case this.$24:$w=this.callbacks[7];break;case this.$2e:$w=this.callbacks[8];break;case this.$28:$w=this.callbacks[9];break;case this.$25:$w=this.callbacks[10];break;case this.$27:$w=this.callbacks[11];break;case this.$2a:$w=this.callbacks[12];break;case this.$2b:$w=this.callbacks[13];break;case this.$2c:$w=this.callbacks[14];break;case this.$2d:$w=this.callbacks[15];break;case this.$26:$w=this.callbacks[16];break;};if($w){$a.info=$w;__px_callback(this).execI(this,$w,$v?$v:"",Function.createDelegate(this,this.$2v),$a,$x);}};PXSchedulePanel.prototype.$2v=function($y,$a){if($y){var $z=__px_all(this)[$a.id];if($z){$z.processRefresh($y);switch($a.info.name){case $z.$29:case $z.$2a:case $z.$2b:case $z.$2c:case $z.$2d:case $z.$28:$z.scrollToEvent();break;}}}};PXSchedulePanel.prototype.$2m=function($a,$A){if(!$A&&String.compare($a.info.name,"ReloadPage",true))this.tryNavigate();};PXSchedulePanel.prototype.tryNavigate=function(){this.executeCallback(this.$28,null);};PXSchedulePanel.prototype.$2u=function(e){var $B=e.target?e.target:e.srcElement;if($B){var he=this.findActionElemByPosition(this.headerDivCont,this.$1W,this.getOffsetElemX(e.clientX)+this.headerDiv.scrollLeft-this.leftHeaderDiv.offsetWidth,this.getOffsetElemY(e.clientY)+this.headerDiv.scrollTop-this.getToolBarHeight(),null);if(he){this.executeCallback(this.$25,he.getAttribute(this.$1W));__px(this).cancelEvent(e);}}};PXSchedulePanel.prototype.$2p=function(e){if(this.horizontalSelectionDiv.offsetHeight!=0&&this.horizontalSelectionDiv.offsetWidth!=0){var x=this.getOffsetElemX(e.clientX);var y=this.getOffsetElemY(e.clientY)-this.headerDiv.offsetHeight-this.getToolBarHeight();if(!this.canBeginVerticalMoving(x,y)&&this.canBeginVerticalLeftResizing(x,y)<0&&this.canBeginVerticalRightResizing(x,y)<0){if(this.horizontalSelectionDiv.refObj==this.fixedHorizontalSelectionDiv.refObj)this.clearFixedHorizontalSelection();else this.copyHorizontalSelection(this.horizontalSelectionDiv,this.fixedHorizontalSelectionDiv);this.syncControlStates();}}};PXSchedulePanel.prototype.$2q=function(e){var $C=this.getSelectedActionElement(e);__px(this).cancelEvent(e);if(!$C)return;var $D=$C.getAttribute(this.$1V);if($D)this.executeCallback(this.$20,$D);};PXSchedulePanel.prototype.$2r=function(e){this.copyHorizontalSelection(this.fixedHorizontalSelectionDiv,this.horizontalSelectionDiv);};PXSchedulePanel.prototype.$2o=function(e){if(e.sender!=this.element)this.clearHorizontalSelection();};PXSchedulePanel.prototype.$2l=function(e){var x=this.getOffsetElemX(e.clientX);var y=this.getOffsetElemY(e.clientY)-this.headerDiv.offsetHeight-this.getToolBarHeight();switch(e.type){case "click":if(this.isMenuActive())this.localMenu.setActive(false);break;case "mousemove":var $E=x<0||x>(this.getGridWidth())||y<0||y>(this.contentDiv.clientHeight);if($E)this.clearHorizontalSelection();else{var $F=null;if(x>this.leftHeaderDiv.offsetWidth)$F=this.findActionElemByPosition(this.contentDataDivCont,this.$1U,x+this.contentDiv.scrollLeft-this.leftHeaderDiv.offsetWidth,y+this.contentDiv.scrollTop,null);else $F=this.findActionElemByPosition(this.leftContentDivCont,this.$1U,x,y+this.leftContentDiv.scrollTop,null);if($F)this.setHorizontalSelection($F);};if(this.isVerSelectionMoving())this.moveVerSelection(x);else{var $G=true;if(this.isResizerMoving()){this.setVerticalResizer(x);$G=false;}else{var $H=-1;if(($H=this.canBeginVerticalLeftResizing(x,y))>0){this.setVerticalResizer($H);$G=false;};if(($H=this.canBeginVerticalRightResizing(x,y))>0){this.setVerticalResizer($H);$G=false;}};if($G){this.tryShowTooltip(x,y);this.clearVerticalResizer();}};break;case "mousedown":if(__px(this).eventButton(e)==0){if(this.canBeginVerticalLeftResizing(x,y)>0)this.beginResizerMoving(true);if(this.canBeginVerticalRightResizing(x,y)>0)this.beginResizerMoving(false);if(this.canBeginVerticalMoving(x,y)>0)this.beginVerSelectionMoving(x);};break;case "mouseup":if(__px(this).eventButton(e)==0){if(this.isResizerMoving())this.resizeVerticalSelection();this.clearVerticalResizer();if(this.isVerSelectionMoving())this.endVerSelectionMoving();};break;case "mouseout":if(e.sender==this.element){this.clearHorizontalSelection();this.clearVerticalResizer();this.endVerSelectionMoving(true);};break;}};PXSchedulePanel.prototype.$2t=function(e){__px(this).cancelEvent(e);};PXSchedulePanel.prototype.onLoad=function(e){this.targetStartElem=__px_all(this)[this.elemToolBarEvent.id+"_target_start"];var $I=Function.createDelegate(this,this.$2w);this.targetStartElem.events.addEventHandler("valueChanged",$I);this.targetStartTimeElem=__px_all(this)[this.elemToolBarEvent.id+"_target_start_time"];if(this.targetStartTimeElem){var $J=Function.createDelegate(this,this.$2x);this.targetStartTimeElem.events.addEventHandler("valueChanged",$J);};this.targetDurationElem=__px_all(this)[this.elemToolBarEvent.id+"_target_duration"];var $K=Function.createDelegate(this,this.$2y);this.targetDurationElem.events.addEventHandler("valueChanged",$K);this.targetEndElem=__px_all(this)[this.elemToolBarEvent.id+"_target_end"];var $L=Function.createDelegate(this,this.$2z);this.targetEndElem.events.addEventHandler("valueChanged",$L);this.targetEndTimeElem=__px_all(this)[this.elemToolBarEvent.id+"_target_end_time"];if(this.targetEndTimeElem){var $M=Function.createDelegate(this,this.$2A);this.targetEndTimeElem.events.addEventHandler("valueChanged",$M);};if(this.elemToolBarPage)this.searchToolBarButtons(this.elemToolBarPage.id);if(this.elemToolBarPageButtons)this.searchToolBarButtons(this.elemToolBarPageButtons.id);if(this.elemToolBarEvent)this.searchToolBarButtons(this.elemToolBarEvent.id);this.isLoaded=true;this.isFittedAfterLoad=false;this.scrollContent();this.showDateLabel();this.tryNavigate();};PXSchedulePanel.prototype.searchToolBarButtons=function($N){var $O=__px_all(this)[$N];if(!$O)return;for(var i=0;i<$O.items.length;i++){var $P=$O.items[i];if($P.autoCallBack)switch($P.autoCallBack.command){case this.$2e:switch($P.autoCallBack.argument){case "Hours":this.hoursRegTypeButton=$P;break;case "Days":this.daysRegTypeButton=$P;break;case "Weeks":this.weeksRegTypeButton=$P;break;case "Months":this.monthsRegTypeButton=$P;break;};case this.$23:this.addToolBarButton=$P;break;case this.$22:this.deleteToolBarButton=$P;break;case this.$29:this.searchToolBarButton=$P;break;case this.$2a:this.searchNextToolBarButton=$P;break;case this.$2b:this.searchPreviousToolBarButton=$P;break;case this.$2c:this.searchNextFromHereToolBarButton=$P;break;case this.$2d:this.searchPreviousFromHereToolBarButton=$P;break;};if($P.key=="date_label")this.dateToolBarLabel=$P;}};PXSchedulePanel.prototype.$2w=function($Q,e){this.OnStartDateChanged();};PXSchedulePanel.prototype.$2x=function($Q,e){this.OnStartDateChanged();};PXSchedulePanel.prototype.OnStartDateChanged=function(){var $R=this.targetStartElem.getValue(true);if($R){var $S=$R.getTime();var $T=0;if(this.targetStartTimeElem){$S=$S-this.getTimeTicksOfDate($R);var $U=this.targetStartTimeElem.getValue(true);if($U)$T=this.getTimeTicksOfDate($U);};this.targetStartTicks=$S+$T;this.targetEndTicks=this.targetStartTicks+this.getDurationTicks();this.updateEndElem();this.correctVerticalSelection();this.performUpdateTargetCallback();}};PXSchedulePanel.prototype.$2y=function($Q,e){var $V=$Q.getValue();this.targetEndTicks=this.targetStartTicks+this.getDurationTicks();this.updateEndElem();this.correctVerticalSelection();this.performUpdateTargetCallback();};PXSchedulePanel.prototype.$2z=function($Q,e){this.OnEndDateChanged();};PXSchedulePanel.prototype.$2A=function($Q,e){this.OnEndDateChanged();};PXSchedulePanel.prototype.OnEndDateChanged=function(){var end=this.targetEndElem.getValue(true);if(end){var $W=end.getTime();var $X=0;if(this.targetEndTimeElem){$W=$W-this.getTimeTicksOfDate(end);var $Y=this.targetEndTimeElem.getValue(true);if($Y)$X=this.getTimeTicksOfDate($Y);};this.targetEndTicks=$W+$X;if(this.targetStartTicks>this.targetEndTicks)this.targetStartTicks=this.targetEndTicks;this.updateDurationElem();this.correctVerticalSelection();this.performUpdateTargetCallback();}};PXSchedulePanel.prototype.$2B=function($Z,ev){var $C=this.getSelectedActionElement(ev);var $D=null;switch(ev.item.commandName){case this.$20:if(!$C)return;$D=$C.getAttribute(this.$1V);break;case this.$22:if(!$C)return;$D=$C.getAttribute(this.$1U);break;case this.$27:this.moveVerSelection(this.getOffsetElemX($Z.openX));$D=this.encodeDateTime(this.targetStartTicks);break;case this.$2c:$D=this.encodeDateTime(this.getSelectedTime($Z.openX));break;case this.$2d:$D=this.encodeDateTime(this.getSelectedTime($Z.openX));break;};this.executeCallback(ev.item.commandName,$D);};PXSchedulePanel.prototype.$2s=function(e){var $Z=this.getLocalMenu();if($Z){var de=__doc(this).documentElement;var $00=de.scrollTop;var $01=de.scrollLeft;$Z.contID=this.horizontalSelectionDiv.refObj?this.horizontalSelectionDiv.refObj.getAttribute(this.$1U):null;var $C=this.getSelectedActionElement(e);var $i=($C&&$C.getAttribute)?$C.getAttribute(this.$1V):null;for(var $02=0;$02<$Z.items.length;$02++){var $03=$Z.items.getItem($02);switch($03.commandName){case this.$20:$03.setEnabled($i?true:false);break;case this.$22:$03.setEnabled(this.allowUpdate&&($Z.contID&&!this.isNotdeletableKey($Z.contID))?true:false);break;case this.$27:$03.setEnabled(this.allowUpdate&&this.getOffsetElemX(e.clientX)>this.leftContentDiv.offsetWidth);break;case this.$23:case this.$29:case this.$2a:case this.$2b:case this.$2c:case this.$2d:$03.setEnabled(this.allowUpdate);break;}};__px(this).cancelEvent(e);$Z.openX=e.clientX;$Z.showAt(e.clientX+$01-2,e.clientY+$00-2);}};PXSchedulePanel.prototype.$2n=function(e){this.scrollContent(e);};PXSchedulePanel.prototype.scrollContent=function(e){var $01=this.contentDiv.scrollLeft;var $00=this.contentDiv.scrollTop;var $04=$01-this.headerDiv.scrollLeft;this.contentDataDiv.scrollLeft=$01;this.headerDiv.scrollLeft=$01;this.contentDataDiv.scrollTop=$00;this.leftContentDiv.scrollTop=$00;this.setVerLeftAndWidth(this.verticalSelectionDiv.realLeft-$04);if(!this.autoScroll)return;var $05=(this.contentDataDiv.offsetWidth-this.contentDataDivCont.offsetWidth)>20?10:0;var $06=($01+this.contentDataDiv.offsetWidth)>=Math.max(this.contentDataDivCont.offsetWidth-$05,0);this.divLeftEdgeTicks=null;this.divLeftEdgeTicks=null;if($06){var $07=(this.totalTicks/this.headerDivCont.offsetWidth)*($01+this.contentDiv.offsetWidth);this.divRightEdgeTicks=this.startTicks+$07;if($01>0&&this.scrollWasMoved){if(e)__px(this).cancelEvent(e);this.executeCallback(this.$26,"forward");}else this.scrollWasMoved=true;}else{var $07=(this.totalTicks/this.headerDivCont.offsetWidth)*$01;this.divLeftEdgeTicks=this.startTicks+$07;if(this.scrollWasMoved&&$01<=$05){if(e)__px(this).cancelEvent(e);this.executeCallback(this.$26,"backward");}else this.scrollWasMoved=true;}};PXSchedulePanel.prototype.isResizerMoving=function(){return this.verticalResizerDiv.isMoving&&this.verticalResizerDiv.offsetHeight>0;};PXSchedulePanel.prototype.beginResizerMoving=function($08){this.verticalResizerDiv.isLeftBoard=$08;this.verticalResizerDiv.isMoving=true;};PXSchedulePanel.prototype.canBeginVerticalLeftResizing=function(x,y){if(!this.allowUpdate)return -1;var $09=y+this.headerDiv.offsetHeight;if($09<0||$09>this.verticalSelectionDiv.offsetHeight)return -1;var $0a=this.resizerWidth/2;if(x>=(this.verticalSelectionDiv.realLeft-$0a)&&x<=(this.verticalSelectionDiv.realLeft+$0a))return this.verticalSelectionDiv.realLeft;return -1;};PXSchedulePanel.prototype.canBeginVerticalRightResizing=function(x,y){if(!this.allowUpdate)return -1;var $09=y+this.headerDiv.offsetHeight;if($09<0||$09>this.verticalSelectionDiv.offsetHeight)return -1;var $0a=this.resizerWidth/2;var $0b=this.verticalSelectionDiv.realLeft+this.verticalSelectionDiv.realWidth;if(x>=($0b-$0a)&&x<=($0b+$0a))return $0b;return -1;};PXSchedulePanel.prototype.isVerSelectionMoving=function(){return this.verticalSelectionDiv.isMoving&&true;};PXSchedulePanel.prototype.endVerSelectionMoving=function($0c){this.verticalSelectionDiv.isMoving=false;this.verticalSelectionDiv.offsetTouch=0;if(!$0c){this.roundTargetTime();if(this.verticalSelectionDiv.startTargetStartTicks!=this.targetStartTicks){this.checkResources();this.performUpdateTargetCallback();}};this.verticalSelectionDiv.startTargetStartTicks=null;};PXSchedulePanel.prototype.performUpdateTargetCallback=function(){this.executeCallback(this.$24,this.encodeDateTime(this.targetStartTicks)+this.$2g+this.encodeDateTime(this.targetEndTicks));};PXSchedulePanel.prototype.beginVerSelectionMoving=function(x){this.clearVerticalResizer();this.verticalSelectionDiv.startTargetStartTicks=this.targetStartTicks;this.verticalSelectionDiv.isMoving=true;this.verticalSelectionDiv.offsetTouch=x-this.verticalSelectionDiv.realLeft;};PXSchedulePanel.prototype.moveVerSelection=function(x){this.setVerLeftAndWidth(x-this.verticalSelectionDiv.offsetTouch);this.updateTargetTime();};PXSchedulePanel.prototype.canBeginVerticalMoving=function(x,y){if(!this.allowUpdate)return -1;var $09=y+this.headerDiv.offsetHeight;if($09<0||$09>this.verticalSelectionDiv.offsetHeight)return false;var $0a=this.resizerWidth/2;var $0b=this.verticalSelectionDiv.realLeft+this.verticalSelectionDiv.realWidth;return x>=(this.verticalSelectionDiv.realLeft+$0a+4)&&x<=($0b-$0a-4);};PXSchedulePanel.prototype.setVerLeftAndWidth=function($0d,$0e){if($0d||$0d==0)this.verticalSelectionDiv.realLeft=$0d;else $0d=this.verticalSelectionDiv.realLeft;if($0e||$0e==0)this.verticalSelectionDiv.realWidth=$0e;else $0e=this.verticalSelectionDiv.realWidth;var $0f=this.leftContentDiv.offsetWidth;var $0g=Math.min(this.getGridWidth(),$0f+this.contentDivCont.offsetWidth-this.contentDiv.scrollLeft);if(($0d+$0e)<$0f||$0d>$0g)this.clearVerticalSelection();else{var $0h=Math.max($0f,$0d);__px(this).setStyleLeft(this.verticalSelectionDiv,$0h);__px(this).setStyleWidth(this.verticalSelectionDiv,Math.min($0g-$0h,$0e-($0h-$0d)));this.verticalSelectionDiv.style.display="";}};PXSchedulePanel.prototype.initializeVerticalSelection=function(){if(!this.isLoaded)return;if(this.totalTicks&&this.totalTicks!=0){var $0i=this.headerDivCont.offsetWidth/this.totalTicks;var $0h=$0i*(this.targetStartTicks-this.startTicks)+this.leftContentDiv.offsetWidth;var $0j=$0i*(this.targetEndTicks-this.targetStartTicks);if($0j>0&&$0j<1)$0j=1;this.setVerLeftAndWidth($0h-this.contentDiv.scrollLeft,$0j);this.updateTargetElems();}else this.clearVerticalSelection();if(!this.isFittedAfterLoad)this.checkResources();this.isFittedAfterLoad=true;};PXSchedulePanel.prototype.scrollToEvent=function(){if(!this.totalTicks||this.totalTicks<=0)return;var $0i=this.headerDivCont.offsetWidth/this.totalTicks;var $0h=$0i*(this.targetStartTicks-this.startTicks)+this.leftContentDiv.offsetWidth;$0h=$0h-this.contentDiv.offsetWidth/2;if($0h>0){this.contentDiv.scrollLeft=$0h;this.scrollContent();}};PXSchedulePanel.prototype.updateTargetElems=function(){this.updateStartElem();this.updateEndElem();this.updateDurationElem();};PXSchedulePanel.prototype.updateStartElem=function(){var $R=new Date();$R.setTime(this.targetStartTicks);if(this.targetStartElem)this.targetStartElem.setValue($R);if(this.targetStartTimeElem)this.targetStartTimeElem.setValue($R);};PXSchedulePanel.prototype.updateEndElem=function(){var end=new Date();end.setTime(this.targetEndTicks);if(this.targetEndElem)this.targetEndElem.setValue(end);if(this.targetEndTimeElem)this.targetEndTimeElem.setValue(end);};PXSchedulePanel.prototype.updateDurationElem=function(){if(this.targetDurationElem){var $0k=Math.floor((this.targetEndTicks-this.targetStartTicks)/1000);var $0l=$0k%60;var $0m=Math.floor($0k/60)%60;var $0n=Math.floor($0k/3600)%24;var $0o=Math.floor(($0k-($0n*3600+$0m*60+$0l))/(24*3600));$0m=($0m<10?" ":"")+$0m;$0n=($0n<10?" ":"")+$0n;$0o=($0o<100?" ":"")+($0o<10?" ":"")+$0o;this.targetDurationElem.setValue($0o+$0n+$0m);}};PXSchedulePanel.prototype.updateTargetTime=function(){var $0i=this.headerDivCont.offsetWidth/this.totalTicks;var $0p=this.verticalSelectionDiv.realLeft-this.leftContentDiv.offsetWidth+this.contentDiv.scrollLeft;this.targetStartTicks=$0p/$0i+this.startTicks;this.targetEndTicks=this.verticalSelectionDiv.realWidth/$0i+this.targetStartTicks;this.updateTargetElems();};PXSchedulePanel.prototype.roundTargetTime=function(){this.targetStartTicks=this.getRoundedTicks(this.targetStartTicks);this.targetEndTicks=this.getRoundedTicks(this.targetEndTicks);this.updateTargetElems();this.initializeVerticalSelection();};PXSchedulePanel.prototype.getRoundedTicks=function($0q){var $0r=new Date();$0r.setTime($0q);var $0m=$0r.getMinutes();$0m=$0m-$0m%this.$2h;$0r=new Date($0r.getFullYear(),$0r.getMonth(),$0r.getDate(),$0r.getHours(),$0m);return $0r.getTime();};PXSchedulePanel.prototype.checkResources=function(){if(!this.isLoaded)return;var $0s=null;if(this.verticalSelectionDiv.style.display!="none"&&this.resourceElems){$0s=new Array();for(var i=0;i<this.resourceElems.length;i++){var $k=this.resourceElems[i];if((this.targetStartTicks>$k.start&&this.targetStartTicks<$k.end)||(this.targetEndTicks>$k.start&&this.targetEndTicks<$k.end)||(this.targetStartTicks<=$k.start&&this.targetEndTicks>=$k.end))$0s.push($k.elem);}};if(!$0s)$0s=new Array();for(var i=0;i<$0s.length;i++){var $h=$0s[i];if(!$h.defaultClassName)$h.defaultClassName=$h.className;$h.className=this.busyResourceClass;};if(this.conflictElems)for(var i=0;i<this.conflictElems.length;i++){var $0t=this.conflictElems[i];if(!Array.contains($0s,$0t))$0t.className=$0t.defaultClassName;};this.conflictElems=$0s;if(this.conflictElems.length>0){if(!this.verticalSelectionDiv.defaultClass)this.verticalSelectionDiv.defaultClass=this.verticalSelectionDiv.className;this.verticalSelectionDiv.className=this.conflictSelectionClass;}else this.verticalSelectionDiv.className=this.verticalSelectionDiv.defaultClass;if(!this.conflictHeaders)this.conflictHeaders=new Array();var $0u=new Array();for(var i=0;i<this.conflictElems.length;i++){var $0v=this.getParentActionElement(this.conflictElems[i],this.$1U);if($0v){var $0w=$0v.getAttribute(this.$1U);if($0w&&!Array.contains($0u,$0w))$0u.push($0w);}};var $0x=new Array();for(var i=0;i<$0u.length;i++){var $0y=this.findActionElement(this.leftContentDiv,this.$1U,$0u[i]);if($0y){var $0z=$0y.cells[1];if(!$0y.defaultClass)$0z.defaultClass=$0z.className;$0z.className=this.busyResourceHeaderClass;if(!Array.contains(this.conflictHeaders,$0y)){var $0A=$0y.cells[0];var $0B=$0A.getElementsByTagName("IMG")[0];$0A.defaultImageUrl=$0B.src;$0A.defaultDescription=$0A.getAttribute(this.$1X);$0B.src=this.errorImage;var $0z=$0y.cells[1];$0A.setAttribute(this.$1X,this.$2j+(__px(this).IsIE?$0z.text:$0z.textContent)+this.$2k);};Array.remove(this.conflictHeaders,$0y);$0x.push($0y);}};for(var i=0;i<this.conflictHeaders.length;i++){var $0y=this.conflictHeaders[i];if($0y.cells.length<2)continue;var $0z=$0y.cells[1];$0z.className=$0z.defaultClass;var $0A=$0y.cells[0];$0A.getElementsByTagName("IMG")[0].src=$0A.defaultImageUrl;$0A.setAttribute(this.$1X,$0A.defaultDescription);};this.conflictHeaders=$0x;};PXSchedulePanel.prototype.clearFixedHorizontalSelection=function(){this.clearSelection(this.fixedHorizontalSelectionDiv);this.fixedHorizontalSelectionDiv.style.top="0px";};PXSchedulePanel.prototype.clearHorizontalSelection=function(){this.clearSelection(this.horizontalSelectionDiv);this.horizontalSelectionDiv.style.top="0px";__px(this).setStyleLeft(this.horizontalSelectionDiv,this.leftContentDiv.offsetLeft);};PXSchedulePanel.prototype.clearVerticalSelection=function(){this.clearSelection(this.verticalSelectionDiv);__px(this).setStyleTop(this.verticalSelectionDiv,this.headerDiv.offsetTop);__px(this).setStyleHeight(this.verticalSelectionDiv,this.getGridClientHeight());this.verticalSelectionDiv.style.left="-1px";this.verticalSelectionDiv.style.width="0px";this.verticalSelectionDiv.isMoving=false;this.verticalSelectionDiv.offsetTouch=0;};PXSchedulePanel.prototype.clearVerticalResizer=function(){this.verticalResizerDiv.style.display="none";this.verticalResizerDiv.style.top="0px";this.verticalResizerDiv.style.height="0px";this.verticalResizerDiv.isMoving=false;};PXSchedulePanel.prototype.setHorizontalSelection=function($0C){this.horizontalSelectionDiv.refObj=$0C;__px(this).setStyleTop(this.horizontalSelectionDiv,$0C.offsetTop-this.contentDiv.scrollTop+this.headerDiv.offsetHeight+this.getToolBarHeight());__px(this).setStyleWidth(this.horizontalSelectionDiv,this.getGridWidth());__px(this).setStyleHeight(this.horizontalSelectionDiv,$0C.offsetHeight);this.horizontalSelectionDiv.style.display="";};PXSchedulePanel.prototype.setVerticalResizer=function(x){__px(this).setStyleLeft(this.verticalResizerDiv,x-(this.resizerWidth/2));__px(this).setStyleTop(this.verticalResizerDiv,this.headerDiv.offsetTop);__px(this).setStyleHeight(this.verticalResizerDiv,this.getGridClientHeight());this.verticalResizerDiv.style.display="";};PXSchedulePanel.prototype.clearSelection=function($0D){$0D.style.display="none";$0D.refObj=null;$0D.style.width="0px";$0D.style.height="0px";};PXSchedulePanel.prototype.isSelectionVisible=function($0E){return $0E.offsetHeight>0&&$0E.offsetWidth>0;};PXSchedulePanel.prototype.resizeVerticalSelection=function(){var $0a=this.resizerWidth/2;if(this.verticalResizerDiv.isLeftBoard){var $0F=this.verticalSelectionDiv.offsetLeft-(this.verticalResizerDiv.offsetLeft+$0a);var $0j=this.verticalSelectionDiv.offsetWidth+$0F;if($0j<0){$0j=0;$0F=-(this.verticalSelectionDiv.offsetWidth);};var $0h=this.verticalSelectionDiv.offsetLeft-$0F;this.setVerLeftAndWidth($0h,$0j);}else{var $0j=this.verticalResizerDiv.offsetLeft+$0a-this.verticalSelectionDiv.offsetLeft;this.setVerLeftAndWidth(null,$0j>0?$0j:0);};this.updateTargetTime();this.roundTargetTime();this.checkResources();this.performUpdateTargetCallback();};PXSchedulePanel.prototype.getGridWidth=function(){return this.leftHeaderDiv.offsetWidth+this.headerDiv.offsetWidth;};PXSchedulePanel.prototype.getToolBarHeight=function(){return this.elemToolBarPage.offsetHeight+this.elemToolBarPageButtons.offsetHeight+this.elemToolBarEvent.offsetHeight;};PXSchedulePanel.prototype.getGridClientHeight=function(){return this.leftHeaderDiv.offsetHeight+this.contentDiv.clientHeight;};PXSchedulePanel.prototype.getOffsetElemX=function($0G,$0H){return $0G-__px(this).getElemLeftPos(this.element)+__doc(this).documentElement.scrollLeft+($0H?__px(this).getElemLeftPos($0H):0);};PXSchedulePanel.prototype.getOffsetElemY=function($0I,$0H){return $0I-__px(this).getElemTopPos(this.element)+__doc(this).documentElement.scrollTop+($0H?__px(this).getElemTopPos($0H):0);};PXSchedulePanel.prototype.isMenuActive=function(e){return this.localMenu&&this.localMenu.getActive();};PXSchedulePanel.prototype.getLocalMenu=function(){if(this.localMenu==null){this.localMenu=PXMenu.createMenuControl(this.ID+"_menu",this.px_context);if(this.localMenu){var h=Function.createDelegate(this,this.$2B);this.localMenu.events.addEventHandler("itemClick",h);}};return this.localMenu;};PXSchedulePanel.prototype.getSelectedActionElement=function(e){if(!this.isSelectionVisible(this.horizontalSelectionDiv))return null;if(this.horizontalSelectionDiv.refObj&&__px(this).contains(this.leftContentDiv,this.horizontalSelectionDiv.refObj))this.horizontalSelectionDiv.refObj=this.findActionElement(this.contentDataDivCont,this.$1U,this.horizontalSelectionDiv.refObj.getAttribute(this.$1U));var he=null;if(e)he=this.findActionElemByPosition(this.horizontalSelectionDiv.refObj,this.$1V,this.getOffsetElemX(e.clientX)+this.contentDataDiv.scrollLeft-this.leftContentDiv.offsetWidth,this.getOffsetElemY(e.clientY)+this.contentDataDiv.scrollTop-this.headerDiv.offsetHeight-this.getToolBarHeight(),null);return he?he:this.horizontalSelectionDiv.refObj;};PXSchedulePanel.prototype.findActionElemsInRegion=function($0J,$0K,$0L,$0M,$0N,$0O,$0P){var $y=new Array();var $0Q=$0J.offsetLeft+$0J.offsetWidth;var $0R=$0J.offsetTop+$0J.offsetHeight;var $0S=($0J.offsetLeft>=$0L&&$0J.offsetLeft<=$0M)||($0Q>=$0L&&$0Q<=$0M)||($0J.offsetLeft<$0L&&$0Q>$0M);var $0T=($0J.offsetTop>=$0N&&$0J.offsetTop<=$0O)||($0R>=$0N&&$0R<=$0O)||($0J.offsetTop<$0N&&$0R>$0O);if(!$0S||!$0T)return null;if($0J.getAttribute&&$0J.getAttribute($0K))$y.push($0J);else{var $0U=$0J.childNodes;if($0U&&$0U.length>0)for(var i=0;i<$0U.length;i++){var $0V=$0U[i];var $0W=$0V.offsetParent?$0V.offsetParent:$0J;var $0X=$0P==$0W?0:$0W.offsetLeft;var $0Y=$0P==$0W?0:$0W.offsetTop;var $0Z=this.findActionElemsInRegion($0V,$0K,$0L-$0X,$0M-$0X,$0N-$0Y,$0O-$0Y,$0W);if($0Z)Array.addRange($y,$0Z);}};return $y;};PXSchedulePanel.prototype.findActionElemByPosition=function($0J,$0K,$0L,$0N,$0P){if($0L<$0J.offsetLeft||$0N<$0J.offsetTop||$0L>($0J.offsetLeft+$0J.offsetWidth)||$0N>($0J.offsetTop+$0J.offsetHeight))return null;var $y=($0J.getAttribute&&$0J.getAttribute($0K))?$0J:null;var $0U=$0J.childNodes;if($0U&&$0U.length>0)for(var i=0;i<$0U.length;i++){var $0V=$0U[i];var $0W=$0V.offsetParent?$0V.offsetParent:$0J;var $0X=$0P==$0W?0:$0W.offsetLeft;var $0Y=$0P==$0W?0:$0W.offsetTop;var $0Z=this.findActionElemByPosition($0V,$0K,$0L-$0X,$0N-$0Y,$0W);if($0Z)$y=$0Z;};return $y;};PXSchedulePanel.prototype.findActionElement=function($0J,$0K,$0w){if($0J.getAttribute){var $10=$0J.getAttribute($0K);if($10&&$10==$0w)return $0J;};var $0U=$0J.childNodes;if($0U&&$0U.length>0)for(var i=0;i<$0U.length;i++){var $y=this.findActionElement($0U[i],$0K,$0w);if($y)return $y;};return null;};PXSchedulePanel.prototype.getActionElement=function(e,$0K){return this.getParentActionElement(__px(this).eventElem(e),$0K);};PXSchedulePanel.prototype.getParentActionElement=function(se,$0K){var $y=null;while(se&&se!=this.elem){if(se.getAttribute&&se.getAttribute($0K)!=null){$y=se;break;};se=se.parentNode;};return $y;};PXSchedulePanel.prototype.getElemCurrentStyle=function($b){return $b.currentStyle?$b.currentStyle:__win(this).getComputedStyle($b,null);};PXSchedulePanel.prototype.clearSelections=function(){this.clearFixedHorizontalSelection();this.clearHorizontalSelection();this.clearVerticalSelection();this.clearVerticalResizer();};PXSchedulePanel.prototype.copyHorizontalSelection=function($11,$0C){__px(this).setStyleLeft($0C,$11.offsetLeft);__px(this).setStyleTop($0C,$11.offsetTop);__px(this).setStyleHeight($0C,$11.offsetHeight);__px(this).setStyleWidth($0C,$11.offsetWidth);$0C.style.display=$11.style.display;$0C.refObj=$11.refObj;};PXSchedulePanel.prototype.syncColumnWidths=function($0e){if(!this.isLoaded)return;var $12=this.headerDivCont.rows;var $13=this.contentDivCont.rows;if($13.length<1||$12.length<1)return;var $14=$12[$12.length-1].cells;if($14.length<1)return;this.headerDivCont.style.overflow="";this.headerDivCont.style.tableLayout="auto";this.headerDivCont.style.width="0px";var $15=$14[0].offsetWidth;for(var i=0;i<$14.length;i++){var $16=$14[i];if($15<$16.offsetWidth)$15=$16.offsetWidth;};var $17=Math.max($15*$14.length,$0e);var $18=0;for(var i=0;i<$14.length;i++){var $19=$14[i].colSpan;$18=$18+($19>0?$19:1);};$15=$17/$18;this.headerDivCont.style.tableLayout="fixed";this.headerDivCont.style.overflow="hidden";var $1a=2*this.headerDivCont.cellPadding;__px(this).setStyleWidth(this.headerDivCont,$17);for(var i=0;i<$12.length;i++){var $1b=$12[i];__px(this).setStyleWidth($1b,$17);for(var j=0;j<$1b.cells.length;j++){var $h=$1b.cells[j];__px(this).setStyleWidth($h,$15*$h.colSpan-$1a);}};var $1c=$13[0];var $1d=$17/$1c.cells.length;var $1e=2*this.contentDivCont.cellPadding;__px(this).setStyleWidth(this.contentDivCont,$17);__px(this).setStyleWidth($1c,$17);var $1f=$1d-$1e;for(var j=0;j<$1c.cells.length;j++){var $h=$1c.cells[j];__px(this).setStyleWidth($h,$1f);};__px(this).setStyleWidth(this.contentDataDivCont,$17);};PXSchedulePanel.prototype.syncColumnHeights=function($1g){if(!this.isLoaded)return;__px(this).setStyleHeight(this.contentDivCont,$1g);__px(this).setStyleHeight(this.contentDataDivCont,$1g);var $1h=this.leftContentDivCont.rows;var $13=this.contentDivCont.rows;var $1i=this.contentDataDivCont.rows;if($13.length==$1h.length&&$1i.length==$1h.length)for(var i=0;i<$13.length;i++){var $1j=$1h[i].offsetHeight;var $F=$13[i];__px(this).setStyleHeight($F,$1j);__px(this).setStyleHeight($F.cells[0],$1j);var $1k=$1i[i];__px(this).setStyleHeight($1k,$1j);__px(this).setStyleHeight($1k.cells[0],$1j);}};PXSchedulePanel.prototype.getChildElementByTag=function($1l,$1m){if($1l&&$1l.childNodes){for(var i=0;i<$1l.childNodes.length;i++){var $1n=$1l.childNodes[i];if($1n&&String.compare($1n.tagName,$1m,true))return $1n;}};return null;};PXSchedulePanel.prototype.syncControlStates=function(){if(this.hoursRegTypeButton)this.hoursRegTypeButton.setPushed(this.regionType=="0");if(this.daysRegTypeButton)this.daysRegTypeButton.setPushed(this.regionType=="1");if(this.weeksRegTypeButton)this.weeksRegTypeButton.setPushed(this.regionType=="2");if(this.monthsRegTypeButton)this.monthsRegTypeButton.setPushed(this.regionType=="3");var $1o=this.fixedHorizontalSelectionDiv.refObj;var $1p=false;if($1o&&this.allowUpdate){$1p=true;var $1q=$1o.getAttribute?$1o.getAttribute(this.$1U):null;if(this.isNotdeletableKey($1q))$1p=false;};if(this.deleteToolBarButton)this.deleteToolBarButton.setEnabled($1p);if(this.addToolBarButton)this.addToolBarButton.setEnabled(this.allowUpdate);if(this.searchToolBarButton)this.searchToolBarButton.setEnabled(this.allowUpdate);if(this.searchNextToolBarButton)this.searchNextToolBarButton.setEnabled(this.allowUpdate);if(this.searchPreviousToolBarButton)this.searchPreviousToolBarButton.setEnabled(this.allowUpdate);if(this.searchNextFromHereToolBarButton)this.searchNextFromHereToolBarButton.setEnabled(this.allowUpdate);if(this.searchPreviousFromHereToolBarButton)this.searchPreviousFromHereToolBarButton.setEnabled(this.allowUpdate);if(this.targetStartElem)this.targetStartElem.setEnabled(this.allowUpdate);if(this.targetStartTimeElem)this.targetStartTimeElem.setEnabled(this.allowUpdate);if(this.targetEndElem)this.targetEndElem.setEnabled(this.allowUpdate);if(this.targetEndTimeElem)this.targetEndTimeElem.setEnabled(this.allowUpdate);if(this.targetDurationElem)this.targetDurationElem.setEnabled(this.allowUpdate);};PXSchedulePanel.prototype.isNotdeletableKey=function($1q){if($1q&&this.notdeletableKeys)for(var i=0;i<this.notdeletableKeys.length;i++)if($1q==this.notdeletableKeys[i])return true;return false;};PXSchedulePanel.prototype.encodeDateTime=function($1r){var $1s=new Date();$1s.setTime($1r);return $1s.getFullYear()+this.$2f+$1s.getMonth()+this.$2f+$1s.getDate()+this.$2f+$1s.getHours()+this.$2f+$1s.getMinutes()+this.$2f+$1s.getSeconds();};PXSchedulePanel.prototype.decodeDateTime=function($1t){var $1u=$1t.split(this.$2f);return(new Date(parseInt($1u[0]),parseInt($1u[1]),parseInt($1u[2]),parseInt($1u[3]),parseInt($1u[4]),parseInt($1u[5]))).getTime();};PXSchedulePanel.prototype.correctVerticalSelection=function(){this.initializeVerticalSelection();this.checkResources();};PXSchedulePanel.prototype.showTooltip=function($1v,x,y){var he;if(__px(this).contains(this.leftContentDiv,$1v))he=this.findActionElemByPosition($1v,this.$1X,x,y);else he=this.findActionElemByPosition($1v,this.$1X,x+this.contentDataDiv.scrollLeft-this.leftContentDiv.offsetWidth,y+this.contentDataDiv.scrollTop,null);var $1w;if(he&&($1w=he.getAttribute(this.$1X)))px_tm.showTooltip($1w,0,5000,x+__px(this).getElemLeftPos(this.element),y+__px(this).getElemTopPos(this.element)+this.headerDiv.offsetHeight+this.getToolBarHeight(),true);};PXSchedulePanel.prototype.tryShowTooltip=function(x,y){if(this.showTooltipPointer)clearTimeout(this.showTooltipPointer);var $1x=this;var $1v=this.horizontalSelectionDiv.refObj;if($1v)this.showTooltipPointer=setTimeout(function(){$1x.showTooltip($1v,x,y);},500);};PXSchedulePanel.prototype.getDurationTicks=function(){var $V=this.targetDurationElem.getValue();return(parseInt($V.substring(0,3))*86400+parseInt($V.substring(3,5))*3600+parseInt($V.substring(5,7))*60)*1000;};PXSchedulePanel.prototype.setHeight=function($1g){this.clearSelections();this.correctHeight();};PXSchedulePanel.prototype.onAfterResize=function(){this.recalcElemSizes();this.calculateScaleParameters();if(this.contentDiv.scrollLeft<10)this.contentDiv.scrollLeft=10;};PXSchedulePanel.prototype.recalcElemSizes=function($1y,$1z){if(!this.isLoaded)return;this.correctWidth($1y);this.correctHeight($1y);this.correctWidth(false);this.clearSelections();if(!$1z)this.initializeVerticalSelection();this.syncControlStates();};PXSchedulePanel.prototype.correctHeight=function($1y){var parent=this.element.parentNode;var $1j=-1;if(parent)$1j=this.element.parentNode.clientHeight-this.getPadding(parent)-1;__px(this).setStyleHeight(this.element,$1j);if($1y||typeof(this.totalHeight)==="undefined"||this.totalHeight!=$1j)this.totalHeight=this.setElemHeights($1j);__px(this).setStyleHeight(this.contentDataDiv,this.contentDiv.clientHeight);};PXSchedulePanel.prototype.setElemHeights=function($1g){var $1A=this.getToolBarHeight();__px(this).setStyleHeight(this.elemToolBar,$1A);var $1B=this.headerDivCont.offsetHeight;__px(this).setStyleHeight(this.headerDiv,$1B);__px(this).setStyleHeight(this.elemHeader,$1B);__px(this).setStyleHeight(this.leftHeaderDiv,$1B);__px(this).setStyleHeight(this.leftHeaderDivCont,$1B);__px(this).setStyleHeight(this.elemLeftHeader,$1B);__px(this).setStyleTop(this.contentDataDiv,this.contentDiv.offsetTop);var $1C=$1A+$1B+1;var $1j=$1g-$1C;if($1j<0)$1j=0;this.syncColumnHeights(this.leftContentDivCont.offsetHeight);__px(this).setStyleHeight(this.contentDiv,$1j);__px(this).setStyleHeight(this.elemContent,$1j);__px(this).setStyleHeight(this.leftContentDiv,$1j);__px(this).setStyleHeight(this.elemLeftContent,$1j);return Math.max($1C,$1g);};PXSchedulePanel.prototype.correctWidth=function($1y){var parent=this.element.parentNode;var $0j=-1;if(parent)$0j=this.element.parentNode.clientWidth-this.getPadding(parent)-1;__px(this).setStyleWidth(this.element,$0j);if($1y||typeof(this.totalWidth)==="undefined"||this.totalWidth!=$0j)this.totalWidth=this.setElemWidths($0j);};PXSchedulePanel.prototype.setElemWidths=function($0e){__px(this).setStyleWidth(this.elemToolBar,$0e);var $1D=Math.max(this.leftContentDivCont.offsetWidth,20);__px(this).setStyleWidth(this.leftHeaderDiv,$1D);__px(this).setStyleWidth(this.elemLeftHeader,$1D);__px(this).setStyleWidth(this.leftContentDiv,$1D);__px(this).setStyleWidth(this.elemLeftContent,$1D);__px(this).setStyleLeft(this.contentDataDiv,this.contentDiv.offsetLeft);var $1E=$0e-$1D;__px(this).setStyleWidth(this.contentDiv,$1E);var $1F=this.contentDiv.clientWidth;__px(this).setStyleWidth(this.headerDiv,$1F);__px(this).setStyleWidth(this.elemHeader,$1E);__px(this).setStyleWidth(this.contentDataDiv,$1F);__px(this).setStyleWidth(this.elemContent,$1E);this.syncColumnWidths(this.contentDiv.clientWidth);return $0e;};PXSchedulePanel.prototype.getPadding=function($1l){if($1l&&String.compare($1l.tagName,"td",true)){var parent=$1l;while(parent){if(String.compare(parent.tagName,"table",true))return 2*parent.cellPadding;parent=parent.parentNode;}};return 0;};PXSchedulePanel.prototype.processRefresh=function($1t){var $1G=new PXXmlDoc("",$1t);var $props=$1G.rootNode.getAttribute("Props");if($props!=null){eval("$props = "+$props);this.setProperties($props);};this.repaint($1G);if(this.needScrollToEventAfterRefresh)this.scrollToEvent();};PXSchedulePanel.prototype.setProperties=function($c){var $1H=this.regionType;__px_cm(this).readProperties(this,$c,PXSchedulePanel.properties);this.resetScrollLeft=$1H!=this.regionType;this.targetStartTicks=this.decodeDateTime(this.targetStartTicks);this.targetEndTicks=this.decodeDateTime(this.targetEndTicks);this.startTicks=this.decodeDateTime(this.startTicks);this.endTicks=this.decodeDateTime(this.endTicks);this.totalTicks=this.endTicks-this.startTicks;if(this.resources){for(var i=0;i<this.resources.length;i++){var $j=this.resources[i];$j.startTicks=this.decodeDateTime($j.encodedStartDate);$j.endTicks=this.decodeDateTime($j.encodedEndDate);$j.eventNoteId="";if($j.keys){for(var j=0;j<$j.keys.length;j++)$j.eventNoteId+=$j.keys[j];}}};if(this.notdeletableKeys)this.notdeletableKeys=this.notdeletableKeys.split(this.$2i);this.syncControlStates();this.initializeCursors();};PXSchedulePanel.prototype.showDateLabel=function(){if(this.dateToolBarLabel)this.dateToolBarLabel.setInnerHTML("<b style=\"width:100%\">"+this.dateLabel+"</b>");};PXSchedulePanel.prototype.repaint=function($1G){if(!$1G.xmlDoc)$1G=new PXXmlDoc("",$1G);var $1I=$1G.xmlDoc.getElementsByTagName("Controls")[0];if(!$1I)return;var $1J=-1;if(this.element.parentNode)$1J=this.element.parentNode.offsetWidth;this.isLoaded=false;this.removeHandlers();var $1K=this.contentDiv.scrollLeft;var $1L=this.contentDiv.scrollTop;for(var i=0;i<$1I.childNodes.length;i++){var $1M=$1I.childNodes[i];var id=$1M.getAttribute("ID");var $b=__px_all(this)[id];if($b||($b=__px(this).elemByID(id))){var $1N=$1M.getAttribute("Value");if($1N){if($b.setValue)$b.setValue($1N);}else{var $1O=$1M.getElementsByTagName("Value")[0];if($1O){if(String.compare(this.contentDiv.id,id,true)||String.compare(this.contentDataDiv.id,id,true)||String.compare(this.headerDiv.id,id,true))this.scrollWasMoved=false;$b.innerHTML=__px(this).IsIE?$1O.text:$1O.textContent;}}}};this.initializeElems();this.initializeResourceElems();this.correctZIndexes();var $1P=this.element.parentNode.style.display!="none";if($1P){this.showDateLabel();this.setElemHeights(this.element.offsetHeight+1);if(this.element.parentNode)this.element.parentNode.style.width=$1J;};this.isLoaded=true;this.isFittedAfterLoad=false;if($1P){this.recalcElemSizes(true,true);if(!this.resetScrollLeft){if(this.divLeftEdgeTicks){$1K=(this.headerDivCont.offsetWidth/this.totalTicks)*(this.divLeftEdgeTicks-this.startTicks);this.divLeftEdgeTicks=null;};if(this.divRightEdgeTicks){$1K=(this.headerDivCont.offsetWidth/this.totalTicks)*(this.divRightEdgeTicks-this.startTicks)-this.contentDiv.offsetWidth;this.divRightEdgeTicks=null;};this.contentDiv.scrollLeft=$1K;this.headerDiv.scrollLeft=$1K;this.contentDataDiv.scrollLeft=$1K;};this.contentDiv.scrollTop=$1L;this.leftContentDiv.scrollTop=$1L;this.contentDataDiv.scrollTop=$1L;this.correctVerticalSelection();};this.addHandlers();};PXSchedulePanel.prototype.getIEVer=function(){var $1Q=navigator.userAgent.toLowerCase();var $1R=$1Q.indexOf("msie");if($1R>-1)return parseInt($1Q.substr($1R+5,1));return 0;};PXSchedulePanel.prototype.getSelectedTime=function(x){var $0i=this.totalTicks/this.headerDivCont.offsetWidth;var $0p=this.getOffsetElemX(x)-this.leftContentDiv.offsetWidth+this.headerDivCont.scrollLeft;return $0p*$0i+this.startTicks;};PXSchedulePanel.prototype.getTimeTicksOfDate=function($1s){return($1s.getHours()*3600-$1s.getMinutes()*60-$1s.getSeconds())*1000;};PXSchedulePanel.prototype.generateContentDataTable=function($0e,$1g){if(!this.resources)return;var $y="<table ";this.appendWidthAndHeight($y,$0e,$1g);$y+=" >";if(this.resources.length>0){for(var i=0;i<this.resources.length;i++){var $1S=this.resources[i];$y+="<tr><td";if($1S.eventNoteId)$y=$y.concat(" eventNoteId=\"", currentRes.eventNoteId, "\"");this.appendWidthAndHeight($y,$0e,$1g);$y+=" ></td></tr>";}}else $y+="<tr><td>&nbsp;</td></tr>";$y+="</table>";return $y;};PXSchedulePanel.prototype.appendWidthAndHeight=function($1T,$0e,$1g){$1T=$1T.concat(" width=\"", width, "px\" height=\"", height, "px\"");};PXSchedulePanel.prototype.calculateScaleParameters=function(){};PXSchedulePanel.prototype.calculateScaleParameters=function(){this.alpha=this.headerDivCont.offsetWidth/this.totalTicks;this.betta=this.leftContentDiv.offsetWidth;};



function RMFormulaEditor($a,$b,$c,$d){RMFormulaEditor.initializeBaseA(this,[$a,$b,$c,$d]);if($c.parameters)this.parameters=$c.parameters.split(",");this.errLabel=this.popupPanel+"_lblValidate";};RMFormulaEditor.__baseType=PXPanelEdit;RMFormulaEditor.prototype.handlePanelShow=function($e,ev){if(!__px(this).isVisible(this.element))return;RMFormulaEditor.callBase(this,"handlePanelShow",[$e,ev]);if(this.text==null){var h=Function.createDelegate(this,this.handleItemClick);if(this.sourceID){var $f=__px_all(this)[this.sourceID];if($f.list){this.list=$f.list;this.tree=$f.tree;this.text=$f.text;}else{$f.tree=this.tree=__px_all(this)[this.popupPanel+"_cat"];$f.text=this.text=__px_all(this)[this.popupPanel+"_txt"];$f.list=this.list=__px(this).elemByID(this.popupPanel+"_lst");__px(this).addEventHandler(this.list,"click",h);__px(this).addEventHandler(this.list,"dblclick",h);}};h=Function.createDelegate(this,this.handleNodeSelect);this.tree.events.addEventHandler("afterSelect",h);h=Function.createDelegate(this,this.handleNodeClick);this.tree.events.addEventHandler("nodeClick",h);};this.text.setValue(this.getValue());this.text.selectOnFocus=true;this.text.focus();this.text.selectOnFocus=false;this.text.trackPosition=__px(this).IsIE;};RMFormulaEditor.prototype.handlePanelHide=function($e,ev){if(!__px(this).isVisible(this.element))return;RMFormulaEditor.callBase(this,"handlePanelHide",[$e,ev]);try{var $g=__doc(this).getElementById(this.errLabel);if($g!=null){$g.style.visibility="hidden";}}catch(e){};if($e.dialogResult==PXDialogResult.OK){var $h=this.text.getValue();if($h&&!$h.startsWith('='))$h='='+$h;this.updateValue($h);}};RMFormulaEditor.opGlobals=["[PageCount]","[PageIndex]","[PageOf]"];RMFormulaEditor.opParameters=["@AccountCode","@AccountDescr","@BaseRowCode","@BookCode","@BranchName","@ColumnCode","@ColumnIndex","@ColumnSetCode","@ColumnText","@EndAccount","@EndAccountGroup","@EndBranch","@EndPeriod","@EndProject","@EndProjectTask","@EndSub","@StartAccount","@StartAccountGroup","@StartBranch","@StartPeriod","@StartProject","@StartProjectTask","@StartSub","@RowCode","@RowIndex","@RowSetCode","@RowText","@UnitCode","@UnitSetCode","@UnitText"];RMFormulaEditor.opArithmetic=["+","-","*","/","%"];RMFormulaEditor.opComparison=["=","<>","<",">","<=",">="];RMFormulaEditor.opLogical=["And","Not","Or"];RMFormulaEditor.opOther=["False","In","Null","True"];RMFormulaEditor.funConversion=["CBool( x )","CDate( x )","CDbl( x )","CDec( x )","CShort( x )","CSng( x )","CStr( x )","CInt( x )","CLong( x )"];RMFormulaEditor.funAggregates=["Avg( expr )","Count( expr )","First( expr )","Last( expr )","Max( expr )","Min( expr )","Next( expr )","Prev( expr )","Sum( expr )"];RMFormulaEditor.funText=["Format( format, args )","InStr( str, findStr )","InStrRev( str, findStr )","Len( str )","Left( str, length )","LCase( str )","LTrim( str )","PadLeft( str, width, paddingChar )","PadRight( str, width, paddingChar )","Replace( str, oldValue, newValue )","Right( str, length )","RTrim( str )","Trim( str )","UCase( str )","Substring( str, start, length )","Concat( str1, str2, ...)"];RMFormulaEditor.funMath=["Abs( x )","Ceiling( x )","Floor( x )","Max( x, y )","Min( x, y )","Pow( x, pow )","Round( x, decimals )"];RMFormulaEditor.funDateTime=["DateAdd( date, interval, number )","DateDiff( interval, date1, date2 )","Day( date )","DayOfWeek( date )","DayOfYear( date )","DayOrdinal( day )","Hour( date )","Minute( date )","Second( date )","Month( date )","MonthName( date )","Year( date )","Now()","Today()","NowUTC()","TodayUTC()"];RMFormulaEditor.funProgram=["IIf( expr, truePart, falsePart )","IsNull( value, nullValue )","Sort( from, to, column )","SortD( from, to, column )","Sum( from, to )","Switch( expr1, value1, expr2, value2, ...)","NullIf( value1, value2 )","Value( row , column )","RoundingDiff(from, to)"];RMFormulaEditor.funApp=["ExtToInt(field, value)","ExtToUI(field, value)","FormatPeriod(period)","FormatPeriod(period, shift)","FormatPeriod(period, shiftYear, shiftPeriod)","FormatYear(period)","FormatYear(period, shift)","GetBranchText(branchName)","GetDefExt(field)","GetDefInt(field)","GetDefUI(field)","GetDescription(field, value)","GetDisplayName(field)","GetFormat(field)","GetMask(field)","GetNumberOfPeriods(organizationId, startPeriod, endPeriod)","GetNumberOfPeriods(startPeriod, endPeriod)","GetPeriodEndDate(organizationId,period)","GetPeriodEndDate(period)","GetPeriodDescription(organizationId,period)","GetPeriodDescription(period)","GetPeriodStartDate(organizationId,period)","GetPeriodStartDate(period)","IntToExt(field, value)","IntToUI(field, value)","UIToExt(field, value)","UIToInt(field, value)"];RMFormulaEditor.prototype.handleNodeSelect=function($i,ev){while(this.list.options.length>0)this.list.remove(0);if(ev.node.value==null)return;var $j=null;switch(parseInt(ev.node.value)){case 0:$j=RMFormulaEditor.opGlobals;break;case 1:$j=this.parameters?this.parameters:RMFormulaEditor.opParameters;break;case 11:$j=RMFormulaEditor.opArithmetic;break;case 12:$j=RMFormulaEditor.opLogical;break;case 13:$j=RMFormulaEditor.opComparison;break;case 14:$j=RMFormulaEditor.opOther;break;case 21:$j=RMFormulaEditor.funConversion;break;case 22:$j=RMFormulaEditor.funText;break;case 23:$j=RMFormulaEditor.funMath;break;case 24:$j=RMFormulaEditor.funDateTime;break;case 25:$j=RMFormulaEditor.funProgram;break;case 26:$j=RMFormulaEditor.funApp;break;};if($j)for(var i=0;i<$j.length;i++)this.addListItem($j[i]);this.text.focus();};RMFormulaEditor.prototype.handleNodeClick=function($i,ev){this.text.focus();};RMFormulaEditor.prototype.addListItem=function($h){var $k=this.list.options;$k[$k.length]=new Option($h,$h,false,false);};RMFormulaEditor.prototype.handleItemClick=function(e){if(e.type=="click"){var $k=__px(this).eventElem(e);if($k)$k.selected=true;return;};var lv=this.list.value,$l=this.tree.selectedNode;if($l&&parseInt($l.value)==26)lv="Report."+lv;this.text.updateValue();var $m=this.text.getSelectedText(),$h=this.text.getValue();var $n=this.text.selStart,$o=this.text.selEnd;if(!$m){$h=$h.substring(0,$n)+lv+$h.substring($n);this.text.setValue($h);$o=$n=$n+lv.length;}else{this.text.setValue($h.substring(0,$n)+$h.substring($n).replace($m,lv));$o=$n+lv.length;};this.text.select($n,$o);};RMFormulaEditor.pnlHeader_ExceptionChange=function($p,$a){try{var $q=$p.split("&");var $r=__doc(this.control).getElementById($q[0]);if($r!=null){$r.style.visibility="visible";$r.innerHTML=($q[1]!="")?$q[1]:$q[2];$r.title=($q[1]!="")?$q[1]:$q[2];$r.style.color=($q[1]=="")?"black":"red";}}catch(e){}};



function PXCalendarPanel($a,$b,$c){this.px_context=$a;this.element=$b;__px_cm(this).readProperties(this,$c,PXCalendarPanel.properties);__px_cm(this).registerRequiresOnLoad(this,$b.id);};PXCalendarPanel.prototype.onLoad=function(e){this.calendar=__px_all(this)[this.element.id+"_calendar"];};PXCalendarPanel.prototype.executeCallback=function($d,$e,$f){if(this.calendar)this.calendar.executeCallback($d,$e,$f);};



function TemplateWikiShow($a,$b,$c){TemplateWikiShow.initializeBaseA(this,[$a,$b,$c]);};TemplateWikiShow.__baseType=PXWikiShow;



function PXKBShow($a,$b,$c){PXKBShow.initializeBaseA(this,[$a,$b,$c]);};PXKBShow.__baseType=PXWikiShow;






function PXRichTextEdit($a,$b,$c,$d){this.px_context=$a;this.element=$b;this.ID=$b.id;this.elemToolbar=__px(this).elemByID($b.id+"_tlb");this.elemIFrame=__px(this).elemByID($b.id+"_if");__px_cm(this).readProperties(this,$c,PXRichTextEdit.properties);__px_cm(this).registerAutoSize(this,$c);__px_cm(this).registerRequiresOnLoad(this,$b.id);this.initializeButtons();this.viewState=new PXStateBag(this,"PXRichTextEdit",$d);};PXRichTextEdit.$2o=0;PXRichTextEdit.$2p=1;PXRichTextEdit.properties=[["simpleFormatWarning",JSType.String,null],["loadTemplateConfirm",JSType.String,"Your data will be lost. Would you like to continue?"],["ccpError",JSType.String,"Copy/Cut/Paste of current fragment is not available in your browser."],["spellcheck",JSType.Bool,false],["showPlainText",JSType.Bool,false],["labelID",JSType.String,""],["content",JSType.String,""],["readonly",JSType.Bool,false],["bindingContainer",JSType.String,""],["filesMenuContainer",JSType.String,""]];PXRichTextEdit.callbackProps=[["enabled",JSType.Bool,true,"setEnabled"],["value",JSType.Empty,null,"setValue"],["content",JSType.String,""],["spellcheck",JSType.Bool,false]];PXRichTextEdit.prototype.setProperties=function($c){__px_cm(this).readProperties(this,$c,PXRichTextEdit.callbackProps);};PXRichTextEdit.prototype.onLoad=function(){this.element.style.backgroundColor="white";this.$2q();if(this.ddFontsize)this.defFontSize=this.ddFontsize.getValue();this.$2r(this.content);};PXRichTextEdit.prototype.focusExt=function(){var $e=this.$2s();var $f=PXRange.create($e);$f.setStart($e.body,0);$f.setEnd($e.body,0);this.focusToEdit($f);};PXRichTextEdit.prototype.onVisibleChanged=function($g){if(!__px(this).IsFirefox20&&!__px(this).IsIE){if(__px(this).IsFirefox)this.$2t(this.$2s(),$g&&!this.readonly);this.$2r(this.content);}};PXRichTextEdit.prototype.onDragAndDrop=function($h){if(!__px(this).IsFirefox20&&!__px(this).IsIE)this.$2t(this.$2s(),!$h&&this.getVisible()&&!this.readonly);};PXRichTextEdit.prototype.$2q=function(){this.toolBar=__px_cm(this).createControl("PXToolBar",this.elemToolbar.id,this.elemToolbar.id);__px_all(this)[this.elemToolbar.id]=this.toolBar;for(var i=0;i<this.toolBar.items.length;i++){var $i=this.toolBar.items[i];switch($i.key){case "cmdLoadTemplate":this.btnTemplate=$i;break;case "sepAttachFiles":this.sepAttach=$i;break;case "attachImage":this.btnAttachImage=$i;break;case "type":this.ddType=__px_all(this)[$i.element.id];break;case "sepBold":this.sepBold=$i;break;case "bold":this.btnBold=$i;break;case "italic":this.btnItalic=$i;break;case "underline":this.btnUnderline=$i;break;case "strikethrough":this.btnStrike=$i;break;case "sepLink":this.sepLink=$i;break;case "LinkEditor":this.btnLinkEditor=$i;break;case "WebLinkEditor":this.btnWebLinkEditor=$i;break;case "sepCut":this.sepCut=$i;break;case "Cut":this.btnCut=$i;break;case "Copy":this.btnCopy=$i;break;case "Paste":this.btnPaste=$i;break;case "sepJustify":this.sepJus=$i;break;case "JustifyLeft":this.btnJusLeft=$i;break;case "JustifyCenter":this.btnJusCenter=$i;break;case "JustifyRight":this.btnJusRight=$i;break;case "JustifyFull":this.btnJusFull=$i;break;case "sepH1":this.sepH1=$i;break;case "subscript":this.btnSub=$i;break;case "superscript":this.btnSup=$i;break;case "sepToc":this.sepToc=$i;break;case "InsertHorizontalRule":this.btnHr=$i;break;case "insertorderedlist":this.btnOrdered=$i;break;case "insertunorderedlist":this.btnUnordered=$i;break;case "indent":this.btnIndent=$i;break;case "outdent":this.btnOutdent=$i;break;case "sepFont":this.sepFont=$i;break;case "fontname":this.btnFontname=$i;this.ddFontname=__px_all(this)[$i.element.id];this.ddFontname.caseSensItems=false;break;case "fontsize":this.btnFontsize=$i;this.ddFontsize=__px_all(this)[$i.element.id];break;case "sepColor":this.sepColor=$i;break;case "colorText":this.btnColorText=$i;break;case "colorBackground":this.btnColorBackground=$i;break;case "insertParameter":this.btnInsertParameter=$i;break;}};this.$2u();this.ddFontname.forceFocus=false;this.ddFontsize.forceFocus=false;this.toolBar.setVisible(!this.readonly);this.toolBar.onLoad();};PXRichTextEdit.prototype.onContentFrameLoaded=function($e,$j){if(this.contentLoadinglock||this.fromInit&&this.initFlag)return;this.contentLoadinglock=true;try{$e.window=$j;$k=this.newContent;$l=this.newStyleSheet;this.$2v($e);$e.open();$e.write($k?$k:"");$e.close();var $m;if($l&&($m=this.getChildElementByTag($e.firstChild,"head"))){var s=$e.createElement('style');s.type='text/css';if(s.styleSheet)s.styleSheet.cssText=$l;else s.appendChild($e.createTextNode($l));$m.appendChild(s);};this.$2w($e);if(!this.spellcheck&&$e.body.setAttribute)$e.body.setAttribute("spellcheck",false);this.$2t($e,!this.readonly);var fs="small";switch(this.defFontSize){case "1":fs="xx-small";break;case "2":fs="small";break;case "3":fs="medium";break;case "4":fs="large";break;case "5":fs="x-large";break;case "6":fs="xx-large";break;};var $n="margin: 0px; padding:0px; height:100%;font-family: "+this.ddFontname.getValue()+"; font-size: "+fs;this.setAttribute($e.body,"style",$n);if(this.needUpdateState)this.$2x();if(this.showPlainText&&$e.body)$e.body.innerHTML=this.getElemText2($e.body);}catch(ex){alert(ex.type+": "+ex.message);}finally{this.newContent=null;this.newStyleSheet=null;this.needUpdateState=null;this.contentLoadinglock=false;if(this.fromInit)this.initFlag=true;}};PXRichTextEdit.prototype.$2r=function($k,$l,$o){var $p=this;var $q=function(){$p.newContent=$k?$k:"";$p.newStyleSheet=$l;$p.needUpdateState=$o;};this.fromInit=true;this.initFlag=false;$q();this.elemIFrame.src="";$q();this.elemIFrame.src="about:blank";};PXRichTextEdit.prototype.$2t=function($e,$r){if($e.body!=null){$e.body.contentEditable=$r;$e.designMode=$r?"on":"off";}};PXRichTextEdit.prototype.getChildElementByTag=function($s,$t){if($s&&$s.childNodes){for(var i=0;i<$s.childNodes.length;i++){var $u=$s.childNodes[i];if($u&&String.compare($u.tagName,$t,true))return $u;}};return null;};PXRichTextEdit.prototype.$2y=function(){if(!this.$2z){this.$2z=__px_all(this)[this.ID+"_le"];if(this.$2z){var $v=Function.createDelegate(this,this.$2A);this.$2z.events.addEventHandler("urlSelected",$v);var $w=Function.createDelegate(this,this.$2B);this.$2z.events.addEventHandler("articleSelected",$w);}else{this.$2z=new Object();this.$2z.setCaptionEditable=function($x){};this.$2z.setCaption=function($y){};this.$2z.show=function(){};}};return this.$2z;};PXRichTextEdit.prototype.$2C=function(){this.linListRange=this.getSelection();var le=this.$2y();le.setCaption("");le.show();};PXRichTextEdit.prototype.$2D=function(){if(!this.$2E){this.$2E=__px_all(this)[this.ID+"_tp"];var $z=Function.createDelegate(this,this.$2F);this.$2E.events.addEventHandler("templateLoaded",$z);};return this.$2E;};PXRichTextEdit.prototype.$2G=function(){if(!this.$2H){this.$2H=__px_all(this)[this.ID+"_par"];var $A=Function.createDelegate(this,this.$2I);this.$2H.events.addEventHandler("parameterSelected",$A);};return this.$2H;};PXRichTextEdit.prototype.$2J=function(){this.ltListRange=this.getSelection();var le=this.$2D();le.show();};PXRichTextEdit.prototype.$2K=function(){this.ltListRange=this.getSelection();var le=this.$2G();le.show();};PXRichTextEdit.prototype.$2L=function(){if(!this.$2M){this.$2M=__px_all(this)[this.ID+"_ie"];var $v=Function.createDelegate(this,this.$2N);this.$2M.events.addEventHandler("urlSelected",$v);var $B=Function.createDelegate(this,this.$2O);this.$2M.events.addEventHandler("fileSelected",$B);};this.imgListRange=this.getSelection();this.$2M.show();};PXRichTextEdit.prototype.$2F=function($C,e){this.focusToEdit(this.ltListRange);this.$2r(e.event.content,e.event.style,true);this.$2x();};PXRichTextEdit.prototype.$2I=function($C,e){this.focusToEdit(this.ltListRange);this.insertTextAtSelection(e.event.value);this.$2x();};PXRichTextEdit.prototype.$2N=function($C,e){this.focusToEdit(this.imgListRange);this.$2P(e.event.url,null,null,null,"0px","","0","0");this.$2x();};PXRichTextEdit.prototype.$2O=function($C,e){this.focusToEdit(this.imgListRange);var $D=this.$2P(e.event.url,null,null,null,"0px","","0","0",e.event.fileId);this.$2x();};PXRichTextEdit.prototype.$2A=function($C,e){this.focusToEdit(this.linListRange);this.$2Q(e.event.url,e.event.name);this.$2x();};PXRichTextEdit.prototype.$2B=function($C,e){this.focusToEdit(this.linListRange);var $E=this.$2Q(e.event.url,e.event.name);this.setAttribute($E,"artid",e.event.artId);this.$2x();};PXRichTextEdit.prototype.getEnabled=function(){return this.toolBar&&this.toolBar.getVisible();};PXRichTextEdit.prototype.setEnabled=function($F){if(!this.toolBar)return;$F=Boolean($F);if($F!=this.getEnabled()){if($F)this.elemIFrame.removeAttribute("enabled");else this.elemIFrame.setAttribute("enabled","false");var $e=this.$2s();var $G=this.toolBar.getVisible();var $H=this.elemToolbar.offsetHeight;this.toolBar.setVisible($F);if($G!=this.toolBar.getVisible())this.setHeight(this.elemIFrame.offsetHeight+($G?1:-1)*$H);this.readonly=!$F;this.$2r(this.getValue());this.ddFontname.setEnabled($F);this.ddFontsize.setEnabled($F);this.ddType.setEnabled($F);this.viewState.update("Enabled",Boolean($F));}};PXRichTextEdit.prototype.getVisible=function(){return this.element.style.display!="none";};PXRichTextEdit.prototype.setVisible=function($I){if($I!=this.getVisible()){var $J=$I?"":"none";this.element.style.display=$J;if(this.labelID){var $K=__px(this).elemByID(this.labelID);if($K)$K.style.display=$J;};this.viewState.update("Visible",Boolean($I));}};PXRichTextEdit.prototype.setValue=function(v){if(v!=this.getValue()){this.$2r(v);this.viewState.update("Value",this.content=(v!=null)?v:"");}};PXRichTextEdit.prototype.getValue=function(){var $e=this.$2s();var $L="";for(var i=0;i<$e.childNodes.length;i++){var $i=$e.childNodes[i];if($i.nodeName!="#text")$L="<"+$i.nodeName+">"+($i.nodeValue?$i.nodeValue:$i.innerHTML)+"</"+$i.nodeName+">";};return $L;};PXRichTextEdit.prototype.$2R=function(e){if(this.spellcheck)return;var $M=this.$2S();if($M){__px(this).cancelEvent(e);if($M.items.length>0){for(var $N=0;$N<$M.items.length;$N++){var $O=$M.items.getItem($N);switch($O.commandName){case "Cut":this.mnuCut=$O;break;case "Copy":this.mnuCopy=$O;break;case "Cut":this.mnuPaste=$O;break;}};var de=this.$2s().documentElement;var $P=de.scrollTop;var $Q=de.scrollLeft;var $R=__px(this).getElemLeftPos(this.elemIFrame);var top=__px(this).getElemTopPos(this.elemIFrame);$M.showAt($R+e.clientX+$Q,top+e.clientY+$P);}};return false;};PXRichTextEdit.prototype.$2S=function(){if(this.localMenu==null){this.localMenu=PXMenu.createMenuControl(this.ID+"_menu",this.px_context);if(this.localMenu){var h=Function.createDelegate(this,this.$2T);this.localMenu.events.addEventHandler("itemClick",h);}};return this.localMenu;};PXRichTextEdit.prototype.$2T=function($C,e){var $i=e.item;if($i&&$i.commandName)this.$2U($i.commandName);};PXRichTextEdit.prototype.$2V=function($C,e){this.$2W(e.button);if(!this.$2U(e.button.key))e.cancel=true;};PXRichTextEdit.prototype.initializeButtons=function(){var $S=new Object();$S.setPushed=function($T){};$S.setEnabled=function($U){};$S.setVisible=function($g){};$S.events=new Object();$S.events.addEventHandler=function(){};$S.getMenu=function(){return null;};$S.setValue=function(v){};$S.getValue=function(){return null;};$S.hideMenu=function(){};$S.hideDropDown=function(){};this.btnTemplate=$S;this.sepAttach=$S;this.btnAttachImage=$S;this.sepType=$S;this.ddType=$S;this.sepBold=$S;this.btnBold=$S;this.btnItalic=$S;this.btnUnderline=$S;this.btnStrike=$S;this.sepLink=$S;this.btnLinkEditor=$S;this.btnWebLinkEditor=$S;this.sepCut=$S;this.btnCut=$S;this.btnCopy=$S;this.btnPaste=$S;this.sepJus=$S;this.btnJusLeft=$S;this.btnJusCenter=$S;this.btnJusRight=$S;this.btnJusFull=$S;this.sepH1=$S;this.btnSub=$S;this.btnSup=$S;this.sepToc=$S;this.btnHr=$S;this.btnOrdered=$S;this.btnUnordered=$S;this.btnIndent=$S;this.btnOutdent=$S;this.sepFont=$S;this.btnFontname=$S;this.ddFontname=$S;this.btnFontsize=$S;this.ddFontsize=$S;this.sepColor=$S;this.btnColorText=$S;this.btnColorBackground=$S;this.btnInsertParameter=$S;this.mnuCut=$S;this.mnuCopy=$S;this.mnuPaste=$S;};PXRichTextEdit.prototype.onMyContextMenu=function(e){};PXRichTextEdit.prototype.$2w=function($e){this.mouseHandler=Function.createDelegate(this,this.$2X);__px(this).addEventHandler($e,"mouseup",this.mouseHandler);__px(this).addEventHandler($e,"click",this.mouseHandler);this.keyupHandler=Function.createDelegate(this,this.$2Y);__px(this).addEventHandler($e,"keyup",this.keyupHandler);this.keypressHandler=Function.createDelegate(this,this.$2Z);if($e.body)__px(this).addEventHandler($e.body,"keypress",this.keypressHandler);this.contextmenuHandler=Function.createDelegate(this,this.$2R);};PXRichTextEdit.prototype.$2v=function($e){if(this.mouseHandler){__px(this).removeEventHandler($e,"mouseup",this.mouseHandler);__px(this).removeEventHandler($e,"click",this.mouseHandler);};if(this.keyupHandler)__px(this).removeEventHandler($e,"keyup",this.keyupHandler);if(this.keypressHandler)__px(this).removeEventHandler($e.body,"keypress",this.keypressHandler);};PXRichTextEdit.prototype.$2u=function(){var $V=Function.createDelegate(this,this.$30);this.ddType.events.addEventHandler("selectionChanging",$V);var $W=Function.createDelegate(this,this.$31);this.ddType.events.addEventHandler("selectionChanged",$W);var $X=Function.createDelegate(this,this.$32);this.ddFontname.events.addEventHandler("valueChanged",$X);var $Y=Function.createDelegate(this,this.$33);this.ddFontsize.events.addEventHandler("valueChanged",$Y);var $Z=this.btnColorText.getMenu();if($Z){var h=Function.createDelegate(this,this.$34);$Z.events.addEventHandler("itemClick",h);};var $00=this.btnColorBackground.getMenu();if($00){var h=Function.createDelegate(this,this.$35);$00.events.addEventHandler("itemClick",h);};var $01=Function.createDelegate(this,this.$36);this.ddFontname.events.addEventHandler("showDropDown",$01);this.ddFontsize.events.addEventHandler("showDropDown",$01);var $02=Function.createDelegate(this,this.$37);__px(this).addEventHandler(__doc(this),"mousedown",$02);var $03=Function.createDelegate(this,this.$2V);this.toolBar.events.addEventHandler("buttonClick",$03);var $M=this.btnUnderline.getMenu();if($M){var h=Function.createDelegate(this,this.$2T);$M.events.addEventHandler("itemClick",h);}};PXRichTextEdit.prototype.$37=function(e){var $04=__px(this).eventElem(e);while($04&&$04!=this.element){$04=$04.parentNode;};if($04!=this.element)this.$2W(null,true);};PXRichTextEdit.prototype.$36=function(dd,e){this.$38();};PXRichTextEdit.prototype.$38=function(){if(__px(this).IsIE){var $05=this.getSelection();if($05)this.$39=$05.clone();}};PXRichTextEdit.prototype.$3a=function(){if(__px(this).IsIE&&this.$39){this.$39.select();this.$39=null;}};PXRichTextEdit.prototype.$32=function(dd,e){this.$3a();this.$2U("FontName",dd.getValue());};PXRichTextEdit.prototype.$33=function(dd,e){this.$3a();this.$2U("FontSize",dd.getValue());};PXRichTextEdit.prototype.$2Z=function(e){var $06=(e.charCode&&(e.ctrlKey||e.altKey))||(e.keyCode>=33&&e.keyCode<=40)||e.keyCode==PX.key_enter||e.keyCode==PX.key_tab||e.keyCode==PX.key_del||e.keyCode==PX.key_backspace;var $07=e.charCode;var $05;var $b;if(e.ctrlKey){var $08=e.keyCode?e.keyCode:e.which;var $09=null;$08=String.fromCharCode($08);var $0a=true;switch($08){case 'b':$09='bold';break;case 'i':$09='italic';break;case 'u':$09='underline';break;case 'd':$09='strike';break;case '=':$09=e.shiftKey?'superscript':'subscript';break;case 'f':if(e.shiftKey)this.ddFontname.focus();break;case 'p':if(e.shiftKey)this.ddFontsize.focus();break;case 'l':$09='JustifyLeft';break;case 'e':$09='JustifyCenter';break;case 'r':$09='JustifyRight';break;case 'j':$09='JustifyFull';break;default:$0a=false;break;};if($0a){__px(this).cancelEvent(e);if($09)this.$2U($09);}}else if(e.keyCode==PX.key_enter&&__px(this).IsIE){var br=this.$2s().createElement('br');this.insertNodeAtSelection(br);__px(this).cancelEvent(e);}};PXRichTextEdit.prototype.$2Y=function(e){var $06=this.$3b(e);this.$2W();if($06||this.$3c)this.$3d();this.$3c=$06;this.$2x();};PXRichTextEdit.prototype.$2x=function(){var $0b=this.getValue(),$0c=this.viewState.select("Value");this.content=($0b!=null)?$0b:"";this.viewState.update("Value",this.content);if($0c!=this.content)__px_cm(this).notifyOwnerChanged(this);};PXRichTextEdit.prototype.$3b=function(e){return(e.charCode&&(e.ctrlKey||e.altKey))||(e.keyCode>=33&&e.keyCode<=40)||e.keyCode==PX.key_enter||e.keyCode==PX.key_tab||e.keyCode==PX.key_del||e.keyCode==PX.key_backspace;};PXRichTextEdit.prototype.$2W=function($0d,$0e){if(!$0e){if(this.ddType!=$0d)this.ddType.hideDropDown();if(this.ddFontname!=$0d)this.ddFontname.hideDropDown();if(this.ddFontsize!=$0d)this.ddFontsize.hideDropDown();};if(this.btnColorText!=$0d)this.btnColorText.hideMenu();if(this.btnColorBackground!=$0d)this.btnColorBackground.hideMenu();};PXRichTextEdit.prototype.$3d=function($0f){if($0f)this.lastRange=null;var $0g=this.getSelection();if(this.lastRange&&this.lastRange.isEqual($0g))return;var $0h=function(el,$0i){var parent=el;try{while(parent!=null){if($0i(parent))return parent;parent=parent.parentNode;}}catch(e){};return null;};var $0j=function($0k){return function(el){var $0l=el.currentStyle?el.currentStyle:__win(this).getComputedStyle(el,null);return Boolean($0l.textDecoration.match($0k));};};var $0m=function(name){return function(el){return String.compare(el.tagName,name,true);};};var $0n=function($0k){return function(el){return el.style&&el.style[$0k];};};var $0o=function(){return function(el){return String.compare(el.tagName,"p",true)&&el.getAttribute("align");};};var $0p=null;var $0q=false;var $0r=null;var $0s=false;var $0t=null;var $0u=false;var $0v=null;var $0w=false;var $0x=null;var $0y=false;var $0z=null;var $0A=false;var $0B=null;var $0C=false;var $0D=null;var $0E=false;var $0F=null;var $0G=false;var $0H=null;var $0I=false;var $0J=null;var $0K=false;var $0L=null;var $0M=false;var $0N=null;var $0O=false;var $05=this.getSelection();var $0P=this.getSelectedElements($05);for(var i=0;i<$0P.length;i++){if($0q&&$0s&&$0u&&$0w&&$0y&&$0A&&$0C&&$0E){break;};var $i=$0P[i];if(!this.isTextNode($i))continue;var $b=this.$3e($i);if(!$b)continue;var style=$b.currentStyle?$b.currentStyle:__win(this).getComputedStyle($b,null);if(!$0q){var $0Q=null;if(typeof(style.fontWeight)!="number"){$0Q=String.compare(style.fontWeight,"bold",true)||String.compare(style.fontWeight,"bolder",true);};var $0R;if(!$0Q&&!isNaN($0R=parseInt(style.fontWeight))){$0Q=$0R>400;};if($0p==null)$0p=$0Q;else $0q=$0p!=$0Q;};if(!$0s){var $0S=String.compare(style.fontStyle,"italic",true)||String.compare(style.fontStyle,"oblique",true);if($0r==null)$0r=$0S;else $0s=$0r!=$0S;};if(!$0u){var $0T=Boolean($0h($b,$0j("underline")));if($0t==null)$0t=$0T;else $0u=$0t!=$0T;};if(!$0w){var $0U=Boolean($0h($b,$0j("line-through")));if($0v==null)$0v=$0U;else $0w=$0v!=$0U;};if(!$0y){var $0V=Boolean($0h($b,$0m("sub")));if($0x==null)$0x=$0V;else $0y=$0x!=$0V;};if(!$0A){var $0W=Boolean($0h($b,$0m("sup")));if($0z==null)$0z=$0W;else $0A=$0z!=$0W;};if(!$0C){var $0X=Boolean($0h($b,$0m("ol")));if($0B==null)$0B=$0X;else $0C=$0B!=$0X;};if(!$0E){var $0Y=Boolean($0h($b,$0m("ul")));if($0D==null)$0D=$0Y;else $0E=$0D!=$0Y;};if(!$0G){var $0Z=style.fontFamily;if($0F==null)$0F=$0Z;else $0G=$0F!=$0Z;};if(!$0I){var $10=$0h($b,$0m("font"));if($10)$10=$10.getAttribute("size");if($10==null)$10=this.defFontSize;if($0H==null)$0H=$10;else $0I=$0H!=$10;};if(!$0K){var $11=$0h($b,$0n("textAlign"));if($11)$11=$11.style["textAlign"];else{$11=$0h($b,$0o());if($11)$11=$11.getAttribute("align");};if($0J==null)$0J=$11;else $0K=$0J!=$11;};if(!$0M){var $12=$0h($b,$0n("color"));if($12)$12=$12.style["color"];if($0L==null)$0L=$12;else $0M=$0L!=$12;};if(!$0O){var $13=$0h($b,$0n("backgroundColor"));if($13)$13=$13.style["backgroundColor"];if($0N==null)$0N=$13;else $0O=$0N!=$13;}};this.btnBold.setPushed(!$0q&&$0p);this.btnItalic.setPushed(!$0s&&$0r);this.btnUnderline.setPushed(!$0u&&$0t);this.btnStrike.setPushed(!$0w&&$0v);this.btnSub.setPushed(!$0y&&$0x);this.btnSup.setPushed(!$0A&&$0z);this.btnOrdered.setPushed(!$0C&&$0B);this.btnUnordered.setPushed(!$0E&&$0D);if($0G)this.ddFontname.forceSetNull();else if($0F)this.ddFontname.setValue($0F);if($0I)this.ddFontsize.forceSetNull();else if($0H)this.ddFontsize.setValue($0H);if($0J==null)$0J="left";this.btnJusLeft.setPushed(!$0K&&String.compare($0J,"left",true));this.btnJusCenter.setPushed(!$0K&&String.compare($0J,"center",true));this.btnJusRight.setPushed(!$0K&&String.compare($0J,"right",true));this.btnJusFull.setPushed(!$0K&&String.compare($0J,"justify",true));if(!$0M&&$0L)this.btnColorText.setColor($0L);else this.btnColorText.clearColor();if(!$0O&&$0N)this.btnColorBackground.setColor($0N);else this.btnColorBackground.clearColor();var $14=$05.isCollapsed();this.btnAttachImage.setEnabled($14);var $15=this.findParentNode("a",$05.getStartContainer());var $16=this.findParentNode("a",$05.getEndContainer());this.btnLinkEditor.setEnabled($15==$16);this.lastRange=$0g.clone();};PXRichTextEdit.prototype.$2X=function(e){switch(e.type){case "click":case "mouseup":var $M=this.$2S();if($M&&$M.items.getVisible()){$M.items.setVisible(false);};this.$2W();this.$3d();break;}};PXRichTextEdit.prototype.$30=function($C,$17){if($17.newIndex==PXRichTextEdit.$2p&&!confirm(this.simpleFormatWarning))$17.cancel=true;};PXRichTextEdit.prototype.$31=function($C,$17){var $g=true;if($17.newIndex==PXRichTextEdit.$2p){$g=false;var $e=this.$2s();$e.body.innerHTML=this.getElemText2($e.body);};this.btnTemplate.setVisible($g);this.sepAttach.setVisible($g);this.btnAttachImage.setVisible($g);this.sepBold.setVisible($g);this.btnBold.setVisible($g);this.btnItalic.setVisible($g);this.btnUnderline.setVisible($g);this.btnStrike.setVisible($g);this.sepLink.setVisible($g);this.btnLinkEditor.setVisible($g);this.btnWebLinkEditor.setVisible($g);this.sepJus.setVisible($g);this.btnJusLeft.setVisible($g);this.btnJusCenter.setVisible($g);this.btnJusRight.setVisible($g);this.btnJusFull.setVisible($g);this.sepH1.setVisible($g);this.btnSub.setVisible($g);this.btnSup.setVisible($g);this.sepToc.setVisible($g);this.btnHr.setVisible($g);this.btnOrdered.setVisible($g);this.btnUnordered.setVisible($g);this.btnIndent.setVisible($g);this.btnOutdent.setVisible($g);this.sepFont.setVisible($g);this.btnFontname.setVisible($g);this.btnFontsize.setVisible($g);this.sepColor.setVisible($g);this.btnColorText.setVisible($g);this.btnColorBackground.setVisible($g);};PXRichTextEdit.prototype.getElemText2=function($18,$19){return this.getElemText($18,$19,true);};PXRichTextEdit.prototype.getElemText=function($18,$19,$1a){if(!$18)return "";var $1b="";var $1c=false;var $1d=new Array();$1d.push($18);while($1d.length>0){var $1e=false;var $i=$1d.pop();switch($i.nodeName){case "#text":$1b+=$i.nodeValue;if($1c){if(!$19)$1b+="<br />";$1c=false;};break;case "BR":case "HR":if(!$19)$1b+="<br />";break;case "LI":$1e=true;$1c=true;break;case "STYLE":$1e=!$1a;break;default:$1e=true;break;};if($1e){var $1f=$i.childNodes;if($1f){for(var i=$1f.length-1;i>=0;i--)$1d.push($1f[i]);}}};if($19)$1b=$1b.replace('<br />','').replace('<br/>','');return $1b;};PXRichTextEdit.prototype.$34=function($C,$17){var $05=this.getSelection();this.$2U("ForeColor",$17.event.color);var $1g=this;if(!__px(this).IsIE){setTimeout(function(){var $e=$1g.$2s();var $1h=$e.getElementsByTagName('body')[0];$1h.focus();},1);}};PXRichTextEdit.prototype.$35=function($C,$17){var $05=this.getSelection();if(!$05.isCollapsed())this.$2U("BackColor",$17.event.color);};PXRichTextEdit.prototype.setFontSize=function($1i){var $05=this.getSelection();if(!$05.isCollapsed())this.$2U("FontSize",$1i);};PXRichTextEdit.prototype.setStyleForSelection=function($1j){this.$3a();var $e=this.$2s();var $05=this.getSelection();var $1k=function($1l){var $1m=$1l.isCollapsed();var $1n=$e.createElement("span");$1j($1n.style);$1l.surroundContents($1n);if(__px(this).IsIE&&$1m){var $D=$e.createElement("img");$D.src="about: blank;";$D.setAttribute("width","0px");$D.setAttribute("height","0px");$1n.appendChild($D);};return $1n;};var $p=this;var $1o=function($18,$1p,end){var $1l=PXRange.create($e);$1l.setStart($18,$1p);$1l.setEnd($18,end);var $1q=$p.$3e($18);var $1r=$1l.toString();if($1q!=$e.body&&$1q.innerHTML==$1r||$1q==$e.body&&$p.getElemText($1q)==$1r){$1j($1q.style);return $1q;};return $1k($1l);};var $1s=$05.clone();var $0P=this.getSelectedElements($05);for(var i=0;i<$0P.length;i++){var $i=$0P[i];var $b=this.$3e($i);var $1t=$i==$05.getStartContainer();var $1u=$i==$05.getEndContainer();var $1v=$05.isCollapsed();if($b!=$i||$b==$e.body||$1v){if($1t&&$1u){var $1n=$1o($i,$05.getStartOffset(),$05.getEndOffset());if(__px(this).IsIE&&$1v){var $1w=$e.createTextNode('');$1n.appendChild($1w);$1s.setStart($1w,0);$1s.setEnd($1w,0);}else $1s.selectNodeContents($1n);}else if($1t){var $1n=$1o($i,$05.getStartOffset(),$i.length);$1s.setStart($1n,0);}else if($1u){var $1n=$1o($i,0,$05.getEndOffset());$1s.setEnd($1n,1);}else{if($1v&&this.getElemText($b).length>0){var $1n=$1k($05);if(__px(this).IsIE&&$1v){var $1w=$e.createTextNode('');$1n.appendChild($1w);$1s.setStart($1w,0);$1s.setEnd($1w,0);}else $1s.selectNodeContents($1n);}else if(!this.isChildNode($05.getStartContainer())&&!this.isChildNode($05.getEndContainer())){$1j($b.style);}}}};if($1s.getStartContainer()==$e.body&&$1s.getStartOffset()==0&&$1s.getEndContainer()==$e.body&&$1s.getEndOffset()==1){$1s.setStart($e.body,1);};$1s.setEnd($1s.getStartContainer(),$1s.getStartOffset());$1s.select();this.focusToEdit($1s);};PXRichTextEdit.prototype.$3e=function($18){return this.isTextNode($18)?$18.parentNode:$18;};PXRichTextEdit.prototype.getSelection=function(){var $e=this.$2s();var $05=PXRange.fromSelection($e);if($05.isCollapsed())return $05;var $1x=$05.getStartContainer();var $1y=$05.getStartOffset();if(this.isTextNode($1x)){if($1y>=$1x.length){var $1z=this.getNextNode($1x,true,$1A);if($1z){$1x=$1z;$1y=0;}}}else if($1y>0){var $1B=$1x.childNodes.length;if($1y>=$1B){$1x=$05.getStartContainer();$1y=$1B;}else{$1x=$1x.childNodes[$1y];$1y=0;}};var $1A=$05.getEndContainer();var $1C=$05.getEndOffset();if(this.isTextNode($1A)){if($1C<=0){var $1D=this.getPreviousNode($1A,true,$1x);if($1D){$1A=$1D;$1C=this.isTextNode($1D)?$1D.length:$1D.childNodes.length;}}}else if($1C>0){var $1B=$1A.childNodes.length;if($1C>=$1B){$1A=$05.getEndContainer();$1C=$1B;}else{$1A=$1A.childNodes[$1C];$1C=0;}};var $f=PXRange.create($e);$f.setStart($1x,$1y);$f.setEnd($1A,$1C);return $f;};PXRichTextEdit.prototype.isTextNode=function($18){return $18&&$18.nodeName=="#text";};PXRichTextEdit.prototype.focusToEdit=function($1l){var $j=this.$3f();if($j)$j.focus();if($1l)$1l.select();};PXRichTextEdit.prototype.getSelectedElements=function($05){if(!$05)$05=PXRange.fromSelection(this.$2s());return this.getNodesInRange($05);};PXRichTextEdit.prototype.getNextNode=function($18,$1E,$1A){if($1A==$18)return null;if($18.firstChild&&!$1E)return $18.firstChild;if(!$18.parentNode)return null;return $18.nextSibling||this.getNextNode($18.parentNode,true,$1A);};PXRichTextEdit.prototype.getPreviousNode=function($18,$1E,$1A){if($1A==$18)return null;if($18.firstChild&&!$1E)return $18.firstChild;if(!$18.parentNode)return null;return $18.previousSibling||this.getNextNode($18.parentNode,true,$1A);};PXRichTextEdit.prototype.getNodesInRange=function($1l){var $1p=$1l.getStartContainer();if($1l.isCollapsed()){var $L=new Array();if(this.isTextNode($1p))$L.push($1p);else $L.push($1p.childNodes[$1l.getStartOffset()]||$1p);return $L;};var $1x=$1p.childNodes[$1l.getStartOffset()]||$1p;var end=$1l.getEndContainer();var $1A=end.childNodes[$1l.getEndOffset()]||end;var $1F=this.getCommonContainerNode($1x,$1A);var $1b=new Array();$1b.push($1x);if($1x!=$1A||$1x.childNodes.length!=0){while($1x=this.getNextNode($1x,false,$1A)&&$1x!=$1F){$1b.push($1x);}};return $1b;};PXRichTextEdit.prototype.getCommonContainerNode=function($1x,$1A){while($1x&&$1A&&$1x!=$1A){$1x=$1x.parentNode;$1A=$1A.parentNode;};return(!$1x||!$1A)?null:$1x;};PXRichTextEdit.prototype.isChildNode=function($1q,$18){if($1q==$18)return true;if($1q.childNodes&&$1q.childNodes.length>0){for(var i=0;i<$1q.childNodes.length;i++){var $L=this.isChildNode($1q.childNodes[i]);if($L)return true;}};return false;};PXRichTextEdit.prototype.getRange=function($1G){return $1G.createRange?$1G.createRange():$1G.getRangeAt(0);};PXRichTextEdit.prototype.$3f=function(){return this.elemIFrame.contentWindow;};PXRichTextEdit.prototype.$2s=function(){return this.$3f().document;};PXRichTextEdit.prototype.$2P=function($1H,$1I,$1J,$1K,$1L,$1M,$1N,$1O,$1P){var $e=this.$2s();var $1G=this.$3g();var $1l=this.getRange($1G);var $D=this.findParent("img",$1l);var $1Q=($D==null)?false:true;if(!$1Q)$D=$e.createElement("img");if($1P)this.setAttribute($D,"fileid",$1P);this.setAttribute($D,"src",$1H);var style="";if($1I)style+="width:"+$1I+";";if($1J)style+="height:"+$1J+";";if(style)this.setAttribute($D,"style",style);if($1K)this.setAttribute($D,"align",$1K);else $D.removeAttribute("align");this.setAttribute($D,"border",$1L);this.setAttribute($D,"alt",$1M);this.setAttribute($D,"hspace",$1N);this.setAttribute($D,"vspace",$1O);$D.removeAttribute("width");$D.removeAttribute("height");if(!$1Q){if(__px(this).IsIE)$1l.pasteHTML($D.outerHTML);else this.insertNodeAtSelection($D);}};PXRichTextEdit.prototype.$2Q=function($1R,name){var $05=this.getSelection();var $15=this.findParentNode("a",$05.getStartContainer());var $16=this.findParentNode("a",$05.getEndContainer());if($15==$16&&name){if($15)this.setAttribute($15,"href",$1R);else{var $E=this.$2s().createElement("a");this.setAttribute($E,"href",$1R);$05.surroundContents($E);if(!$E.innerHTML)$E.innerHTML=name;}}};PXRichTextEdit.prototype.$3g=function(){var $1S=this.$3f();var $e=$1S.document;var $1G=null;if($1S.getSelection){$1G=$1S.getSelection();}else if($e.getSelection){$1G=$e.getSelection();}else if($e.selection){$1G=$e.selection;};return $1G;};PXRichTextEdit.prototype.$3h=function(){var $1T=__px_all(this)[this.filesMenuContainer];$1T.showUploadPanel();};PXRichTextEdit.prototype.$2U=function($1U,$0k){var $1b=true;this.$3f().focus();var $e=this.$2s();var $p=this;var $1V=function($1U,$0k){if(typeof($0k)=="undefined")$0k=null;if(!__px(this).IsIE&&$1U=='BackColor')$1U='HiliteColor';if(!__px(this).IsIE&&($1U=="Cut"||$1U=="Paste"||$1U=="Copy")){try{$e.execCommand($1U,false,$0k);}catch(e){alert($p.ccpError)}}else{$e.execCommand($1U,false,$0k);}};switch($1U){case "AttachFile":this.$3h();break;case "LinkEditor":this.$2C();break;case "attachImage":this.$2L();break;case "CreateLink":this.$2C();break;case "JustifyLeft":case "JustifyCenter":case "JustifyRight":case "JustifyFull":case "BackColor":case "HiliteColor":case "ForeColor":$1V($1U,$0k);this.lastRange=null;break;case "cmdLoadTemplate":if(this.getElemText($e.body,true).trim()&&!confirm(this.loadTemplateConfirm)){$1b=false;}else this.$2J();break;case "insertParameter":this.$2K();break;default:$1V($1U,$0k);break;};this.$2x();this.$3d(true);return $1b;};PXRichTextEdit.prototype.insertHTML=function($1W){if(__px(this).IsIE){this.$2s().selection.createRange().pasteHTML($1W);}else{var $1n=this.$2s().createElement("span");$1n.innerHTML=$1W;this.insertNodeAtSelection($1n);}};PXRichTextEdit.prototype.insertTextAtSelection=function($1r){var $e=this.$2s();var $18=$e.createTextNode($1r);this.insertNodeAtSelection($18);};PXRichTextEdit.prototype.insertNodeAtSelection=function($1X){var $e=this.$2s();var $1l=PXRange.fromSelection($e);$1l.deleteContents();var $1q=$1l.getStartContainer();var $1Y=$1l.getStartOffset();if($1q.nodeType==3&&$1X.nodeType==3){$1q.insertData($1Y,$1X.data);$1l.setEnd($1q,$1Y+$1X.length);$1l.setStart($1q,$1Y+$1X.length);}else{var $1Z;var $20;if($1q.nodeType==3){var $21=$1q;$1q=$21.parentNode;var $1r=$21.nodeValue;var $22=$1r.substr(0,$1Y);var $23=$1r.substr($1Y);$20=__doc(this).createTextNode($22);$1Z=__doc(this).createTextNode($23);$1q.insertBefore($1Z,$21);$1q.insertBefore($1X,$1Z);$1q.insertBefore($20,$1X);$1q.removeChild($21);}else{$1Z=$1q.childNodes[$1Y];if($1Z)$1q.insertBefore($1X,$1Z);else{$1q.appendChild($1X);$1Z=$1X;}};try{$1l.setEnd($1Z,0);$1l.setStart($1Z,0);$1l.collapse(true);$1l.select();}catch(e){}}};PXRichTextEdit.prototype.findParent=function($24,$1l){$24=$24.toUpperCase();var $25;var $26=null;try{if(!__px(this).IsIE){var $18=$1l.startContainer;var $1Y=$1l.startOffset;if($18.nodeType!=3){$18=$18.childNodes[$1Y];};return this.findParentNode($24,$18);}else{$26=($1l.length>0)?$1l.item(0):$1l.parentElement();$26=this.findParentNode($24,$26);if($26!=null)return $26;$25=$1l.duplicate();$25.collapse(true);$25.moveEnd("character",1);if($25.text.length>0){while($25.compareEndPoints("EndToEnd",$1l)<0){$25.move("Character");if(null !=this.findParentTag($24,$25)){return this.findParentTag($24,$25);}}}}}catch(e){};return null;};PXRichTextEdit.prototype.getTag=function($1l){try{if(!__px(this).IsIE){var $18=$1l.startContainer;var $1Y=$1l.startOffset;if($18.nodeType!=3){$18=$18.childNodes[$1Y];};if($18.nodeName&&$18.nodeName.search(/#/)!=-1){return $18.parentNode;};return $18;}else{if($1l.length>0){return $1l.item(0);}else if($1l.parentElement()){return $1l.parentElement();}};return null;}catch(e){return null;}};PXRichTextEdit.prototype.getParent=function(element){if(element.parentNode){return element.parentNode;};return null;};PXRichTextEdit.prototype.getTextRange=function(element){var $1l=element.parentTextEdit.createTextRange();$1l.moveToElementText(element);return $1l;};PXRichTextEdit.prototype.selectNode=function($27){var $1G=this.$3g();var $1l=this.getRange($1G);var $28=this.getTag($1l);var i=0;for(var $18=$28;($18&&($18.nodeType==1));$18=$18.parentNode){if(i==$27){this.nodeSelection($18);};i++;}};PXRichTextEdit.prototype.nodeSelection=function($18){var $e=this.$2s();var $1G=this.$3g();var $1l=this.getRange($1G);if(!__px(this).IsIE){if($18.nodeName=="BODY"){$1l.selectNodeContents($18);}else{$1l.selectNode($18);};if($1G)$1G.removeAllRanges();if($1G)$1G.addRange($1l);}else{if(($18.nodeName=="TABLE")||($18.nodeName=="IMG")||($18.nodeName=="INPUT")||($18.nodeName=="SELECT")||($18.nodeName=="TEXTAREA")){try{$1l=$e.body.createControlRange();$1l.addElement($18);$1l.select();}catch(e){}}else{$1l=$e.body.createTextRange();if($1l){$1l.collapse();if($1l.moveToElementText){try{$1l.moveToElementText($18);$1l.select();}catch(e){try{$1l=$e.body.createTextRange();$1l.moveToElementText($18);$1l.select();}catch(e){}}}else{try{$1l=$e.body.createTextRange();$1l.moveToElementText($18);$1l.select();}catch(e){}}}}}};PXRichTextEdit.prototype.$3i=function($18,style){if(style==null)return;var $29=style.split(";");var $1Y;for(var i=0;i<$29.length;i++){var $2a=$29[i].split(":");if($2a.length==2){try{var $2b=$2a[0].trim();while(($1Y=$2b.search(/-/))!=-1){var $2c=$2b.substring(0,$1Y);var $2d=$2b.substring($1Y+1,$1Y+2);var $2e=$2b.substring($1Y+2,$2b.length);$2b=$2c+$2d.toUpperCase()+$2e;};var $0k=$2a[1].trim().toLowerCase();$18.style[$2b]=$0k;}catch(e){}}}};PXRichTextEdit.prototype.setAttribute=function($18,$2b,$0k){if($0k==null||$18==null||$2b==null)return;if(String.compare($2b,"style",true))this.$3i($18,$0k);else $18.setAttribute($2b,$0k);};PXRichTextEdit.prototype.removeAttribute=function($18,$2b){$18.removeAttribute($2b,false);};PXRichTextEdit.prototype.findParentNode=function($t,$18){if($18){while($18&&$18.tagName!="HTML"){if(String.compare($18.tagName,$t,true))return $18;$18=$18.parentNode;}};return null;};PXRichTextEdit.prototype.insertAdjacentElement=function($18,$2f,$2g){if($18.insertAdjacentElement){$18.insertAdjacentElement($2f,$2g);}else{switch($2f){case 'beforeBegin':$18.parentNode.insertBefore($2g,$18);break;case 'afterBegin':$18.insertBefore($2g,$18.firstChild);break;case 'beforeEnd':$18.appendChild($2g);break;case 'afterEnd':if($18.nextSibling)$18.parentNode.insertBefore($2g,$18.nextSibling);else $18.parentNode.appendChild($2g);break;}}};PXRichTextEdit.prototype.insertAdjacentHTML=function($18,$2f,$2h){if($18.insertAdjacentHTML){$18.insertAdjacentHTML($2f,$2h);}else{var r=($18.ownerDocument?$18.ownerDocument:$18.document).createRange();r.setStartBefore($18);var $2i=r.createContextualFragment($2h);this.insertAdjacentElement($18,$2f,$2i);}};PXRichTextEdit.prototype.insertAdjacentText=function($18,$2f,$2j){if($18.insertAdjacentText){$18.insertAdjacentText($2f,$2j);}else{var $2k=__doc(this).createTextNode($2j);this.insertAdjacentElement($18,$2f,$2k);}};PXRichTextEdit.prototype.setHeight=function($1J){var $2l=this.element,$2m=parseInt($1J);var $2n=$2l.rows[1].cells[0],ds=this.elemIFrame.parentNode.style;$2m-=($2l.offsetHeight-$2n.clientHeight)+(__px(this).IsIE?1:0);$2m=($2m>0?$2m:0);$2l.style.height=$2n.style.height=$2m+"px";this.elemIFrame.style.height=$2m-PX.convertInt(ds.paddingTop)-PX.convertInt(ds.paddingBottom)+"px";};



function PXGridWithPreview($a,$b,$c){this.px_context=$a;this.element=$b;this.ID=$b.id;this.rowChangeHandler=Function.createDelegate(this,this.$h);this.refreshHandler=Function.createDelegate(this,this.$i);this.afterRepaintHandler=Function.createDelegate(this,this.$j);__px_cm(this).readProperties(this,$c,PXGridWithPreview.properties);__px_cm(this).registerAutoSize(this,$c);__px_cm(this).registerRequiresOnLoad(this,$b.id);};PXGridWithPreview.properties=[["dsId",JSType.String,null],["gridId",JSType.String,null],["formId",JSType.String,null],["refreshCommand",JSType.String,null]];PXGridWithPreview.prototype.onLoad=function(e){this.attachEventHandlers();};PXGridWithPreview.prototype.$k=function(){this.dettachEventHandlers();var $d=__px_all(this)[this.formId];$d.events.addEventHandler("afterRepaint",this.afterRepaintHandler);};PXGridWithPreview.prototype.$j=function(){var $d=__px_all(this)[this.formId];$d.events.removeEventHandler("afterRepaint",this.afterRepaintHandler);this.attachEventHandlers();};PXGridWithPreview.prototype.attachEventHandlers=function(){var $e=__px_all(this)[this.gridId];$e.events.addEventHandler("afterRowChange",this.rowChangeHandler);$e.events.addEventHandler("afterRefresh",this.rowChangeHandler);$e.events.addEventHandler("beforeRefresh",this.refreshHandler);};PXGridWithPreview.prototype.dettachEventHandlers=function(){var $e=__px_all(this)[this.gridId];$e.events.removeEventHandler("afterRowChange",this.rowChangeHandler);$e.events.removeEventHandler("afterRefresh",this.rowChangeHandler);$e.events.removeEventHandler("beforeRefresh",this.refreshHandler);};PXGridWithPreview.prototype.focus=function(){__px_all(this)[this.gridId].focus();};PXGridWithPreview.prototype.$i=function($f,e){};PXGridWithPreview.prototype.$h=function($f,e){if(e.keyChanged||e.keyChanged==null){this.$k();var $g=__px_all(this)[this.dsId];$g.executeCommand(this.refreshCommand);__px_cm(this).notifyOnResize(false,$g);}};


﻿function PXFormulaCombo($a,$b,$c){PXFormulaCombo.initializeBaseA(this,[$a,$b,$c]);__px_cm(this).readProperties(this,$c,PXFormulaCombo.properties);var h=Function.createDelegate(this,this.$E);this.events.addEventHandler("editButtonClick",h);this.FieldsRetrievalCallback=__px_callback(this).copyCommand("GetFields",this.callBackMode);this.errLabel=this.popupPanel+"_lblValidate";this.ReadFormulaCall=__px_callback(this).createCommand("ReadFormula",true);if(this.textFunctions!=null){this.funText=this.splitList(this.textFunctions);};if(this.conditionStyles!=null){this.stylesList=this.splitList(this.conditionStyles);for(var i=0;i<this.stylesList.length;i++)this.stylesList[i]="'"+this.stylesList[i]+"'";}};PXFormulaCombo.__baseType=PXDropDown;PXFormulaCombo.properties=[["popupPanel",JSType.String,""],["callBackMode",JSType.Object,PXCallbackManager.commandDesc],["fieldsAutoRefresh",JSType.Bool,false],["fieldsRootAutoRefresh",JSType.Bool,false],["internalFields",JSType.Object,null],["externalFields",JSType.Object,null],["conditionStyles",JSType.String,null],["textFunctions",JSType.String,null],["substitutionKeys",JSType.Object,null]];PXFormulaCombo.prototype.splitList=function($d){var a=$d.split(';');for(var i=0;i<a.length;i++)a[i]=a[i].trim();return a;};PXFormulaCombo.prototype.$F=function($e,e){var $f=Function.createDelegate(this,this.$G);this.$H=this.$H?this.$H:"";__px_callback(this).execI(this,this.ReadFormulaCall,this.$H+"&"+__px_all(this)[this.popupPanel+"_txt"].getValue(),$f);};PXFormulaCombo.prototype.$E=function($e,e){var $g=this.getPanel();if($g){$g.dialogResult=PXDialogResult.Cancel;$g.show(this);if($g.text){$g.text.setValue(this.getValue());$g.text.focus();}}};PXFormulaCombo.prototype.getPanel=function(){if(this.popupPanel&&this.panel==null){this.panel=__px_all(this)[this.popupPanel];if(this.panel){var h1=Function.createDelegate(this,this.$I);var h2=Function.createDelegate(this,this.handlePanelHide);this.panel.events.addEventHandler("afterLoad",h1);this.panel.events.addEventHandler("afterHide",h2);this.panel.position=3;}}else{if(this.fieldsAutoRefresh){var ed=new Object();ed.node=new Object();ed.node.value=30;this.handleNodeSelect(null,ed);}};return this.panel;};PXFormulaCombo.prototype.$I=function($g,ev){if(!$g.text)$g.text=__px_all(this)[$g.ID+"_txt"];if(!$g.tree)$g.tree=__px_all(this)[$g.ID+"_cat"];if(!$g.list)$g.list=__px(this).elemByID($g.ID+"_lst");var $h=__px_all(this)[$g.ID+"_btnValidate"];var h=Function.createDelegate(this,this.handleNodeSelect);$g.tree.events.addEventHandler("afterSelect",h);h=Function.createDelegate(this,this.handleItemClick);__px(this).addEventHandler($g.list,"click",h);__px(this).addEventHandler($g.list,"dblclick",h);var h1=Function.createDelegate(this,this.$F);$h.events.addEventHandler("click",h1);$g.text.setValue(this.getValue());$g.text.selectOnFocus=true;$g.text.focus();$g.text.selectOnFocus=false;var fb=this.filterBar=__px_all(this)[$g.ID+"_fb"];if(fb){fb.events.addEventHandler("keyDown",Function.createDelegate(this,this.handleFilterBarKeyDown));fb.events.addEventHandler("keyPress",Function.createDelegate(this,this.handleFilterBarKeyPress));__px(this).addEventHandler(fb.elemText,"paste",Function.createDelegate(this,this.handleFilterBarPaste),false);}};PXFormulaCombo.prototype.handlePanelHide=function($g,ev){try{var $i=__doc(this).getElementById(this.errLabel);if($i!=null){$i.style.display="none";}}catch(e){};if($g.dialogResult==PXDialogResult.OK){var $j=$g.text.getValue();if($j&&!$j.startsWith('='))$j='='+$j;this.updateValue($j);};this.focus();};PXFormulaCombo.opArithmetic=["+","-","*","/","%"];PXFormulaCombo.opComparison=["=","<>","<",">","<=",">="];PXFormulaCombo.opLogical=["And","Not","Or"];PXFormulaCombo.opOther=["False","In","Null","True"];PXFormulaCombo.funConversion=["CBool( x )","CDate( x )","CDbl( x )","CDec( x )","CInt( x )","CLong( x )","CSng( x )","CStr( x )","CShort( x )"];PXFormulaCombo.funAggregates=["Avg( expr )","Count( expr )","First( expr )","Last( expr )","Max( expr )","Min( expr )","Next( expr )","Prev( expr )","Sum( expr )"];PXFormulaCombo.prototype.funText=["Format( format, args )","InStr( str, findStr )","InStrRev( str, findStr )","Len( str )","Left( str, length )","LCase( str )","LTrim( str )","PadLeft( str, width, paddingChar )","PadRight( str, width, paddingChar )","Replace( str, oldValue, newValue )","Right( str, length )","RTrim( str )","Trim( str )","UCase( str )","Substring( str, start, length )","Concat( str1, str2, ...)"];PXFormulaCombo.funMath=["Abs( x )","Ceiling( x )","Floor( x )","Max( x, y )","Min( x, y )","Pow( x, pow )","Round( x, decimals )"];PXFormulaCombo.prototype.funDateTime=["DateAdd( date, interval, number )","DateDiff( interval, date1, date2 )","Day( date )","DayOfWeek( date )","DayOfYear( date )","DayOrdinal( day )","Hour( date )","Minute( date )","Second( date )","Month( date )","MonthName( date )","Year( date )","Now()","Today()","NowUTC()","TodayUTC()"];PXFormulaCombo.funProgram=["IIf( expr, truePart, falsePart )","IsNull( value, nullValue )","NullIf( value1, value2 )","SubstituteAll( sourceField, substitutionList )","SubstituteListed( sourceField, substitutionList )","Switch( expr1, value1, expr2, value2, ...)"];PXFormulaCombo.prototype.stylesList=[];PXFormulaCombo.prototype.handleNodeSelect=function($k,ev){if(this.panel&&this.panel.list){while(this.panel.list.options.length>0)this.panel.list.remove(0);if(ev.node.value==null)return;if($k!=null)this.lastNodeValue=ev.node.value;var $l=null;switch(parseInt(ev.node.value)){case 11:$l=PXFormulaCombo.opArithmetic;break;case 12:$l=PXFormulaCombo.opLogical;break;case 13:$l=PXFormulaCombo.opComparison;break;case 14:$l=PXFormulaCombo.opOther;break;case 21:$l=PXFormulaCombo.funConversion;break;case 22:$l=this.funText;break;case 23:$l=PXFormulaCombo.funMath;break;case 24:$l=this.funDateTime;break;case 25:$l=PXFormulaCombo.funProgram;break;case 30:if(this.fieldsRootAutoRefresh)$l=this.getFieldList(30);break;case 31:$l=this.getFieldList(31);break;case 32:$l=this.getFieldList(32);break;case 33:$l=this.stylesList;break;case 50:$l=this.getFieldList(50);break;};if(this.filterBar)this.filterBar.setValue(null);if($l)for(var i=0;i<$l.length;i++)this.addListItem($l[i]);this.panel.text.focus();}};PXFormulaCombo.prototype.addListItem=function($j){var $m=this.panel.list.options;$m[$m.length]=new Option($j,$j,false,false);};PXFormulaCombo.prototype.handleItemClick=function(e){if(e.type=="click"){var $m=__px(this).eventElem(e);if($m)$m.selected=true;return;};var lv=this.panel.list.value,$n=this.panel.tree.selectedNode;if($n&&parseInt($n.value)==26)lv="Report."+lv;this.panel.text.updateValue();var $o=this.panel.text.getSelectedText(),$j=this.panel.text.getValue();if($j===null||$j===undefined)$j="";var $p=this.panel.text.selStart,$q=this.panel.text.selEnd;if(!$o){$j=$j.substring(0,$p)+lv+$j.substring($p);this.panel.text.setValue($j);$q=$p=$p+lv.length;}else{this.panel.text.setValue($j.substring(0,$p)+$j.substring($p).replace($o,lv));$q=$p+lv.length;};this.panel.text.select($p,$q);};PXFormulaCombo.prototype.getFieldList=function($r){this.$H=$r;if(this.fieldsAutoRefresh){var $f=Function.createDelegate(this,this.$J);__px_callback(this).execI(this,this.FieldsRetrievalCallback,$r,$f);return null;};return $r==50?this.substitutionKeys:($r==31?this.internalFields:this.externalFields);};PXFormulaCombo.prototype.$J=function($s,$a){var me=__px_all(this)[$a];if($s&&me){var $t=$s.split(';');for(var i=0;i<$t.length;i++)me.addListItem($t[i]);};if(this.lastNodeValue!=30&&this.lastNodeValue!=31&&this.lastNodeValue!=32&&this.lastNodeValue!=50){var ed=new Object();ed.node=new Object();ed.node.value=this.lastNodeValue;this.handleNodeSelect(this.panel.tree,ed);}};PXFormulaCombo.prototype.getDisplayText=function($j){return $j;};PXFormulaCombo.prototype.$G=function($u,$a){try{var $v=$u.split("&");var $w=__doc(this).getElementById(this.errLabel);if($w!=null){$w.style.display="inline-block";$w.innerHTML=($v[0]!="")?$v[0]:$v[1];$w.title=($v[0]!="")?$v[0]:$v[1];$w.style.color=($v[0]=="")?"black":"red";}}catch(e){}};PXFormulaCombo.prototype.handleFilterBarKeyDown=function($x,ev){var $y=ev.keyCode;if($y==8||$y==46)this.handleFilterBarKeyPress($x,ev);};PXFormulaCombo.prototype.handleFilterBarKeyPress=function($x,ev){if(ev.keyCode&&ev.keyCode!=13){var me=this,$z=this.$K;if($z)clearTimeout($z);this.$K=setTimeout(function(){me.applyFastFilter($x);},200);}};PXFormulaCombo.prototype.handleFilterBarPaste=function(ev){var $x=__px(this).eventObject(ev),me=this;if(this.$K)clearTimeout(this.$K);setTimeout(function(){me.applyFastFilter($x);},0);};PXFormulaCombo.prototype.applyFastFilter=function($x){$x.updateValue();var $A=$x.getValue(),$B=this.panel.list.options;if($A)$A=$A.toLowerCase();for(var i=0;i<$B.length;i++){var $C=$B[i],$j=$C.value;var $D=!$A||($j&&$j.toLowerCase().indexOf($A)>=0);$C.style.display=$D?"":"none";}};



function PXGridProcessing($a,$b,$c){this.px_context=$a.px_context;this.container=$a;this.index=$b;var $d=Function.createDelegate(this,this.$p);__px_callback(this).addHandler($d);};PXGridProcessing.prototype.onLoad=function(){this.syncState();};PXGridProcessing.prototype.syncState=function(){var $e=__px_all(this)[this.container.ID+"_pnlGridProcessing_btnProcess"];var $f=__px_all(this)[this.container.ID+"_pnlGridProcessing_btnProcessAll"];var $g=__px_all(this)[this.container.ID+"_pnlGridProcessing_cmbActionList"];var $h=__px_all(this)[$e.autoCallBack.target];if($h&&$h.getCommandState){var $i=$h.getCommandState(this,$e.autoCallBack.command);this.syncButtonState($e,$i);var $j=$h.getCommandState(this,$f.autoCallBack.command);this.syncButtonState($f,$j);var $k=new PXCommandState($i.getVisible()||$j.getVisible(),$i.getEnabled()||$j.getEnabled());this.syncButtonState($g,$k);}};PXGridProcessing.prototype.syncButtonState=function($l,$m){if(!$l||!$m)return;$l.setEnabled($m.getEnabled());$l.setVisible($m.getVisible());};PXGridProcessing.prototype.$p=function($n,$o){this.syncState();};



function PXGridCombo($a,$b,$c){this.px_context=$a.px_context;};



function PXColoredTextEdit($a,$b,$c){PXColoredTextEdit.initializeBaseA(this,[$a,$b,$c]);};PXColoredTextEdit.__baseType=PXTextEdit;PXColoredTextEdit.prototype.setValue=function(v){var $d="";var $e="";var $f;if(v&&($f=v.indexOf('&'))>-1){$d=v.substring(0,$f);if($f<v.length-1)$e=v.substring($f+1);};this.element.style.backgroundColor=$d?$d:"Window";PXColoredTextEdit.callBase(this,"setValue",[$e]);};



function PXShortcutEdit($a,$b,$c){PXShortcutEdit.initializeBaseA(this,[$a,$b,$c]);};PXShortcutEdit.__baseType=PXTextEdit;PXShortcutEdit.$g=[13,16,17,18,33,34,91,92,];PXShortcutEdit.prototype.isSpecialKey=function($d){return Array.indexOf(PXShortcutEdit.$g,$d)>=0;};PXShortcutEdit.prototype.isNumber=function($d){return $d>=48&&$d<=57;};PXShortcutEdit.prototype.isSymbol=function($d){return $d>=65&&$d<=90;};PXShortcutEdit.prototype.isFunc=function($d){return $d>=112&&$d<=123;};PXShortcutEdit.prototype.onKeyDown=function(e){var $e=e.keyCode;return this.isSpecialKey($e)||this.isNumber($e)||this.isSymbol($e);};PXShortcutEdit.prototype.blockCtrlAlt=function(){return false;};PXShortcutEdit.prototype.onKeyPress=function(e){var $d=e.keyCode?e.keyCode:e.charCode;if(!e.ctrlKey&&!e.shiftKey&&!e.altKey||!($d>=97&&$d<=122)&&!($d>=44&&$d<=63)){__px(this).cancelEvent(e);return;};if(!this.trace){this.trace=new Object();this.trace.ctrl=e.ctrlKey;this.trace.shift=e.shiftKey;this.trace.alt=e.altKey;this.trace.chars=new Array();};if(this.trace){this.trace.chars.push($d);var $f="";if(this.trace.ctrl)$f="Ctrl";if(this.trace.shift){if($f.length>0)$f+=" + ";$f+="Shift";};if(this.trace.alt){if($f.length>0)$f+=" + ";$f+="Alt";};for(var i=0;i<this.trace.chars.length;i++){var c=this.trace.chars[i];$f+=" + "+String.fromCharCode(c).toUpperCase();};this.setValue($f);};return false;};PXShortcutEdit.prototype.onKeyUp=function(e){if(e.keyCode==16||e.keyCode==17||e.keyCode==18){this.trace=null;};return false;};



function PXColorToolBarSelector($a,$b,$c,ei){this.px_context=$a.px_context;PXColorToolBarSelector.initializeBaseA(this,[$a,$b,$c,ei]);var $d=Function.createDelegate(this,this.$h);__px(this).addEventHandler(this.element,"click",$d);__px(this).addEventHandler(this.element,"dbclick",$d);__px(this).addEventHandler(this.element,"mousedown",$d);};PXColorToolBarSelector.__baseType=PXToolBarButton;PXColorToolBarSelector.prototype.getMenu=function(){if(!this.menu){var $e=this.getMenuID();this.menu=__px_cm(this).createControl("PXColorToolBarMenu",$e);if(this.menu){__px_all(this)[$e]=this.menu;this.menu.onLoad(this);var h=Function.createDelegate(this,this.$i);this.menu.events.addEventHandler("deactivate",h);this.menu.events.addEventHandler("itemClick",h);this.menu.linkedButton=this;}};return this.menu;};PXColorToolBarSelector.prototype.setStyle=function(){this.dropPushed=this.getMenu().getVisible();PXColorToolBarSelector.callBase(this,"setStyle",null);};PXColorToolBarSelector.prototype.$h=function(e){switch(e.type){case "mousedown":var $f=new Object(),$g=this.getMenu();$f.button=this;this.owner.fireEvent(1,e,$f);$g.getVisible()?$g.hide2():$g.show2();this.setStyle();break;default:break;}};PXColorToolBarSelector.prototype.$i=function($a,e){switch(e.id){case 0:this.dropPushed=false;this.setStyle();break;case 1:this.hideMenu();break;}};PXColorToolBarSelector.prototype.clearColor=function(){var $g=this.getMenu();if($g)$g.clearColor();};PXColorToolBarSelector.prototype.setColor=function(v){var $g=this.getMenu();if($g)$g.setColor(v);};PXColorToolBarSelector.prototype.hideMenu=function(){var $g=this.getMenu();if($g)$g.hide2();};



function PXColorToolBarMenu($a,$b,$c){this.px_context=$a;this.$p="c";this.elem=$b;this.ID=$b.id;this.highlighted=new Array();this.events=new PXEventList(this,PXColorToolBarMenu.events,null);__px_cm(this).readProperties(this,$c,PXColorToolBarMenu.properties);};PXColorToolBarMenu.properties=[["highlightColor",JSType.String,"#FABC4E"]];PXColorToolBarMenu.events={$deactivate:0,$itemClick:1};PXColorToolBarMenu.prototype.onLoad=function($d){this.owner=$d;var $e=Function.createDelegate(this,this.$q);__px(this).addEventHandler(this.elem,"mouseover",$e);__px(this).addEventHandler(this.elem,"mouseout",$e);__px(this).addEventHandler(this.elem,"dblclick",$e);__px(this).addEventHandler(this.elem,"mousedown",$e);__px(this).addEventHandler(this.elem,"selectstart",$e);};PXColorToolBarMenu.prototype.setActive=function($f){};PXColorToolBarMenu.prototype.getVisible=function(){return this.elem.style.display=='';};PXColorToolBarMenu.prototype.show=function(){};PXColorToolBarMenu.prototype.show2=function(){var $g=this.owner.element;var $h=__px(this).getDropDownPos(this.linkedButton.element,this.elem,2);var $i=$h.left-20;var top=$h.top;this.elem.style.left=$i+'px';this.elem.style.top=top+'px';this.elem.style.display='';};PXColorToolBarMenu.prototype.hide=function(){};PXColorToolBarMenu.prototype.hide2=function(){this.elem.style.display='none';this.events.fireEvent(0,null);};PXColorToolBarMenu.prototype.getSelectedColor=function(){return this.$r;};PXColorToolBarMenu.prototype.$q=function(e){switch(e.type){case "click":case "mousedown":case "dblclick":if(this.$s){var $j=new Object();$j.color=this.$s.style.backgroundColor;if(!__px(this).IsIE)$j.color=__px(this).colorToHex($j.color);this.$t=this.$s;this.clearHighlight();this.hide();this.events.fireEvent(1,$j);};break;case "mouseover":if(this.highlightColor)this.tryHighlight(e);break;case "mouseout":if(this.highlightColor)this.clearHighlight();break;case "selectstart":__px(this).cancelEvent(e);break;}};PXColorToolBarMenu.prototype.tryHighlight=function(e){var $b=this.getHoverElement(e);if($b){this.clearHighlight($b);this.setHighlight($b);}else this.clearHighlight();};PXColorToolBarMenu.prototype.getHoverElement=function(e){var se=__px(this).eventElem(e);var $b=null;while(se&&se!=this.elem){if(se.getAttribute&&se.getAttribute(this.$p)!=null){$b=se;break;};se=se.parentNode;};return $b;};PXColorToolBarMenu.prototype.setHighlight=function(ae){if(ae!=this.$s){var parent=ae.offsetParent?ae.offsetParent:ae.parentNode;ae.ownColor=parent.style.backgroundColor;parent.style.backgroundColor=this.highlightColor;this.$s=ae;var $k=false;for(var i=0;i<this.highlighted.length;i++){if(this.highlighted[i]==ae){$k=true;break;}};if(!$k)this.highlighted.push(ae);}};PXColorToolBarMenu.prototype.clearHighlight=function($b){var ae=null;for(var i=0;i<this.highlighted.length;){var ae=this.highlighted[i];if(ae&&ae!=$b&&ae!=this.$t){var parent=ae.offsetParent?ae.offsetParent:ae.parentNode;if(parent)parent.style.backgroundColor=ae.ownColor;if(ae==this.$s)this.$s=null;this.highlighted.splice(i,1)}else i++;}};PXColorToolBarMenu.prototype.clearColor=function(){this.$t=null;this.clearHighlight();};PXColorToolBarMenu.prototype.setColor=function(v){var $l=function(el){var style=el.currentStyle?el.currentStyle:__win(this).getComputedStyle(el,null);if(style.backgroundColor==v)return el;if(el.childNodes){for(var i=0;i<el.childNodes.length;i++){var $m=el.childNodes[i];if($m&&$m.nodeName!="#text"){var $n=$l($m);if($n)return $n;}}};return null;};var $o=$l(this.elem);if($o){this.$t=$o;this.setHighlight($o);};this.clearHighlight();};



function PXLinkEditor($a,$b,$c,$d){this.ID=$b.id;this.element=$b;PXLinkEditor.initializeBaseA(this,[$a,$b,$c,$d]);__px_cm(this).readProperties(this,$c,PXLinkEditor.properties);this.elemType=__px_cm(this).createControl("PXDropDown",$b.id+"_type");this.elemUrl=__px_cm(this).createControl("PXTextEdit",$b.id+"_url");this.elemArticle=__px_cm(this).createControl("PXTreeSelector",$b.id+"_art");this.elemCaption=__px_cm(this).createControl("PXTextEdit",$b.id+"_capt");var h=Function.createDelegate(this,this.$n);this.elemType.events.addEventHandler("valueChanged",h);this.events=new PXEventList(this,PXLinkEditor.events,null);__px_cm(this).registerRequiresOnLoad(this,this.ID);};PXLinkEditor.__baseType=PXDialog;PXLinkEditor.properties=[["articleUrlPrefix",JSType.String,"Wiki/ShowWiki.aspx?pageid="]];PXLinkEditor.events={$urlSelected:0,$articleSelected:1};PXLinkEditor.prototype.onLoad=function(){var $e='100%';this.elemCaption.element.style.width=$e;this.elemUrl.element.style.width=$e;this.elemArticle.element.style.width=$e;};PXLinkEditor.prototype.onOk=function(){PXLinkEditor.callBase(this,"onOk",null);var $f=new Object();$f.name=this.elemCaption.getValue();if(this.$o()){$f.artId=this.elemArticle.getValue();if($f.artId){$f.url=this.articleUrlPrefix+$f.artId;this.events.fireEvent(1,$f);}}else{$f.url=this.elemUrl.getValue();if($f.url)this.events.fireEvent(0,$f);}};PXLinkEditor.prototype.setCaptionEditable=function(v){this.elemCaption.setEnabled(v);};PXLinkEditor.prototype.$n=function($g,e){var $h=this.$o();this.elemUrl.setVisible(!$h);this.elemArticle.setVisible($h);};PXLinkEditor.prototype.$o=function(){return(this.elemType.selectedIndex==0);};PXLinkEditor.prototype.setType=function($i){this.elemType.setValue($i);var $j=this.$o();this.elemArticle.setVisible($j);this.elemUrl.setVisible(!$j);};PXLinkEditor.prototype.getUrl=function(){return this.$o()?this.elemArticle.getValue():this.elemUrl.getValue();};PXLinkEditor.prototype.setUrl=function($k,$l){if(this.$o()){this.elemArticle.setValue($k);if($l!=null)this.elemArticle.setText($l);}else this.elemUrl.setValue($k);};PXLinkEditor.prototype.getCaption=function(){return this.elemCaption.getValue();};PXLinkEditor.prototype.setCaption=function($m){this.elemCaption.setValue($m);};



function PXImageEditor($a,$b,$c,$d){this.ID=$b.id;this.element=$b;PXImageEditor.initializeBaseA(this,[$a,$b,$c,$d]);__px_cm(this).readProperties(this,$c,PXImageEditor.properties);this.elemType=__px_cm(this).createControl("PXDropDown",$b.id+"_type");this.elemUrl=__px_cm(this).createControl("PXTextEdit",$b.id+"_url");this.elemFile=__px_cm(this).createControl("PXSelector",$b.id+"_file");var h=Function.createDelegate(this,this.$m);this.elemType.events.addEventHandler("valueChanged",h);this.events=new PXEventList(this,PXImageEditor.events,null);__px_cm(this).registerRequiresOnLoad(this,this.ID);};PXImageEditor.__baseType=PXDialog;PXImageEditor.properties=[["getFileUrlPrefix",JSType.String,"~/Frames/GetFile.ashx?fileID="]];PXImageEditor.events={$urlSelected:0,$fileSelected:1};PXImageEditor.prototype.onLoad=function(){var $e='100%';this.elemUrl.element.style.width=$e;this.elemFile.element.style.width=$e;};PXImageEditor.prototype.onOk=function(){PXImageEditor.callBase(this,"onOk",null);if(this.$n()){var $f=new Object();$f.fileId=this.elemFile.getValue();if($f.fileId){$f.url=this.getFileUrlPrefix+$f.fileId;this.events.fireEvent(1,$f);}}else{var $f=new Object();$f.url=this.elemUrl.getValue();if($f.url)this.events.fireEvent(0,$f);}};PXImageEditor.prototype.$m=function($g,e){var $h=this.$n();this.elemUrl.setVisible(!$h);this.elemFile.setVisible($h);};PXImageEditor.prototype.$n=function(){return(this.elemType.selectedIndex==0);};PXImageEditor.prototype.setType=function($i){this.elemType.setValue($i);var $j=this.$n();this.elemFile.setVisible($j);this.elemUrl.setVisible(!$j);};PXImageEditor.prototype.getUrl=function(){return this.$n()?this.elemFile.getValue():this.elemUrl.getValue();};PXImageEditor.prototype.setUrl=function($k,$l){if(this.$n()){this.elemFile.setValue($k);if($l!=null)this.elemFile.setText($l);}else this.elemUrl.setValue($k);};



function PXEmailSelector($a,$b,$c,$d){PXEmailSelector.initializeBaseA(this,[$a,$b,$c,$d]);__px_cm(this).readProperties(this,$c,PXEmailSelector.properties);this.addresses=new PXEmailAddresses();__px_cm(this).registerRequiresOnLoad(this,$b.id);};PXEmailSelector.__baseType=PXSelector;PXEmailSelector.properties=[["allowCustomItems",JSType.Bool,true]];PXEmailSelector.$0l=8;PXEmailSelector.$0m=46;PXEmailSelector.$0n=37;PXEmailSelector.$0o=39;PXEmailSelector.$0p=36;PXEmailSelector.$0q=35;PXEmailSelector.prototype.onLoad=function(){this.$0r();this.$0s();};PXEmailSelector.prototype.setProperties=function($c){var $e=new Object();__px_cm(this).readProperties($e,$c,[["value",JSType.Empty,null]]);if($e.value!=undefined){this.elemText.value="";this.addresses.clear();};PXEmailSelector.callBase(this,"setProperties",[$c]);this.$0s();this.$0t();};PXEmailSelector.prototype.$0s=function($f,v,$g){var $h=new Object();if($g!=undefined){$h.points=new Array();$h.points.push($g);};this.addresses=PXEmailAddresses.parse(v!=undefined?v:this.value,$h);if($f&&this.elemText.value!=$h.str){this.elemText.value=$h.str;};if($f&&this.elemText.value!=this.oldValue){this.$0t();__px_cm(this).notifyOwnerChanged(this);}};PXEmailSelector.prototype.$0r=function(){var $i=Function.createDelegate(this,this.$0u);__px(this).addEventHandler(this.elemText,"keypress",$i);__px(this).addEventHandler(this.elemText,"keyup",$i);__px(this).addEventHandler(this.elemText,"keydown",$i);var $j=Function.createDelegate(this,this.$0v);__px(this).addEventHandler(this.elemText,"mouseup",$j);__px(this).addEventHandler(this.elemText,"select",$j);__px(this).addEventHandler(this.elemText,"focus",$j);__px(this).addEventHandler(this.elemText,"blur",$j);};PXEmailSelector.prototype.$0v=function(e){switch(e.type){case "mouseup":case "select":break;case "focus":if(this.selectOnFocus)this.selectAll();__px_cm(this).notifyOwnerActivate(this);break;case "blur":this.updateValue();break;}};PXEmailSelector.prototype.$0u=function(e){switch(e.type){case "keydown":if((__px(this).IsIE||__px(this).IsSafari)&&(e.keyCode==PXEmailSelector.$0l||e.keyCode==PXEmailSelector.$0m)){this.$0w(e,true);}else if(e.keyCode==114){PXEmailSelector.callBase(this,"handleKeyDown",[e]);};break;case "keypress":this.$0w(e);break;case "keyup":if(e.keyCode>=33&&e.keyCode<=40){};break;}};PXEmailSelector.prototype.$0w=function(e,$k){var $l=__px(this).IsFirefox||$k;var $m=(e.which!=null)?e.which:e.keyCode;if($m||e.keyCode==46)__px_cm(this).notifyOwnerTyping(this);if(!this.allowCustomItems){if($m!=PXEmailSelector.$0p&&$m!=PXEmailSelector.$0q){__px(this).cancelEvent(e);}}};PXEmailSelector.prototype.getValue=function($n){return this.elemText.value;};PXEmailSelector.prototype.setValue=function(v,$o,$p){PXEmailSelector.callBase(this,"setValue",[v,$o,$p]);this.$0t();};PXEmailSelector.prototype.updateValue=function($q,$o){this.$0s(false,this.elemText.value);PXEmailSelector.callBase(this,"updateValue",[$q,$o]);};PXEmailSelector.prototype.onSelect=function($q,$r){var $s=this.$0x(),$t=$r.getCell(this.textField);$s.adjust(this.addresses);$s.setValue(this.addresses,$q,$t?$t.getValue():$q);PXEmailSelector.callBase(this,"onSelect",[$q,$r]);$s.start+=1;$s.end=$s.start;$s.adjust(this.addresses);$s.select();this.$0t();};PXEmailSelector.prototype.$0t=function(v){var $u=v!=undefined?v:this.elemText.value;this.viewState.update("Value",this.oldValue=$u);return $u;};PXEmailSelector.prototype.getCorrectText=function($o,$q){return this.addresses.toString(true);};PXEmailSelector.prototype.getSearchValue=function(){return "";};PXEmailSelector.prototype.$0y=function(){var $s=this.$0x();$s.adjust(this.addresses);$s.select();};PXEmailSelector.prototype.$0x=function(){__doc(this).window=__win(this);var $v=null;try{$v=new PXInputSelection(this.elemText,this);}catch(e){};return $v?$v:new PXEmptyInputSelection();};function PXInputSelection($b,$w){this.owner=$w;this.px_context=$w.px_context;this.$0z=$b;if(__px(this).IsIE){try{var $x=0;var $y=__doc(this).selection.createRange();var r=$y.duplicate();r.move("textedit",-1);while(r.compareEndPoints("StartToStart",$y)<0){if($x++>1000)break;r.moveStart("character",1);};this.start=$x;this.end=$x+$y.text.length;}catch(ex){this.start=0;this.end=0;}}else{this.start=$b.selectionStart;this.end=$b.selectionEnd;}};PXInputSelection.prototype.adjust=function($z,$A,$B){var $C=PXInputSelection.$0A($z,this.start,$A,$B);var $D=PXInputSelection.$0A($z,this.end,$A,$B);if($C.item){this.start=$C.start;if(this.end<$C.end)this.end=$C.end -1;};if($D.item){this.end=$D.end -1;if(this.start>$D.start)this.start=$D.start;}};PXInputSelection.prototype.select=function(){if(__px(this).IsIE){var $E=this.$0z.createTextRange();$E.expand("textedit");$E.collapse(true);$E.moveEnd("character",this.end);$E.moveStart("character",this.start);$E.select();}else{this.$0z.selectionStart=this.start;this.$0z.selectionEnd=this.end;}};PXInputSelection.prototype.toString=function(){var $o=this.$0z.value;return $o.substring(this.start,this.end);};PXInputSelection.prototype.getEditableFragment=function($z,$F){var $v="";switch($F){case "left":var $G;var $H=$z.getIterator();while($H.moveNext()){var $I;if(($I=this.start-$H.current.end)>0&&($G==undefined||$G>$I)){$G=$I;};if($H.current.start<this.start&&$H.current.end>=this.start){$G=-1;break;}};if(!$G)$G=this.start;if($G>-1)$v=this.$0z.value.substring(this.start-$G,this.start);break;case "right":default:throw "NotImplementedException";break;};return $v;};PXInputSelection.prototype.move=function($J,$z,$K){if($J==0)return this;if($J>0)return this.$0B($J,$z,$K);return this.$0C(-1*$J,$z,$K);};PXInputSelection.prototype.$0C=function($J,$z,$K){var $s=new PXInputSelection(this.$0z,this.owner);if(this.isRightToLeft()){$s.start=this.start-$J;if($s.start<0)$s.start=0;else{var $L=PXInputSelection.$0A($z,$s.start);if($L)$s.start=$L.start;};$s.end=$K?this.end:$s.start;}else{$s.end=this.end -$J;if($s.end<0)$s.end=0;else{var $L=PXInputSelection.$0A($z,$s.end);if($L)$s.end=$L.start;};$s.start=$K?this.start:$s.end;};$s.adjust($z);return $s;};PXInputSelection.prototype.$0B=function($J,$z,$K){var $s=new PXInputSelection(this.$0z,this.owner);var $M=this.$0z.value.length;if(this.isRightToLeft()){$s.start=this.start+$J;if($s.start>$M)$s.start=$M;else{var $L=PXInputSelection.$0A($z,$s.start);if($L)$s.start=$L.end;};$s.end=$K?this.end:$s.start;}else{$s.end=this.end +$J;if($s.end>$M)$s.end=$M;else{var $L=PXInputSelection.$0A($z,$s.end);if($L)$s.end=$L.end;};$s.start=$K?this.start:$s.end;};$s.adjust($z);return $s;};PXInputSelection.prototype.remove=function($z,$B){var $s=new PXInputSelection(this.$0z,this.owner);$s.adjust($z,true,$B);var $q=$s.$0z.value;var $N=$s.isCollapsed();this.$0D($z,$B);var $O=0;var $P=$s.start;if($N){if($B)$P--;$P=Math.max(0,$P);};$O+=$P-$s.start;var $Q=$q.substring(0,$P);var $R=$s.end;if($N){if(!$B)$R++;$R=Math.min($q.length,$R);};$O+=$s.end -$R;$z.move($s.start,$O);var $S=$q.substring($R+($q[$R]==';'?1:0));$s.$0z.value=$Q+$S;$s.end=$P;$s.start=$P;return $s;};PXInputSelection.prototype.$0D=function($z,$B){this.$0E($z,function($T,$U){return $B?$T<$U:$T<=$U;},function($V,end){return $B?$V>=end:$V>end;},function($W,$U,end){return $U;});};PXInputSelection.prototype.$0F=function($z,$q,$o){var $X;this.$0E($z,function($T,$U){return $T<=$U;},function($V,end){return $V>=end;},function($W,$U,end){$X=$W.add($U,$q,$o);return $X.end;});return PXEmailAddresses.getDisplayName($X);};PXInputSelection.prototype.$0E=function($z,$Y,$Z,$00){var $01=new Array();var $02=new Array();var $H=$z.getIterator();while($H.moveNext()){if($Y($H.current.end,this.start)){$01.push($H.current);}else if($Z($H.current.start,this.end)){$02.push($H.current);}};$z.clear();for(var i=0;i<$01.length;i++){var $03=$01[i];$z.add($03.start,$03.value,$03.text);};var $T=$00($z,this.start,this.end);var $G=$T-(!this.isCollapsed()&&this.$0z.value[this.end]==';'?this.end +1:this.end);for(var i=0;i<$02.length;i++){var $03=$02[i];$z.add($03.start+$G,$03.value,$03.text);}};PXInputSelection.prototype.isRightToLeft=function(){return this.start>this.end;};PXInputSelection.prototype.setValue=function($z,$q,$o){if(!$q||!$o)return;var $04=this.$0F($z,$q,$o);var $q=this.$0z.value;var $Q=$q.substring(0,this.start);var $S=$q.substring(this.end +($q[this.end]==';'?1:0));this.$0z.value=$Q+$04+$S;};PXInputSelection.$0A=function($z,$05,$A,$B){var $v=new Object();$v.start=$05;$v.end=$05;$v.item=null;var $H=$z.getIterator();while($H.moveNext()){if(($H.current.start<$05||($A&&!$B&&$H.current.start==$05))&&($H.current.end>$05||($A&&$B&&$H.current.end==$05))){$v.start=$H.current.start;$v.end=$H.current.end;$v.item=$H.current;break;}};return $v;};PXInputSelection.prototype.isCollapsed=function(){return this.start==this.end;};PXInputSelection.prototype.insertChar=function(c,$z){var $q=this.$0z.value;var $s=new PXInputSelection(this.$0z,this.owner);if(!$s.isCollapsed()){$q=$q.substring(0,$s.start)+$q.substring($s.end +($q[$s.end]==';'?1:0));$s.$0D($z,false);$s.end=$s.start;};$z.move($s.start,+1);$s.$0z.value=$q.substring(0,$s.start)+c+$q.substring($s.start);$s.end++;$s.start++;$s.select();};function PXEmptyInputSelection(){this.start=-1;this.end=-1;};PXEmptyInputSelection.prototype.adjust=function($z,$A,$B){};PXEmptyInputSelection.prototype.select=function(){};PXEmptyInputSelection.prototype.toString=function(){return "";};PXEmptyInputSelection.prototype.getEditableFragment=function($z,$F){return "";};PXEmptyInputSelection.prototype.move=function($J,$z,$K){return this;};PXEmptyInputSelection.prototype.remove=function($z,$B){return this;};PXEmptyInputSelection.prototype.isRightToLeft=function(){return false;};PXEmptyInputSelection.prototype.setValue=function($z,$q,$o){};PXEmptyInputSelection.prototype.isCollapsed=function(){return true;};PXEmptyInputSelection.prototype.insertChar=function(c,$z){};function PXEmailAddresses(){this.$0G=new Array();this.$0H();this.$0I=false;};PXEmailAddresses.prototype.$0H=function(){this.$0G.syncObj=new Object();};PXEmailAddresses.prototype.$0J=function(){if(!this.$0I){var length=this.$0G.length-1;for(var i=0;i<length;i++)for(var j=0;j<length;j++){var nJ=j+1;var $06=this.$0G[j];var $07=this.$0G[nJ];if($06.start>$07.start){var $08=$07;this.$0G[nJ]=$06;this.$0G[j]=$08;}};this.$0I=true;}};PXEmailAddresses.prototype.add=function($U,$q,$o){if($o&&$o[0]!='"')$o='"'+$o+'"';var $03=new Object();$03.start=$U;$03.end=$U+PXEmailAddresses.$0K($q,$o).length;$03.value=$q;$03.text=$o;this.$0G.push($03);this.$0H();this.$0I=false;return $03;};PXEmailAddresses.prototype.remove=function($03){for(var i=0;i<this.$0G.length;i++)if(this.$0G[i]==$03){this.$0G.splice(i,1);this.$0H();break;}};PXEmailAddresses.getDisplayName=function($03){var $o=$03.text?$03.text.replace(/"/g,""):"";return PXEmailAddresses.$0K($03.value,$o);};PXEmailAddresses.$0K=function($q,$o){if(!$o)return $q+';';if($o[0]!='"')$o='"'+$o+'"';return $o+' <'+$q+'>;';};PXEmailAddresses.prototype.toString=function($09){this.$0J();var $v="";for(var i=0;i<this.$0G.length;i++){if($v.length>0)$v+=" ";var $03=this.$0G[i];if($09&&$03.text)$v+=$03.text+" <";$v+=$03.value;if($09&&$03.text)$v+=">";$v+=";";};return $v;};PXEmailAddresses.prototype.getIterator=function(){this.$0J();return new PXIterator(this.$0G);};PXEmailAddresses.prototype.clear=function(){this.$0G=new Array();this.$0H();this.$0I=false;};PXEmailAddresses.prototype.getItemLength=function($03){var $v=$03.end -$03.start;return $v<0?-1*$v:$v;};PXEmailAddresses.parse=function($0a,$h){var $0b=new PXEmailAddresses();if($h)$h.str="";if($0a){var $0c="",$05=0,$0d=$0a.split(';');for(var i=0;i<$0d.length;i++){var $X=null,$03=$0d[i].trim();if(!$03)continue;var $0e,$0f;if(($0e=$03.indexOf('<'))>-1&&($0f=$03.indexOf('>',$0e))>-1){var $0g=0;while($0g<$0e&&$03[$0g]==' '){$0g++;};$X=$0b.add($05,$03.substring($0e+1,$0f),$03.substring($0g,$0e).trim());}else if($h.points&&PXEmailAddresses.$0L($h.points,$05,$05+$03.length)){$X=$0b.add($05,$03,$03);}else if($03.indexOf('@')>0){$03=$03.replace(/\s/g,"");$X=$0b.add($05,$03,$03.substring(0,$03.indexOf('@')));};var $0h=$X?PXEmailAddresses.getDisplayName($X):($03.replace(/"/g,""));$0c+=$0h;$05+=$0h.length+1;};if($h)$h.str=$0c;};return $0b;};PXEmailAddresses.$0L=function($0i,$U,end){for(var i=0;i<$0i.length;i++){var $03=$0i[i];if($03>=$U&&$03<=end)return true;};return false;};PXEmailAddresses.prototype.move=function($05,$J){if($J==0)return;var $H=this.getIterator();while($H.moveNext()){if($H.current.end>$05)$H.current.end +=$J;if($H.current.start>=$05)$H.current.start+=$J;}};function PXIterator($0j){if(!$0j)throw "Argument is null";this.$0G=$0j;this.$0M=$0j.syncObj;this.reset();};PXIterator.prototype.moveNext=function(){if(this.$0M!=this.$0G.syncObj)throw "Collection was changed.";var $0k=this.$0N+1;if($0k>=this.$0G.length)return false;this.$0N=$0k;this.current=this.$0G[$0k];return true;};PXIterator.prototype.reset=function(){this.$0N=-1;this.current=null;};



function PXRange($a,$b){this.doc=$a;this.range=$b;};PXRange.create=function($a){if(px.IsIE)return new PXIERange($a,$a.body.createTextRange());return new PXFFRange($a,$a.createRange());};PXRange.fromSelection=function($a){if(px.IsIE)return new PXIERange($a,$a.selection.createRange());var $c=$a.window.getSelection();if($c.rangeCount>0)return new PXFFRange($a,$c.getRangeAt(0));return new PXEmptyRange($a);};function PXIERange($a,$b){PXIERange.initializeBaseA(this,[$a,$b]);this.$K();};PXIERange.__baseType=PXRange;PXIERange.prototype.getStartContainer=function(){return this.$L;};PXIERange.prototype.getStartOffset=function(){return this.$M;};PXIERange.prototype.getEndContainer=function(){return this.$N;};PXIERange.prototype.getEndOffset=function(){return this.$O;};PXIERange.prototype.$K=function(){var $d=this.range.duplicate();$d.collapse(true);var $e=this.$P($d);this.$L=$e.container;this.$M=$e.offset;var $f=this.range.duplicate();$f.collapse(false);$e=this.$P($f);this.$N=$e.container;this.$O=$e.offset;};PXIERange.prototype.$P=function($g){var element=$g.parentElement();var $b=this.doc.body.createTextRange();$b.moveToElementText(element);$b.setEndPoint("EndToStart",$g);var $h=0;for(var i=0;i<$b.text.length;i++){var $i=$b.text.charCodeAt(i);if($i!=10&&$i!=13)$h++;};var forward=true;var $j=null;if($h<element.innerText.length/2){forward=true;$j=element.firstChild;}else{forward=false;$j=element.lastChild;$b.moveToElementText(element);$b.setEndPoint("StartToStart",$g);$h=$b.text.length;};var $k=new Object();while($j&&!$k.container&&!$k.offset){switch($j.nodeType){case 3:var $l=$j.data.length;if($l<$h){var $m=$h-$l;if(forward)$b.moveStart("character",$m);else $b.moveEnd("character",-$m);$h=$m;}else{if(forward){$k.container=$j;$k.offset=$h;}else{$k.container=$j;$k.offset=$l-$h;}};break;case 1:var $l=$j.innerText.length;if(forward)$b.moveStart("character",$l);else $b.moveEnd("character",-$l);$h=$h-$l;break;};if(forward)$j=$j.nextSibling;else $j=$j.previousSibling;};if(!$k.container)$k.container=element;if(!$k.offset)$k.offset=0;return $k;};PXIERange.prototype.select=function(){this.range.select();};PXIERange.prototype.selectNode=function($j){var $n=function($j){if(!$j.parentNode)return null;var $o=0;var $p=$j.previousSibling;while($p){$o++;$p=$p.previousSibling;};return $o;};this.setStart($j.parentNode,$n($j));this.setEnd($j.parentNode,$n($j)+1);};PXIERange.prototype.selectNodeContents=function($j){this.setStart($j,0);if($j.nodeType==3)this.setEnd($j,$j.data.length);else this.setEnd($j,$j.childNodes.length);};PXIERange.prototype.toString=function(){this.range.text;};PXIERange.prototype.isEqual=function($q){return this.doc==$q.doc&&this.range.isEqual($q.range);};PXIERange.prototype.clone=function(){return new PXIERange(this.doc,this.range.duplicate());};PXIERange.prototype.$Q=function(){var df=this.doc.createDocumentFragment();var $r=function($s,$t,$u){var $v=$t;while($v){if($v==$s)return true;else if($v==$u)return false;else $v=$v.parentNode;};return false;};var $w=null;if(this.$L==null||this.$N==null){$w=null;}else if(this.$L==this.$N){$w=this.$L;}else{var $w=this.$L;while($w){if($r($w,this.$N))break;else $w=$w.parentNode;}};if($w.nodeType==3){df.appendChild(this.doc.createTextNode(this.range.text));return df;};var $x=this.$L;if(this.$L.nodeType!=3)$x=this.$L.childNodes[this.$M];var $y=this.$N;if(this.$N.nodeType!=3)$y=this.$N.childNodes[this.$O-1];if($x==$y){df.appendChild($x.cloneNode(true));return df;};var $z=$w.firstChild;var parent=null;var $A;while($z){if(!parent){if($r($z,$x,$w)){parent=df;}else{$z=$z.nextSibling;continue;}};if($z==$x&&this.$L.nodeType==3){$B=this.$L.data.substring(this.$M);parent.appendChild(this.doc.createTextNode($B));}else if($z==$y){if(this.$N.nodeType==3){$B=this.$N.data.substring(0,this.$O);parent.appendChild(this.doc.createTextNode($B));}else parent.appendChild($y.cloneNode(false));break;}else{$A=$z.cloneNode(false);parent.appendChild($A);};if($z.firstChild){parent=$A;$z=$z.firstChild;}else if($z.nextSibling){$z=$z.nextSibling;}else while($z){if($z.parentNode){parent=parent.parentNode;$z=$z.parentNode;if($z.nextSibling){$z=$z.nextSibling;break;}}else $z=null;}};return df;};PXIERange.prototype.surroundContents=function($j){var $C=this.$Q();this.$N=this.$L;this.$O=this.$M;$j.appendChild($C);if(this.$L.nodeType==3){this.$L.splitText(this.$M);this.$L.parentNode.insertBefore($j,this.$L.nextSibling);this.setStart(this.$L,this.$M);}else{var $D=this.$L.parentNode;if(this.$L.childNodes.length==this.$M){$D.appendChild($j);}else{this.$L.insertBefore($j,this.$L.childNodes[this.$M]);this.setStart(this.$L,this.$M+1);}};return $C;};PXIERange.prototype.isCollapsed=function(){return this.$L==this.$N&&this.$M==this.$O;};PXIERange.prototype.setStart=function($j,$E){var $w=$j;if($j.nodeType==3||$j.nodeType==8||$j.nodeType==4){$w=$w.parentNode;};var $F=this.range.duplicate();$F.moveToElementText($w);$F.collapse(true);$F.move('Character',this.$R($j,$E));this.range.setEndPoint('StartToStart',$F);this.$L=$j;this.$M=$E;if(this.$N==null&&this.$O==null){this.$N=$j;this.$O=$E;}};PXIERange.prototype.$R=function($x,$G){var $j,$H;if($x.nodeType==3){$H=$G;$j=$x.previousSibling;}else if($x.nodeType==1){$H=0;if($G>0)$j=$x.childNodes[$G-1];else return 0;}else{return 0;}while($j){var $l=0;if($j.nodeType==1){$l=$j.innerText.length;switch($j.nodeName.toLowerCase()){case 'img':case 'br':case 'hr':$l=1;break;};switch($j.nodeName.toLowerCase()){case 'p':case 'div':case 'h1':case 'h2':case 'h3':case 'h4':case 'h5':case 'h6':case 'pre':$l++;break;}}else if($j.nodeType==3){$l=$j.data.length;};$H+=$l;$j=$j.previousSibling;};return $H;};PXIERange.prototype.setEnd=function($j,$E){var $F=this.range.duplicate();$F.collapse(true);var $w=$j;if($j.nodeType==3||$j.nodeType==8||$j.nodeType==4){$w=$w.parentNode;};$F=this.range.duplicate();$F.moveToElementText($w);$F.collapse(true);$F.move('Character',this.$R($j,$E));this.range.setEndPoint('EndToEnd',$F);this.$N=$j;this.$O=$E;if(this.$L==null&&this.$M==null){this.$L=$j;this.$M=$E;}};PXIERange.prototype.selectTextElem=function($I){this.range.moveToElementText($I);this.range.move("character",0);};PXIERange.prototype.collapse=function($J){this.range.collapse(!$J);};PXIERange.prototype.deleteContents=function(){this.range.pasteHTML("");return;};function PXFFRange($a,$b){PXFFRange.initializeBaseA(this,[$a,$b]);this.$S=$a.window;};PXFFRange.__baseType=PXRange;PXFFRange.prototype.getStartContainer=function(){return this.range.startContainer;};PXFFRange.prototype.getStartOffset=function(){return this.range.startOffset;};PXFFRange.prototype.getEndContainer=function(){return this.range.endContainer;};PXFFRange.prototype.getEndOffset=function(){return this.range.endOffset;};PXFFRange.prototype.select=function(){if(!this.$S)return;var $c=this.$S.getSelection();$c.removeAllRanges();$c.addRange(this.range);};PXFFRange.prototype.selectNode=function($j){this.range.selectNode($j);};PXFFRange.prototype.selectNodeContents=function($j){this.range.selectNodeContents($j);};PXFFRange.prototype.toString=function(){this.range.toString();};PXFFRange.prototype.isEqual=function($q){return this.doc==$q.doc&&this.range.compareBoundaryPoints(0,$q.range)==0&&this.range.compareBoundaryPoints(2,$q.range)==0;};PXFFRange.prototype.clone=function(){return new PXFFRange(this.doc,this.range.cloneRange());};PXFFRange.prototype.surroundContents=function($j){this.range.surroundContents($j);return $j;};PXFFRange.prototype.isCollapsed=function(){return this.range.collapsed;};PXFFRange.prototype.setStart=function($j,$E){return this.range.setStart($j,$E);};PXFFRange.prototype.setEnd=function($j,$E){return this.range.setEnd($j,$E);};PXFFRange.prototype.selectTextElem=function($I){this.range.selectNode($I);};PXFFRange.prototype.collapse=function(){this.range.collapse();};PXFFRange.prototype.deleteContents=function(){this.range.deleteContents();};function PXEmptyRange($a){this.emptyNode=new Object();this.emptyNode.nodeValue="";this.emptyNode.nodeType=3;this.emptyNode.nodeName="#text";this.emptyNode.parrentNode=$a.body;};PXEmptyRange.__baseType=PXRange;PXEmptyRange.prototype.getStartContainer=function(){return this.emptyNode;};PXEmptyRange.prototype.getStartOffset=function(){return 0;};PXEmptyRange.prototype.getEndContainer=function(){return this.emptyNode;};PXEmptyRange.prototype.getEndOffset=function(){return 0;};PXEmptyRange.prototype.select=function(){};PXEmptyRange.prototype.selectNode=function($j){};PXEmptyRange.prototype.selectNodeContents=function($j){};PXEmptyRange.prototype.toString=function(){return this.emptyNode.nodeValue;};PXEmptyRange.prototype.isEqual=function($q){return true;};PXEmptyRange.prototype.clone=function(){return this;};PXEmptyRange.prototype.surroundContents=function($j){return $j;};PXEmptyRange.prototype.isCollapsed=function(){return true;};PXEmptyRange.prototype.setStart=function($j,$E){return null;};PXEmptyRange.prototype.setEnd=function($j,$E){return null;};PXEmptyRange.prototype.selectTextElem=function($I){};PXEmptyRange.prototype.collapse=function(){};PXEmptyRange.prototype.deleteContents=function(){};



function AutomationDebugToolBarItem($a,$b,$c){this.px_context=$a;this.element=$b;this.ID=$b.id;this.callbackCmd=new Object();this.parasiteHander=Function.createDelegate(this,this.$k);__px_cm(this).registerRequiresOnLoad(this,$b.id);};AutomationDebugToolBarItem.prototype.onLoad=function(){__px_callback(this).addHandler(this.parasiteHander);};AutomationDebugToolBarItem.prototype.setText=function($d){this.element.innerHTML=$d;};AutomationDebugToolBarItem.prototype.$k=function($a,$e){if(!$e){try{if($a.result){var $f=new PXXmlDoc("",$a.result);var $g=$f.xmlDoc.getElementsByTagName(this.ID);if($g&&$g.length>0){var $h="Step: Unknown";for(var i=0;i<$g.length;i++){var $i=$g[i];if($i.getAttribute){var $j=$i.getAttribute("text");if($j){$h=$j;break;}}};this.setText($h);}}}catch(e){}}};



function PXLoadTemplatePanel($a,$b,$c,$d){this.ID=$b.id;this.element=$b;PXLoadTemplatePanel.initializeBaseA(this,[$a,$b,$c,$d]);__px_cm(this).readProperties(this,$c,PXLoadTemplatePanel.properties);this.events=new PXEventList(this,PXLoadTemplatePanel.events,null);this.handler=Function.createDelegate(this,this.$m);this.elemArticle=__px_cm(this).createControl("PXSelector",$b.id+"_notification");};PXLoadTemplatePanel.PostDataMode_Page=3;PXLoadTemplatePanel.RepaintMode_None=0;PXLoadTemplatePanel.__baseType=PXDialog;PXLoadTemplatePanel.properties=[["command",JSType.String,null],["repaintControlsIDs",JSType.String,null]];PXLoadTemplatePanel.events={$templateLoaded:0};PXLoadTemplatePanel.prototype.onOk=function(){var $e=this.elemArticle.getValue();if($e){var $f=__px_callback(this).createCommand(this.command,true,PXLoadTemplatePanel.RepaintMode_None,true,PXLoadTemplatePanel.PostDataMode_Page);$f.sendSettings=true;if(this.repaintControlsIDs)$f.repaintControlsIDs=this.repaintControlsIDs;__px_callback(this).execI(this,$f,$e,this.handler);}};PXLoadTemplatePanel.prototype.$m=function($g,$a){var $h;if($g&&($h=(new PXXmlDoc("",$g)).rootNode)&&$h.childNodes.length>0){var $i=new Object();for(var $j=0;$j<$h.childNodes.length;$j++){var $k=$h.childNodes[$j];if($k.childNodes.length>0){var $l=$k.childNodes[0].nodeValue;switch($k.tagName){case "subject":$i.subject=$l;break;case "style":$i.style=$l;break;case "content":$i.content=$l;break;}}};this.events.fireEvent(0,$i);};this.hide();};



function PXParameterPanel($a,$b,$c,$d){this.ID=$b.id;this.element=$b;PXParameterPanel.initializeBaseA(this,[$a,$b,$c,$d]);this.events=new PXEventList(this,PXParameterPanel.events,null);this.handler=Function.createDelegate(this,this.$h);this.tree=__px_cm(this).createControl("PXTreeView",$b.id+"_phTreeID");__px_cm(this).registerRequiresOnLoad(this,this.ID);};PXParameterPanel.Text=1;PXParameterPanel.NodeImage=2;PXParameterPanel.__baseType=PXDialog;PXParameterPanel.events={$parameterSelected:0};PXParameterPanel.prototype.onLoad=function(e){var $e=Function.createDelegate(this,this.$i);this.tree.events.addEventHandler("nodeClick",$e);};PXParameterPanel.prototype.onOk=function(){PXParameterPanel.callBase(this,"onOk",null);this.$j();};PXParameterPanel.prototype.$i=function($f,ev){if(ev.event.clickCount==2&&(ev.area==PXParameterPanel.Text||ev.area==PXParameterPanel.NodeImage)){PXParameterPanel.callBase(this,"onOk",null);this.$j();}};PXParameterPanel.prototype.$j=function(){if(this.tree.selectedNode!=null&&this.tree.selectedNode.value){var $g=new Object();$g.value=this.tree.selectedNode.value;this.events.fireEvent(0,$g);}};



function PXNavigateButtonEdit($a,$b,$c,$d){PXNavigateButtonEdit.initializeBaseA(this,[$a,$b,$c,$d]);__px(this).setEnabled(this.elemText,false);__px_cm(this).repaintEditState(this);if(this.commandSourceID&&!this.autoPostBack)__px_cm(this).registerRequiresOnLoad(this,$b.id);};PXNavigateButtonEdit.__baseType=PXButtonEdit;PXNavigateButtonEdit.prototype.onLoad=function(){var $e=__px_all(this)[this.commandSourceID];if(this.commandName&&$e&&$e.registerCommandControl)$e.registerCommandControl(this,this.commandName);};PXNavigateButtonEdit.prototype.isButtonEnabled=function(){var $e=__px_all(this)[this.commandSourceID];if(this.commandName&&$e)return $e.getCommandState(this,this.commandName).getEnabled();return true;};PXNavigateButtonEdit.prototype.getEnabled=function(){return this.isButtonEnabled();};PXNavigateButtonEdit.prototype.setEnabled=function($f){};PXNavigateButtonEdit.prototype.commandStateCallback=function($g,$h){this.setButtonStyle($g.getEnabled());};



function PXRefNoteSelector($a,$b,$c,$d){PXRefNoteSelector.initializeBaseA(this,[$a,$b,$c,$d]);__px_cm(this).readProperties(this,$c,PXRefNoteSelector.properties);this.elemFocus=this.getTextElem();this.elemLookup=__px(this).elemByID($b.id+"_btnLookup");this.elemEdit=__px(this).elemByID($b.id+"_btnEdit");this.lookupCell=this.elemLookup.parentNode;this.editCell=this.elemEdit.parentNode;this.editorPanelID=$b.id+"_editorPanel";this.noteIDSelectorID=$b.id+"_editorPanel_frm_edID";this.typeDropDownID=$b.id+"_editorPanel_frm_edType";this.btnLookup=this.initializeButton(this.lookupCell,this.elemLookup,this.lookupImages,this.lookupCommandName,this.lookupCommandSourceID);this.btnLookup.popupPanel=this.editorPanelID;this.btnEdit=this.initializeButton(this.editCell,this.elemEdit,this.editImages,this.editCommandName,this.editCommandSourceID);__px(this).setEnabled(this.elemText,false);__px_cm(this).repaintEditState(this);__px_cm(this).registerRequiresOnLoad(this,$b.id);if(__px(this).isRTL())try{this.$z=this.adjustTextSize();}catch(ex){}};PXRefNoteSelector.__baseType=PXTextEdit;PXRefNoteSelector.properties=[["bindingContainer",JSType.String,null],["lookupImages",JSType.Object,null],["editImages",JSType.Object,null],["lookupCommandSourceID",JSType.String,""],["lookupCommandName",JSType.String,""],["editCommandSourceID",JSType.String,""],["editCommandName",JSType.String,""]];PXRefNoteSelector.prototype.onLoad=function(){this.editorPanel=__px_all(this)[this.editorPanelID];this.attachEventHandlers();this.btnLookup.onLoad();this.btnEdit.onLoad();this.btnLookup.setButtonStyle();this.btnEdit.setButtonStyle();};PXRefNoteSelector.prototype.initializeButton=function($e,$f,$g,$h,$i){var $j=new Object();$j.cell=$e;$j.elem=$f;$j.images=$g;$j.command=$h;$j.sourceId=$i;$j.px_context=this.px_context;$j.onLoad=function(){this.cell.obj=$j;var $k;if($h&&$i&&($k=__px_all(this)[$i])&&$k.registerCommandControl)$k.registerCommandControl(this,$h);};$j.getEnabled=function(){var $k;if($h&&$i&&($k=__px_all(this)[$i]))return $k.getCommandState(this,$h).getEnabled();return true;};$j.setButtonStyle=function(){var im=this.images;var $l,$m,$n=new Array();if(!this.getEnabled()){if(im)$l=im.disabled;}else if(this.$A){if(im)$l=im.pushed;}else if(this.$B){if(im)$l=im.hover;};if(this.elem&&im)__px_cm(this).repaintImage(this.elem,$l?$l:im.normal);};$j.handleButtonEvents=function(e){if(this.getEnabled()){switch(e.type){case "mouseover":this.$B=true;this.setButtonStyle();break;case "mouseout":this.$B=false;this.setButtonStyle();break;case "mousedown":this.$A=true;this.setButtonStyle();this.onButtonClick(e);__px(this).cancelEvent(e,false);break;case "mouseup":this.$A=false;this.setButtonStyle();break;}}};$j.onButtonClick=function(e){this.$A=false;this.setButtonStyle();if($i&&$h){var $k=__px_all(this)[$i];if($k&&$k.executeCommand){$k.events.addEventHandler("commandPerformed",this.commandPerformedHandler);$k.sourceEvent=e;var st=new Object();st.commitChanges=true;st.sendSettings=true;$k.executeCommand($h,null,null,st);return true;}};this.tryOpenPanel();return false;};$j.tryOpenPanel=function(){if(this.popupPanel){var $o=__px_all(this)[this.popupPanel];if($o){if(!$o.getVisible()){$o.show();var $p=__px(this).getElemLeftPos(this.cell);var top=__px(this).getElemTopPos(this.cell);$o.element.style.left=$p+"px";$o.element.style.top=(top+this.cell.offsetHeight)+"px";}else $o.hide();return true;}}};$j.handleCommandPerformed=function(e){var $k=__px_all(this)[e.ID];$k.events.removeEventHandler("commandPerformed",this.commandPerformedHandler);this.tryOpenPanel();};$j.commandPerformedHandler=Function.createDelegate($j,$j.handleCommandPerformed);return $j;};PXRefNoteSelector.prototype.attachEventHandlers=function(){if(this.btnLookup&&this.btnLookup.cell){var bh=Function.createDelegate(this.btnLookup,this.btnLookup.handleButtonEvents);var c=this.btnLookup.cell;__px(this).addEventHandler(c,"mousedown",bh);__px(this).addEventHandler(c,"mouseup",bh);__px(this).addEventHandler(c,"mouseover",bh);__px(this).addEventHandler(c,"mouseout",bh);};if(this.btnEdit&&this.btnEdit.cell){var bh=Function.createDelegate(this.btnEdit,this.btnEdit.handleButtonEvents);var c=this.btnEdit.cell;__px(this).addEventHandler(c,"mousedown",bh);__px(this).addEventHandler(c,"mouseup",bh);__px(this).addEventHandler(c,"mouseover",bh);__px(this).addEventHandler(c,"mouseout",bh);};if(!this.editorHideHandler)this.editorHideHandler=Function.createDelegate(this,this.handleEditorHide);if(this.editorPanel)this.editorPanel.events.addEventHandler("afterHide",this.editorHideHandler);};PXRefNoteSelector.prototype.detachEventHandlers=function(){var th=PXRefNoteSelector.handleEvents;__px_cm(this).removeBaseHandlers(this.elemText,th);__px(this).removeEventHandler(this.elemText,"beforepaste",th,false);__px(this).removeEventHandler(this.elemText,"paste",th,false);var bh=PXRefNoteSelector.handleButtonEvents;if(this.lookupCell){__px(this).removeEventHandler(this.lookupCell,"mousedown",bh);__px(this).removeEventHandler(this.lookupCell,"mouseup",bh);__px(this).removeEventHandler(this.lookupCell,"mouseover",bh);__px(this).removeEventHandler(this.lookupCell,"mouseout",bh);};if(this.editCell){__px(this).removeEventHandler(this.editCell,"mousedown",bh);__px(this).removeEventHandler(this.editCell,"mouseup",bh);__px(this).removeEventHandler(this.editCell,"mouseover",bh);__px(this).removeEventHandler(this.editCell,"mouseout",bh);};if(this.editorPanel&&this.editorHideHandler)this.editorPanel.events.removeEventHandler("afterHide",this.editorHideHandler);};PXRefNoteSelector.prototype.handleEditorHide=function(e){var $q,dd;if(e.dialogResult==1&&($q=__px_all(this)[this.noteIDSelectorID])&&(dd=__px_all(this)[this.typeDropDownID])){var $r=$q.getValue();if($r)this.viewState.update("NoteID",$r);else this.viewState.remove("NoteID");var $s=dd.getDisplayText(dd.getValue());__px_cm(this).notifyOwnerChanged(this);var $t=__px_all(this)[this.bindingContainer];if($t){$t.saveRow();}}};PXRefNoteSelector.prototype.setSize=function($u,$v){var w=parseInt($u),h=parseInt($v);var et=this.elemText;var el=this.elemLookup;var ee=this.elemEdit;var c2=this.btnLookupCell;var c3=this.btnEditCell;var $w=__px(this).getStyleWidth(et,$u-c2.offsetWidth-c3.offsetWidth);et.style.width=(($w>0)?$w:1)+"px";et.style.height=__px(this).getStyleHeight(et,h)+"px";if(el)el.style.height=__px(this).getStyleHeight(el,h)+"px";if(ee)ee.style.height=__px(this).getStyleHeight(ee,h)+"px";this.element.style.width=w+"px";this.element.style.height=h+"px";};PXRefNoteSelector.prototype.adjustTextSize=function(){var c1=this.elemText.parentNode;var c2=this.btnLookupCell;var c3=this.btnEditCell;var $w=this.element.clientWidth;$w-=c2.offsetWidth-c3.offsetWidth+(c1.offsetWidth-__px(this).getStyleWidth(c1));this.elemText.style.width=__px(this).getStyleWidth(this.elemText,$w)+"px";};PXRefNoteSelector.prototype.getEnabled=function(){return this.btnLookup?this.btnLookup.getEnabled():true;};PXRefNoteSelector.prototype.setEnabled=function($x){};PXRefNoteSelector.prototype.getTextElem=function(){var $y=__px(this).elemByID(this.element.id+"_text");return $y?$y:this.element;};PXRefNoteSelector.prototype.onFocus=function(e){if(!this.$z){this.adjustTextSize();this.$z=true;}};



function PXDynamicSelector($a,$b,$c,$d){PXDynamicSelector.initializeBaseA(this,[$a,$b,$c,$d]);};PXDynamicSelector.__baseType=PXSelector;PXDynamicSelector.callbackProps=[["dataKey",JSType.Empty,"",PXSelectorBase.convertKey],["valueField",JSType.String,""],["textField",JSType.String,""]];PXDynamicSelector.prototype.setProperties=function($c){PXDynamicSelector.callBase(this,"setProperties",[$c]);__px_cm(this).readProperties(this,$c,PXDynamicSelector.callbackProps);};


﻿function PXCurrencyRate($a,$b,$c){this.ID=$b.id;this.element=$b;this.px_context=$a;__px_cm(this).readProperties(this,$c,PXCurrencyRate.properties);__px_cm(this).registerRequiresOnLoad(this,$b.id);__px_cm(this).setStackElements(this);};PXCurrencyRate.properties=[["decimals",JSType.Int,10]];PXCurrencyRate.callbackProps=[["rate",JSType.Float,0.0],["viewCury",JSType.String,""],["viewBase",JSType.String,""]];PXCurrencyRate.prototype.setProperties=function($c){__px_cm(this).readProperties(this,$c,PXCurrencyRate.callbackProps);this.setRateText();};PXCurrencyRate.prototype.setRateText=function(){if(this.btnRate&&this.rate!=null){var $d=this.decimals?this.decimals:"";var $e=this.rate.format("f"+$d,_numbFormatInfo);var $f=$e.indexOf(_numbFormatInfo.number.decimalSeparator)+2;for(var i=$e.length-1;i>$f;i--){if($e[i]!='0')break;};this.btnRate.setText($e.substring(0,i+1));}};PXCurrencyRate.prototype.onLoad=function(){this.btnCury=__px_all(this)[this.ID+"_curyB"];this.chkCury=__px_all(this)[this.ID+"_chk"];this.btnRate=__px_all(this)[this.ID+"_rateB"];this.pnlRate=__px_all(this)[this.ID+"_pnlRate"];this.edCury=__px_all(this)[this.ID+"_cury"];if(this.edCury){this.edCury.elemNote=this.elemNote;this.edCury.labelWrapper=this.labelWrapper;};if(this.chkCury){this.chkCury.events.addEventHandler("valueInitialized",Function.createDelegate(this,function(e){var $g=this.chkCury.getValue();this.btnCury.setText($g?this.viewCury:this.viewBase);}));};if(this.btnCury){var h=Function.createDelegate(this,this.$k);this.btnCury.events.addEventHandler("click",h);};if(this.pnlRate){var h=Function.createDelegate(this,this.$l);this.pnlRate.events.addEventHandler("afterHide",h);}};PXCurrencyRate.prototype.$k=function($h,ev){if(this.chkCury==null)return;var $g=this.chkCury.getValue();this.chkCury.updateValue(!$g);this.btnCury.setText($g?this.viewBase:this.viewCury);};PXCurrencyRate.prototype.$l=function($i,ev){var $j=__px_all(this)[$i.ID+"_rf_txtCuryRate"];if($j&&this.btnRate){this.rate=$j.getValue();this.setRateText();}}

